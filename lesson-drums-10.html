<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Lesson 10 Â· Trap & 808 Patterns | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" content="Master modern trap production drums. Program rolling hi-hats, 808 bass patterns, and signature trap rhythms." />
    <link rel="stylesheet" href="styles.css">
    <style>
      /* Trap Style Elements */
      .trap-elements {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: var(--space-lg);
        margin: var(--space-xl) 0;
      }

      .trap-element {
        background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
        border: 1px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .trap-element::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
      }

      .trap-element.hihat::before {
        background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple));
      }

      .trap-element.bass::before {
        background: linear-gradient(90deg, #e17055, #d63031);
      }

      .trap-element.snare::before {
        background: linear-gradient(90deg, #fdcb6e, #f39c12);
      }

      .trap-element .icon {
        font-size: 2.5rem;
        margin-bottom: var(--space-sm);
      }

      .trap-element h4 {
        font-size: 1rem;
        margin-bottom: var(--space-xs);
      }

      .trap-element p {
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      /* Rolling Hi-Hat Demo */
      .rolling-demo {
        background: var(--bg-secondary);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        margin: var(--space-xl) 0;
      }

      .roll-pattern {
        display: flex;
        gap: 2px;
        margin: var(--space-md) 0;
        overflow-x: auto;
        padding-bottom: var(--space-sm);
      }

      .roll-step {
        min-width: 24px;
        height: 40px;
        background: var(--bg-tertiary);
        border-radius: 2px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        font-size: 0.6rem;
        position: relative;
      }

      .roll-step .bar {
        width: 80%;
        background: var(--accent-cyan);
        border-radius: 2px 2px 0 0;
        transition: height 0.2s;
      }

      .roll-step.triplet .bar {
        background: var(--accent-purple);
      }

      .roll-step .label {
        position: absolute;
        top: 2px;
        font-size: 0.5rem;
        color: var(--text-muted);
      }

      /* 808 Visualization */
      .bass-808 {
        background: linear-gradient(135deg, #2d3436, #636e72);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        margin: var(--space-lg) 0;
      }

      .bass-808 h4 {
        color: #e17055;
        margin-bottom: var(--space-md);
        text-align: center;
      }

      .waveform-display {
        height: 80px;
        background: var(--bg-tertiary);
        border-radius: var(--radius-md);
        position: relative;
        overflow: hidden;
        margin-bottom: var(--space-md);
      }

      .waveform-display .wave {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60%;
        background: linear-gradient(180deg, transparent, rgba(225, 112, 85, 0.5));
        clip-path: polygon(
          0% 100%, 5% 60%, 10% 80%, 15% 40%, 20% 70%, 25% 30%, 30% 60%,
          35% 20%, 40% 50%, 45% 10%, 50% 40%, 55% 5%, 60% 30%, 65% 15%,
          70% 25%, 75% 20%, 80% 22%, 85% 21%, 90% 20%, 95% 20%, 100% 20%,
          100% 100%
        );
        animation: wave-decay 2s ease-out infinite;
      }

      @keyframes wave-decay {
        0% { opacity: 1; transform: scaleY(1); }
        100% { opacity: 0.3; transform: scaleY(0.3); }
      }

      .bass-controls {
        display: flex;
        gap: var(--space-md);
        justify-content: center;
      }

      .bass-control {
        text-align: center;
      }

      .bass-control label {
        display: block;
        font-size: 0.7rem;
        color: var(--text-muted);
        margin-bottom: var(--space-xs);
      }

      .bass-control input[type="range"] {
        width: 100px;
      }

      /* Triplet Explanation */
      .triplet-box {
        background: var(--bg-tertiary);
        border-left: 4px solid var(--accent-purple);
        padding: var(--space-md);
        margin: var(--space-lg) 0;
        border-radius: 0 var(--radius-md) var(--radius-md) 0;
      }

      .triplet-box h4 {
        color: var(--accent-purple);
        margin-bottom: var(--space-sm);
      }

      /* Pattern Examples */
      .pattern-examples {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--space-lg);
        margin: var(--space-xl) 0;
      }

      .pattern-example {
        background: var(--bg-tertiary);
        border-radius: var(--radius-md);
        padding: var(--space-md);
      }

      .pattern-example h4 {
        font-size: 0.9rem;
        margin-bottom: var(--space-sm);
        color: var(--accent-cyan);
      }

      .pattern-example pre {
        font-family: monospace;
        font-size: 0.75rem;
        line-height: 1.6;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <div class="page-inner">
        <header class="mpl-nav">
          <div class="mpl-nav-logo">
            <img src="mpl-logo-full.svg" alt="Music Producer Lab" class="mpl-nav-logo-img" />
          </div>
          <div class="mpl-nav-actions">
            <button class="btn btn-outline" type="button" onclick="window.location.href='labs.html'">
              <span>Back to overview</span>
            </button>
          </div>
        </header>

        <section class="hero" aria-label="Lesson 10 Â· Trap & 808 Patterns">
          <div class="hero-copy">
            <div class="hero-copy-eyebrow">Lesson 10 Â· Drum pattern</div>
            <h1 class="hero-title">Trap & <span>808 Patterns</span></h1>
            <p class="hero-subtitle">
              Master <strong>modern trap production</strong> drums. Program
              <strong>rolling hi-hats</strong>, <strong>808 bass patterns</strong>,
              and the signature rhythms that define contemporary hip-hop and EDM.
            </p>
            <div style="margin-top:1rem;">
              <a class="btn btn-primary" href="lesson-drums-9.html"><span>â† Lesson 9</span></a>
              <a class="btn btn-primary" href="lesson-drums-11.html" style="margin-left:0.6rem;"><span>Lesson 11 â†’</span></a>
            </div>
          </div>

          <aside class="hero-visual" aria-hidden="true">
            <div class="hero-visual-header">
              <div class="hero-visual-title">Intermediate</div>
              <div class="hero-visual-pill">Trap Drums</div>
            </div>
            <div class="hero-visual-grid">
              <div class="hero-visual-main">
                <div class="hero-visual-main-title">140 BPM Â· Trap</div>
                <div class="hero-visual-waves">
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                </div>
                <div class="hero-visual-metrics">
                  <div class="hero-visual-metric">
                    <span>Structure</span>
                    <strong>808 & Hi-Hats</strong>
                  </div>
                  <div class="hero-visual-metric">
                    <span>Time</span>
                    <strong>15â€“18 min</strong>
                  </div>
                </div>
              </div>
              <div class="hero-visual-side-card">
                <div class="hero-visual-side-label">Goal</div>
                <div class="hero-visual-pill-list">
                  <div class="hero-visual-pill-tag">Rolling hi-hats</div>
                  <div class="hero-visual-pill-tag">808 bass patterns</div>
                </div>
                <div class="hero-visual-footer">
                  <span>Modern sound</span>
                  <span>Trap & contemporary hip-hop</span>
                </div>
              </div>
            </div>
          </aside>
        </section>

        <section class="sections-grid" aria-label="Lesson 10 steps">
          <article class="section">
            <div class="section-eyebrow">Introduction</div>
            <h2 class="section-title">The Sound of Modern Music</h2>
            <p class="section-body">
              Trap emerged from Atlanta in the early 2000s and has become the
              <strong>dominant sound in modern music</strong>. Its signature elementsâ€”
              rolling hi-hats, booming 808s, and sparse arrangementsâ€”have influenced
              everything from pop to EDM.
            </p>
            <div style="background: var(--bg-secondary); border-left: 4px solid var(--accent-cyan); padding: var(--space-md); margin: var(--space-md) 0; border-radius: 0 var(--radius-md) var(--radius-md) 0;">
              <p>
                <strong>ğŸ¯ The Trap Trinity:</strong> Rolling hi-hats + 808 bass/kick + sparse snare = instant trap beat.
                The space between notes is just as important as the notes themselves.
              </p>
            </div>
          </article>

          <article class="section">
            <div class="section-eyebrow">Key Elements</div>
            <h2 class="section-title">The 3 Essential Elements</h2>
            <div class="trap-elements">
              <div class="trap-element hihat">
                <div class="icon">ğŸ¥</div>
                <h4>Rolling Hi-Hats</h4>
                <p>Fast 16th and 32nd note patterns with velocity variation. Often includes triplet rolls for energy.</p>
              </div>
              <div class="trap-element bass">
                <div class="icon">ğŸ”Š</div>
                <h4>808 Bass</h4>
                <p>Long, sustained bass notes that serve as both kick AND bass. The foundation of trap.</p>
              </div>
              <div class="trap-element snare">
                <div class="icon">ğŸ‘</div>
                <h4>Sparse Snare/Clap</h4>
                <p>Less frequent than other genres. Often layered clap + snare for impact.</p>
              </div>
            </div>
          </article>

          <article class="section">
            <div class="section-eyebrow">Technique</div>
            <h2 class="section-title">Rolling Hi-Hat Patterns</h2>
            <p class="section-body">
              The <strong>rolling hi-hat</strong> is trap's most distinctive feature. It combines:
            </p>
            <ul class="section-list">
              <li><strong>16th notes</strong> as the base pattern</li>
              <li><strong>32nd note rolls</strong> for energy bursts</li>
              <li><strong>Triplets</strong> for rhythmic variation</li>
              <li><strong>Velocity variation</strong> for human feel</li>
            </ul>

            <div class="rolling-demo">
              <h4 style="margin-bottom: var(--space-md);">Hi-Hat Roll Visualization</h4>
              <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: var(--space-md);">
                Notice how velocity varies and triplets break up the straight 16ths:
              </p>
              <div class="roll-pattern" id="roll-pattern">
                <!-- Generated by JS -->
              </div>
              <p style="font-size: 0.75rem; color: var(--accent-cyan); text-align: center;">
                ğŸ”µ = 16th notes &nbsp;&nbsp; ğŸŸ£ = Triplets
              </p>
            </div>

            <div class="triplet-box">
              <h4>ğŸµ Understanding Triplets</h4>
              <p>
                Triplets divide a beat into <strong>3 equal parts</strong> instead of 2 or 4.
                In trap, triplet hi-hats create that signature "rolling" effect that builds energy.
              </p>
              <pre style="font-family: monospace; margin-top: var(--space-sm); font-size: 0.8rem;">
Regular 16ths: |  1  e  &  a  |  2  e  &  a  |
Triplets:      |  1  trip-let |  2  trip-let |
              </pre>
            </div>
          </article>

          <article class="section">
            <div class="section-eyebrow">The 808</div>
            <h2 class="section-title">The 808 Bass</h2>
            <p class="section-body">
              In trap, the <strong>808</strong> serves as both kick drum AND bass.
              Unlike traditional production where kick and bass are separate, trap 808s are
              <strong>long, sustained bass notes</strong> with a punchy attack.
            </p>

            <div class="bass-808">
              <h4>ğŸ”Š 808 Waveform</h4>
              <div class="waveform-display">
                <div class="wave"></div>
              </div>
              <p style="text-align: center; font-size: 0.8rem; color: var(--text-muted);">
                Notice the sharp attack followed by long sustain and decay
              </p>
              <div class="bass-controls" style="margin-top: var(--space-md);">
                <div class="bass-control">
                  <label>Pitch Glide</label>
                  <input type="range" min="0" max="100" value="30">
                </div>
                <div class="bass-control">
                  <label>Decay</label>
                  <input type="range" min="0" max="100" value="70">
                </div>
                <div class="bass-control">
                  <label>Distortion</label>
                  <input type="range" min="0" max="100" value="40">
                </div>
              </div>
            </div>

            <div style="background: var(--bg-secondary); border-left: 4px solid #e17055; padding: var(--space-md); margin: var(--space-lg) 0; border-radius: 0 var(--radius-md) var(--radius-md) 0;">
              <h4 style="color: #e17055; margin-bottom: var(--space-sm);">ğŸ’¡ 808 Tips</h4>
              <ul class="section-list" style="margin-top: var(--space-sm);">
                <li><strong>Pitch your 808s:</strong> Use different notes for melodic bass lines</li>
                <li><strong>Slide/glide:</strong> Add pitch bends between notes for that iconic sound</li>
                <li><strong>Distortion:</strong> Add subtle saturation for presence on small speakers</li>
                <li><strong>Side-chain:</strong> Duck other elements when the 808 hits</li>
              </ul>
            </div>
          </article>

          <article class="section">
            <div class="section-eyebrow">Patterns</div>
            <h2 class="section-title">Common Trap Patterns</h2>

            <div class="pattern-examples">
              <div class="pattern-example">
                <h4>Basic Trap Beat</h4>
                <pre>
808:   X Â· Â· Â· Â· Â· Â· Â· X Â· Â· Â· Â· Â· Â· Â·
Snare: Â· Â· Â· Â· X Â· Â· Â· Â· Â· Â· Â· X Â· Â· Â·
HiHat: X X X X X X X X X X X X X X X X
                </pre>
              </div>
              <div class="pattern-example">
                <h4>Bouncy Trap</h4>
                <pre>
808:   X Â· Â· Â· Â· Â· X Â· Â· Â· X Â· Â· Â· Â· Â·
Snare: Â· Â· Â· Â· X Â· Â· Â· Â· Â· Â· Â· X Â· Â· Â·
HiHat: X Â· X X X Â· X X X Â· X X X Â· X X
                </pre>
              </div>
              <div class="pattern-example">
                <h4>Hard Trap</h4>
                <pre>
808:   X Â· Â· Â· X Â· Â· Â· X Â· Â· Â· X Â· Â· Â·
Snare: Â· Â· Â· Â· X Â· Â· Â· Â· Â· Â· Â· X Â· Â· X
HiHat: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
                </pre>
              </div>
            </div>
          </article>
        </section>

        <!-- Exercise Instructions -->
        <section class="exercise-instructions" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title">Build a Trap Beat</h2>
            <p class="section-body">
              Create a modern trap pattern with rolling hi-hats, sparse snare,
              and strategic 808 placement.
            </p>

            <div class="exercise-steps">
              <h3>What to do:</h3>
              <ol class="exercise-checklist">
                <li><strong>808:</strong> Place 808s on steps 1 and 11 (sparse, powerful)</li>
                <li><strong>Clap:</strong> Clap on steps 5 and 13 (standard backbeat)</li>
                <li><strong>Hi-Hat:</strong> 16th note hi-hats on steps 1, 3, 5, 7, 9, 11, 13, 15</li>
              </ol>
            </div>

            <div class="exercise-tip">
              <strong>Tip:</strong> In trap, less is more. The sparse 808 placement creates space and impact.
            </div>

            <div class="pattern-hint">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div class="pattern-row-visual">
                <span class="instrument-label">808:</span>
                <span class="step-on">1</span><span class="step-off">2</span><span class="step-off">3</span><span class="step-off">4</span>
                <span class="step-off">5</span><span class="step-off">6</span><span class="step-off">7</span><span class="step-off">8</span>
                <span class="step-off">9</span><span class="step-off">10</span><span class="step-on">11</span><span class="step-off">12</span>
                <span class="step-off">13</span><span class="step-off">14</span><span class="step-off">15</span><span class="step-off">16</span>
              </div>
              <div class="pattern-row-visual">
                <span class="instrument-label">Clap:</span>
                <span class="step-off">1</span><span class="step-off">2</span><span class="step-off">3</span><span class="step-off">4</span>
                <span class="step-on">5</span><span class="step-off">6</span><span class="step-off">7</span><span class="step-off">8</span>
                <span class="step-off">9</span><span class="step-off">10</span><span class="step-off">11</span><span class="step-off">12</span>
                <span class="step-on">13</span><span class="step-off">14</span><span class="step-off">15</span><span class="step-off">16</span>
              </div>
              <div class="pattern-row-visual">
                <span class="instrument-label">Hi-Hat:</span>
                <span class="step-on">1</span><span class="step-off">2</span><span class="step-on">3</span><span class="step-off">4</span>
                <span class="step-on">5</span><span class="step-off">6</span><span class="step-on">7</span><span class="step-off">8</span>
                <span class="step-on">9</span><span class="step-off">10</span><span class="step-on">11</span><span class="step-off">12</span>
                <span class="step-on">13</span><span class="step-off">14</span><span class="step-on">15</span><span class="step-off">16</span>
              </div>
              <div class="pattern-note">Rolling 8th note hi-hats with sparse 808 and backbeat clap</div>
            </div>
          </div>
        </section>

        <!-- Full-Width Sequencer -->
        <section class="sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);">16-Step Grid Â· 140 BPM</h2>

          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <div style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              Play
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
              Stop
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              Check Exercise
            </button>

            <div id="mpl-seq-next-lesson-wrap" style="margin-left:auto;">
              <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                Next Lesson &rarr;
              </button>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            Build the trap pattern to unlock the next lesson.
          </div>
        </section>

        <footer class="footer">
          <div>&copy; <span id="mpl-year"></span> Music Producer Lab Â· Lesson 10</div>
          <div><a class="footer-link" href="labs.html">Back to overview</a></div>
        </footer>
      </div>

      <script>
        // Set year
        document.getElementById("mpl-year").textContent = new Date().getFullYear();

        // Initialize rolling pattern demo
        function initRollingDemo() {
          const pattern = document.getElementById('roll-pattern');
          if (!pattern) return;
          const steps = [
            { vel: 100, type: 'normal' }, { vel: 60, type: 'normal' }, { vel: 80, type: 'normal' }, { vel: 40, type: 'normal' },
            { vel: 100, type: 'triplet' }, { vel: 70, type: 'triplet' }, { vel: 50, type: 'triplet' }, { vel: 90, type: 'normal' },
            { vel: 50, type: 'normal' }, { vel: 70, type: 'normal' }, { vel: 40, type: 'normal' }, { vel: 100, type: 'normal' },
            { vel: 60, type: 'triplet' }, { vel: 80, type: 'triplet' }, { vel: 45, type: 'triplet' }, { vel: 95, type: 'normal' }
          ];
          steps.forEach((step, i) => {
            const el = document.createElement('div');
            el.className = 'roll-step' + (step.type === 'triplet' ? ' triplet' : '');
            const bar = document.createElement('div');
            bar.className = 'bar';
            bar.style.height = `${step.vel}%`;
            const label = document.createElement('span');
            label.className = 'label';
            label.textContent = i + 1;
            el.appendChild(bar);
            el.appendChild(label);
            pattern.appendChild(el);
          });
        }
        document.addEventListener('DOMContentLoaded', initRollingDemo);
      </script>
      <script type="module">
        import { initDrumSequencer } from './sequencer.js';

        const LESSON_KEY = "mpl-drums-10-progress";
        const NEXT_LESSON_URL = "lesson-drums-11.html";

        // Trap: 808 kick, clap, rolling hi-hats
        const instruments = [
          {
            id: "kick",
            label: "808",
            color: "linear-gradient(135deg, #a855f7, #7c3aed)",
            target: [0, 10],
            instructions: "808 kick on beat 1 and the '&' of 3"
          },
          {
            id: "clap",
            label: "Clap",
            color: "linear-gradient(135deg, #feca57, #ff9f43)",
            target: [4, 12],
            instructions: "Clap on beats 2 and 4"
          },
          {
            id: "hihat",
            label: "Hi-Hat",
            color: "linear-gradient(135deg, #00d2d3, #01a3a4)",
            target: [0, 2, 4, 6, 8, 10, 12, 14],
            instructions: "16th note hi-hats"
          }
        ];

        initDrumSequencer(instruments, LESSON_KEY, NEXT_LESSON_URL);
      </script>
    </div>
  </body>
</html>
