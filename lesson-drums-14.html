<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Lesson 14 ¬∑ Polyrhythms & Metric Modulation | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" content="Layer contrasting rhythms for complexity. Create 3-over-4, 5-over-4, and other polyrhythmic patterns." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <style>
      /* Polyrhythm Visualizer */
      .poly-visualizer {
        background: linear-gradient(135deg, #2d3436, #1a1a2e);
        border-radius: var(--radius-lg);
        padding: var(--space-xl);
        margin: var(--space-xl) 0;
      }
      
      .poly-circles {
        display: flex;
        justify-content: center;
        gap: var(--space-xl);
        margin-bottom: var(--space-xl);
      }
      
      .poly-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 3px solid var(--border-subtle);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .poly-circle.active {
        border-color: var(--accent-coral);
        box-shadow: 0 0 20px rgba(231, 112, 85, 0.4);
      }
      
      .poly-circle .beat-marker {
        position: absolute;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: var(--accent-cyan);
        transform-origin: center center;
      }
      
      .poly-circle .center-label {
        font-size: 1.5rem;
        font-weight: 700;
      }
      
      /* Grid Overlay */
      .poly-grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 2px;
        margin: var(--space-lg) 0;
      }
      
      .grid-cell {
        height: 40px;
        background: var(--bg-tertiary);
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        font-weight: 600;
        transition: all 0.2s;
      }
      
      .grid-cell.beat-3 { background: var(--accent-coral); }
      .grid-cell.beat-4 { background: var(--accent-cyan); }
      .grid-cell.overlap { background: var(--accent-purple); }
      
      /* Poly Examples */
      .poly-examples {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: var(--space-lg);
        margin: var(--space-xl) 0;
      }
      
      .poly-card {
        background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
        border: 2px solid var(--border-subtle);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .poly-card:hover {
        border-color: var(--accent-cyan);
        transform: translateY(-2px);
      }
      
      .poly-card.active {
        border-color: var(--accent-coral);
      }
      
      .poly-card h3 {
        font-size: 1.2rem;
        margin-bottom: var(--space-sm);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }
      
      .poly-ratio {
        font-family: monospace;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--accent-amber);
      }
      
      .poly-card p {
        font-size: 0.85rem;
        color: var(--text-muted);
        margin-bottom: var(--space-md);
      }
      
      .poly-pattern {
        display: flex;
        gap: 4px;
        padding: var(--space-sm);
        background: var(--bg-tertiary);
        border-radius: var(--radius-sm);
      }
      
      .poly-hit {
        width: 16px;
        height: 24px;
        border-radius: 2px;
      }
      
      .poly-hit.on { background: var(--accent-coral); }
      .poly-hit.off { background: var(--border-subtle); }
      
      /* Famous Examples */
      .famous-examples {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: var(--space-md);
        margin: var(--space-lg) 0;
      }
      
      .example-item {
        background: var(--bg-tertiary);
        border-radius: var(--radius-md);
        padding: var(--space-md);
      }
      
      .example-item .song {
        font-weight: 600;
        margin-bottom: 4px;
      }
      
      .example-item .artist {
        font-size: 0.85rem;
        color: var(--text-muted);
      }
      
      .example-item .poly-type {
        font-size: 0.75rem;
        color: var(--accent-cyan);
        margin-top: var(--space-xs);
      }
      
      /* Metric Modulation */
      .modulation-demo {
        background: var(--bg-secondary);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        margin: var(--space-xl) 0;
      }
      
      .tempo-comparison {
        display: flex;
        justify-content: space-around;
        align-items: center;
        padding: var(--space-lg);
      }
      
      .tempo-box {
        text-align: center;
      }
      
      .tempo-box .bpm {
        font-size: 2.5rem;
        font-weight: 700;
        font-family: monospace;
      }
      
      .tempo-box .label {
        font-size: 0.85rem;
        color: var(--text-muted);
      }
      
      .tempo-arrow {
        font-size: 2rem;
        color: var(--accent-amber);
      }
    </style>
  </head>
  <body>
    <!-- SITE HEADER -->
    <header class="site-header glass">
      <div class="header-inner container">
        <a href="index.html" class="brand">
          <span class="brand-icon"><svg viewBox="0 0 32 32" aria-hidden="true"><circle cx="16" cy="16" r="14" fill="var(--accent-coral)"/><rect x="10" y="10" width="5" height="12" rx="1" fill="#fff"/><rect x="17" y="6" width="5" height="16" rx="1" fill="#fff"/></svg></span>
          <span class="brand-text">Music Producer Lab</span>
        </a>
        <nav class="header-nav">
          <a href="labs.html" class="nav-link">Labs</a>
          <a href="#" class="nav-link disabled-link" tabindex="-1">Projects</a>
        </nav>
      </div>
    </header>

    <main class="main-content container">
      <!-- HERO -->
      <section class="hero">
        <p class="hero-eyebrow">Lesson 14 ¬∑ Drums & Rhythm</p>
        <h1 class="hero-title">Polyrhythms &<br><span class="highlight">Metric Modulation</span></h1>
        <p class="hero-subtitle">Layer <strong>contrasting rhythms</strong> for complexity and depth. Master <strong>3-over-4</strong>, <strong>5-over-4</strong>, and create <strong>hypnotic polyrhythmic patterns</strong> used by top producers.</p>
      </section>

      <!-- WHAT IS POLYRHYTHM -->
      <section class="card">
        <h2><span class="icon">üîÑ</span> What is a Polyrhythm?</h2>
        <p class="section-intro">
          A polyrhythm occurs when <strong>two or more conflicting rhythms</strong> are played simultaneously. The most common is <strong>3 against 4</strong>‚Äîthree evenly spaced beats against four evenly spaced beats.
        </p>
        
        <div class="poly-visualizer">
          <div class="poly-circles">
            <div class="poly-circle" id="circle3">
              <span class="center-label" style="color: var(--accent-coral);">3</span>
            </div>
            <div class="poly-circle" id="circle4">
              <span class="center-label" style="color: var(--accent-cyan);">4</span>
            </div>
          </div>
          
          <p style="text-align: center; font-size: 0.9rem; color: var(--text-muted);">
            In 3:4, the "3" beats divide the bar into thirds, while "4" beats divide it into quarters.
          </p>
          
          <div class="poly-grid" style="margin-top: var(--space-lg);">
            <div class="grid-cell overlap">1</div>
            <div class="grid-cell beat-4">¬∑</div>
            <div class="grid-cell beat-4">¬∑</div>
            <div class="grid-cell beat-3">3</div>
            <div class="grid-cell beat-4">2</div>
            <div class="grid-cell beat-4">¬∑</div>
            <div class="grid-cell beat-4">¬∑</div>
            <div class="grid-cell beat-3">3</div>
            <div class="grid-cell beat-4">3</div>
            <div class="grid-cell beat-4">¬∑</div>
            <div class="grid-cell beat-4">¬∑</div>
            <div class="grid-cell beat-3">3</div>
          </div>
          
          <div style="display: flex; justify-content: center; gap: var(--space-lg); margin-top: var(--space-md);">
            <span style="display: flex; align-items: center; gap: var(--space-xs); font-size: 0.8rem;">
              <div style="width: 16px; height: 16px; background: var(--accent-coral); border-radius: 2px;"></div>
              3-beat pattern
            </span>
            <span style="display: flex; align-items: center; gap: var(--space-xs); font-size: 0.8rem;">
              <div style="width: 16px; height: 16px; background: var(--accent-cyan); border-radius: 2px;"></div>
              4-beat pattern
            </span>
            <span style="display: flex; align-items: center; gap: var(--space-xs); font-size: 0.8rem;">
              <div style="width: 16px; height: 16px; background: var(--accent-purple); border-radius: 2px;"></div>
              Overlap (downbeat)
            </span>
          </div>
        </div>
      </section>

      <!-- COMMON POLYRHYTHMS -->
      <section class="card">
        <h2><span class="icon">üìä</span> Common Polyrhythms</h2>
        <p class="section-intro">
          Different polyrhythmic ratios create different feelings‚Äîfrom subtle tension to complex hypnotic grooves.
        </p>
        
        <div class="poly-examples">
          <div class="poly-card active" data-poly="3:4">
            <h3><span class="poly-ratio">3:4</span> Three over Four</h3>
            <p>The most common polyrhythm. Creates tension without being too complex. Think "nice cup of tea."</p>
            <div class="poly-pattern">
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
            </div>
          </div>
          
          <div class="poly-card" data-poly="2:3">
            <h3><span class="poly-ratio">2:3</span> Two over Three</h3>
            <p>Creates a triplet feel. Foundation of shuffle and swing grooves. "Hot dog" rhythm.</p>
            <div class="poly-pattern">
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
            </div>
          </div>
          
          <div class="poly-card" data-poly="5:4">
            <h3><span class="poly-ratio">5:4</span> Five over Four</h3>
            <p>Complex and hypnotic. Used in African music and progressive genres. Creates shifting accent points.</p>
            <div class="poly-pattern">
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
            </div>
          </div>
          
          <div class="poly-card" data-poly="7:4">
            <h3><span class="poly-ratio">7:4</span> Seven over Four</h3>
            <p>Very complex, disorienting effect. Used sparingly for dramatic tension and resolution.</p>
            <div class="poly-pattern">
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
              <div class="poly-hit off"></div>
              <div class="poly-hit on"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- FAMOUS EXAMPLES -->
      <section class="card">
        <h2><span class="icon">üéµ</span> Polyrhythms in Popular Music</h2>
        <p class="section-intro">
          Many hit songs use polyrhythms‚Äîoften subtly‚Äîto create that "something special" in their grooves.
        </p>
        
        <div class="famous-examples">
          <div class="example-item">
            <div class="song">Drunk in Love</div>
            <div class="artist">Beyonc√©</div>
            <div class="poly-type">3:4 polyrhythm in percussion</div>
          </div>
          <div class="example-item">
            <div class="song">Kashmir</div>
            <div class="artist">Led Zeppelin</div>
            <div class="poly-type">Guitar 3/4 against drums 4/4</div>
          </div>
          <div class="example-item">
            <div class="song">Pyramid Song</div>
            <div class="artist">Radiohead</div>
            <div class="poly-type">Piano 3:4 against drums</div>
          </div>
          <div class="example-item">
            <div class="song">Schism</div>
            <div class="artist">Tool</div>
            <div class="poly-type">5:4 and 7:4 patterns</div>
          </div>
          <div class="example-item">
            <div class="song">God Only Knows</div>
            <div class="artist">Beach Boys</div>
            <div class="poly-type">Subtle 2:3 in arrangement</div>
          </div>
          <div class="example-item">
            <div class="song">Chameleon</div>
            <div class="artist">Herbie Hancock</div>
            <div class="poly-type">3:4 clavinet pattern</div>
          </div>
        </div>
      </section>

      <!-- METRIC MODULATION -->
      <section class="card">
        <h2><span class="icon">üîÄ</span> Metric Modulation</h2>
        <p class="section-intro">
          Metric modulation changes the perceived tempo by making a <strong>subdivision become the new beat</strong>. The actual BPM doesn't change, but the <em>feel</em> does.
        </p>
        
        <div class="modulation-demo">
          <div class="tempo-comparison">
            <div class="tempo-box">
              <div class="bpm" style="color: var(--accent-cyan);">120</div>
              <div class="label">Quarter note = 120 BPM</div>
            </div>
            <div class="tempo-arrow">‚Üí</div>
            <div class="tempo-box">
              <div class="bpm" style="color: var(--accent-coral);">90</div>
              <div class="label">Dotted quarter = 90 BPM</div>
            </div>
          </div>
          
          <p style="text-align: center; font-size: 0.9rem; color: var(--text-muted); margin-top: var(--space-md);">
            If the triplet becomes the new pulse, 120 BPM ‚Üí 90 BPM perceived tempo.
          </p>
        </div>
        
        <div class="tip-box">
          <strong>Use Case:</strong> Metric modulation is powerful for transitions‚Äîsmoothly shift from an energetic section to a laid-back groove without abruptly changing tempo.
        </div>
      </section>

      <!-- EXERCISE -->
      <section class="card exercise-card">
        <h2><span class="icon">‚úèÔ∏è</span> Exercise: Create a 3:4 Polyrhythm</h2>
        <div class="exercise-info">
          <p><strong>Task:</strong> Program a hi-hat pattern in 3 while the kick-snare stays in 4.</p>
          <ol class="exercise-steps">
            <li>Set the sequencer to 12 steps (LCM of 3 and 4).</li>
            <li>Place kicks on steps 1, 4, 7, 10 (4 evenly spaced).</li>
            <li>Place hi-hats on steps 1, 5, 9 (3 evenly spaced).</li>
            <li>Add snare on steps 4 and 10 for backbeat.</li>
          </ol>
        </div>
        
        <!-- SEQUENCER PLACEHOLDER -->
        <div id="sequencer-root" class="sequencer-container"></div>
        
        <div class="tip-box">
          <strong>Listen:</strong> The hi-hats will feel like they're "floating" against the kick pattern. That's the polyrhythmic tension!
        </div>
      </section>

      <!-- KEY TAKEAWAYS -->
      <section class="card">
        <h2><span class="icon">üéì</span> Key Takeaways</h2>
        <ul class="check-list">
          <li><strong>3:4 polyrhythm:</strong> Most accessible‚Äîcreates subtle tension</li>
          <li><strong>5:4 and 7:4:</strong> Complex, hypnotic‚Äîuse for progressive genres</li>
          <li><strong>LCM principle:</strong> Use the Least Common Multiple for grid length (3√ó4=12)</li>
          <li><strong>Metric modulation:</strong> Change perceived tempo by shifting the pulse</li>
          <li><strong>Subtlety wins:</strong> Often one layer in polyrhythm is quieter for accessibility</li>
        </ul>
      </section>

      <!-- NAVIGATION -->
      <nav class="lesson-nav">
        <a href="lesson-drums-13.html" class="nav-btn prev"><span class="arrow">‚Üê</span> Previous Lesson</a>
        <a href="labs.html" class="nav-btn overview">Labs Overview</a>
        <a href="lesson-drums-15.html" class="nav-btn next">Next Lesson <span class="arrow">‚Üí</span></a>
      </nav>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">¬© 2025 Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="#">Projects</a>
        </nav>
      </div>
    </footer>

    <script type="module">
      // Poly card selection
      document.querySelectorAll('.poly-card').forEach(card => {
        card.addEventListener('click', () => {
          document.querySelectorAll('.poly-card').forEach(c => c.classList.remove('active'));
          card.classList.add('active');
        });
      });
    </script>
    <script type="module" src="js/lesson-loader.js"></script>
  </body>
</html>
