<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson 3 | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero">
          <div class="hero-copy">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
          </div>

          <aside class="hero-visual" aria-hidden="true">
            <div class="hero-visual-header">
              <div class="hero-visual-title">Lesson 3</div>
              <div class="hero-visual-pill">Drum basics</div>
            </div>
            <div class="hero-visual-grid">
              <div class="hero-visual-main">
                <div class="hero-visual-main-title"><span>1-bar loop</span> · 120 BPM</div>
                <div class="hero-visual-waves">
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                </div>
                <div class="hero-visual-metrics">
                  <div class="hero-visual-metric">
                    <span>Structure</span>
                    <strong>Full Beat</strong>
                  </div>
                  <div class="hero-visual-metric">
                    <span>Time</span>
                    <strong>10–15 min</strong>
                  </div>
                </div>
              </div>
              <div class="hero-visual-side-card">
                <div class="hero-visual-side-label">Goal</div>
                <div class="hero-visual-pill-list">
                  <div class="hero-visual-pill-tag">Learn eighth notes</div>
                  <div class="hero-visual-pill-tag">Add hi-hat groove</div>
                </div>
                <div class="hero-visual-footer">
                  <span>Works in any DAW</span>
                  <span>Ableton · FL · Logic · others</span>
                </div>
              </div>
            </div>
          </aside>
        </section>

        <!-- THEORY CONTENT SECTION -->
        <section class="theory-section" style="margin-top: var(--space-2xl); margin-bottom: var(--space-2xl);">
          <div class="section-eyebrow">Theory</div>
          <h2 class="section-title">Hi-hats in 1/8: Feel Subdivisions</h2>
          <p class="section-body" style="margin-bottom: var(--space-xl);">
            So far you've built a <a href="glossary.html#beat" style="color: var(--accent-cyan); text-decoration: underline;">beat</a> that has a clear pulse: <a href="glossary.html#kick-drum" style="color: var(--accent-cyan); text-decoration: underline;">Kick</a> gives you the body-moving foundation (1, 2, 3, 4) and <a href="glossary.html#snare-drum" style="color: var(--accent-cyan); text-decoration: underline;">Snare</a> gives you the <a href="glossary.html#backbeat" style="color: var(--accent-cyan); text-decoration: underline;">backbeat</a> (2 and 4). That already works. But right now, your <a href="glossary.html#loop" style="color: var(--accent-cyan); text-decoration: underline;">loop</a> still has a lot of empty space between the big hits. In this lesson you'll fill that space using <a href="glossary.html#hi-hat" style="color: var(--accent-cyan); text-decoration: underline;">hi-hats</a>, and you'll learn one of the most important skills in rhythm: feeling <a href="glossary.html#subdivisions" style="color: var(--accent-cyan); text-decoration: underline;">subdivisions</a>.
          </p>

          <!-- Theory Cards Grid -->
          <div style="display: grid; gap: var(--space-lg); margin-bottom: var(--space-xl);">

            <!-- Card: What is a hi-hat -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What is a hi-hat?</h3>
              <p class="section-body">
                A <strong>hi-hat</strong> is a cymbal sound. In a real drum kit it's two cymbals on a stand that can be opened and closed with a foot pedal. In electronic music, hi-hats are usually samples, but they still copy the same roles:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong><a href="glossary.html#closed-hi-hat" style="color: var(--accent-cyan); text-decoration: underline;">Closed hi-hat</a>:</strong> short, tight "tss"</li>
                <li><strong><a href="glossary.html#open-hi-hat" style="color: var(--accent-cyan); text-decoration: underline;">Open hi-hat</a>:</strong> longer, brighter "tssss"</li>
              </ul>
              <p class="section-body" style="margin-bottom: 0;">
                Hi-hats often do one main job: they mark time more frequently than the kick and snare, helping your brain "measure" the <a href="glossary.html#groove" style="color: var(--accent-cyan); text-decoration: underline;">groove</a>. If the kick is the heartbeat and the snare is the clap, the hi-hat is the little ticking clock that makes the beat feel alive.
              </p>
            </div>

            <!-- Card: Why subdivisions matter -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Why subdivisions matter (even if you know zero music)</h3>
              <p class="section-body">
                <strong>Subdivisions</strong> are simply "smaller slices of time" inside the beat. They're how music starts to feel fast, energetic, and detailed—without changing the tempo.
              </p>
              <p class="section-body">
                Imagine you are walking. The beat is your normal step: left, right, left, right. A subdivision is when you start taking smaller steps between those steps.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                The tempo didn't change—you didn't suddenly teleport forward—but the movement feels more active and more detailed. That's what happens when you add hi-hats on eighth notes. The track doesn't get faster in BPM, but it feels faster because more events happen inside the same time.
              </p>
            </div>

            <!-- Card: What does 1/8 mean -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0,212,255,0.08), rgba(184,255,221,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What does "1/8" mean?</h3>
              <p class="section-body">
                In Lesson 1 you used the kick on the main beats. Those are <a href="glossary.html#quarter-notes" style="color: var(--accent-cyan); text-decoration: underline;">quarter notes</a> in a 4-beat <a href="glossary.html#bar" style="color: var(--accent-cyan); text-decoration: underline;">bar</a>.
              </p>
              <p class="section-body">
                Now we're going to use <strong><a href="glossary.html#eighth-notes" style="color: var(--accent-cyan); text-decoration: underline;">eighth notes</a></strong>.
              </p>
              <p class="section-body">
                A bar has 4 beats. If you split each beat into 2 equal pieces, you get 8 pieces total. That's why they're called eighth notes.
              </p>
              <p class="section-body" style="margin-bottom: var(--space-sm);">
                Instead of counting only:
              </p>
              <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: var(--space-md); border-radius: 8px; text-align: center; margin-bottom: var(--space-sm);">
                <div style="color: #ff8a65; font-weight: bold; font-size: 1.1em;">1 2 3 4</div>
              </div>
              <p class="section-body" style="margin-bottom: var(--space-sm);">
                You count:
              </p>
              <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: var(--space-md); border-radius: 8px; text-align: center;">
                <div style="color: #00d4ff; font-weight: bold; font-size: 1.1em;">1 & 2 & 3 & 4 &</div>
              </div>
              <p class="section-body" style="margin-top: var(--space-sm);">
                The numbers are still the main beats. The <strong>&</strong> are the spaces in between.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                This is a huge moment: once you can count "1 & 2 & 3 & 4 &" comfortably, you can understand most drum patterns you hear in modern music.
              </p>
            </div>

            <!-- Card: How eighth notes map to grid -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0,212,255,0.08), rgba(184,255,221,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">How eighth notes map onto the 16-step grid</h3>
              <p class="section-body">
                Your sequencer <a href="glossary.html#grid" style="color: var(--accent-cyan); text-decoration: underline;">grid</a> is still one bar split into 16 steps (<a href="glossary.html#sixteenth-notes" style="color: var(--accent-cyan); text-decoration: underline;">sixteenth-note</a> resolution). That means:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li>Every beat = 4 steps</li>
                <li>Every eighth note = 2 steps</li>
              </ul>
              <p class="section-body">
                So if you want a hi-hat on every eighth note, you place it every 2 steps.
              </p>
              <p class="section-body" style="margin-bottom: var(--space-sm);">
                That lands on: <strong>1, 3, 5, 7, 9, 11, 13, 15</strong>
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                Those are all the odd-numbered steps. This is exactly what your exercise is asking for: "click every odd step."
              </p>
            </div>

            <!-- Card: Visual of full beat -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0,212,255,0.08), rgba(184,255,221,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What you're building in this lesson</h3>
              <p class="section-body" style="margin-bottom: var(--space-md);">
                When you combine the patterns, you get the classic "full beat skeleton":
              </p>

              <!-- Visual grid using pattern-row-visual style -->
              <div style="background: rgba(0,0,0,0.3); padding: var(--space-md); border-radius: 8px; margin-bottom: var(--space-sm);">
                <div class="pattern-row-visual">
                  <span class="instrument-label" style="color: #ff8a65;">Kick:</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ff5a3d,#ffb28a);">1</span>
                  <span class="step-off">2</span>
                  <span class="step-off">3</span>
                  <span class="step-off">4</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ff5a3d,#ffb28a);">5</span>
                  <span class="step-off">6</span>
                  <span class="step-off">7</span>
                  <span class="step-off">8</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ff5a3d,#ffb28a);">9</span>
                  <span class="step-off">10</span>
                  <span class="step-off">11</span>
                  <span class="step-off">12</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ff5a3d,#ffb28a);">13</span>
                  <span class="step-off">14</span>
                  <span class="step-off">15</span>
                  <span class="step-off">16</span>
                </div>

                <div class="pattern-row-visual">
                  <span class="instrument-label" style="color: #8a9bff;">Snare:</span>
                  <span class="step-off">1</span>
                  <span class="step-off">2</span>
                  <span class="step-off">3</span>
                  <span class="step-off">4</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#5f4dff,#8a9bff);">5</span>
                  <span class="step-off">6</span>
                  <span class="step-off">7</span>
                  <span class="step-off">8</span>
                  <span class="step-off">9</span>
                  <span class="step-off">10</span>
                  <span class="step-off">11</span>
                  <span class="step-off">12</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#5f4dff,#8a9bff);">13</span>
                  <span class="step-off">14</span>
                  <span class="step-off">15</span>
                  <span class="step-off">16</span>
                </div>

                <div class="pattern-row-visual">
                  <span class="instrument-label" style="color: #00d4ff;">Hi-Hat:</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">1</span>
                  <span class="step-off">2</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">3</span>
                  <span class="step-off">4</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">5</span>
                  <span class="step-off">6</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">7</span>
                  <span class="step-off">8</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">9</span>
                  <span class="step-off">10</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">11</span>
                  <span class="step-off">12</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">13</span>
                  <span class="step-off">14</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">15</span>
                  <span class="step-off">16</span>
                </div>
              </div>

              <p class="section-body" style="margin-top: var(--space-sm); margin-bottom: 0;">
                Even with only three sounds, this already feels like a real track foundation. The hi-hats on every eighth note (odd steps) create the steady pulse that makes the beat feel alive.
              </p>
            </div>

            <!-- Card: What to listen for -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What you should listen for</h3>
              <p class="section-body">
                When you press play, don't just check if it's correct. Listen for these specific changes:
              </p>
              <ol class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>The groove feels more "driven"</strong><br>
                  The hi-hats create motion, like a rolling wheel.</li>
                <li><strong>The spaces between hits feel smaller</strong><br>
                  Your brain stops waiting in silence between kick and snare because there's a steady stream of time markers.</li>
                <li><strong>You can count "1 & 2 & 3 & 4 &" more easily</strong><br>
                  This is the real skill you're training. You're learning to feel the grid as music, not as numbers.</li>
              </ol>
            </div>

            <!-- Card: Physical trick -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">A simple physical trick to learn subdivisions fast</h3>
              <p class="section-body">
                Do this while the loop plays:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Tap your foot</strong> on the numbers: 1 2 3 4</li>
                <li><strong>Clap or tap your fingers</strong> on the &: & & & &</li>
              </ul>
              <p class="section-body" style="margin-bottom: 0;">
                So you're basically doing two layers: foot = slow pulse (beats), hands = the "in between" (subdivisions). This is exactly how drummers learn time. You can do it anywhere—even without a computer.
              </p>
            </div>

            <!-- Card: Common mistakes -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Common beginner mistakes (and how to fix them)</h3>
              <p class="section-body">
                <strong>Mistake 1: Only placing 4 hi-hats (on the beats)</strong><br>
                That's not eighth notes—that's the same rhythm as the kick. <strong>Fix:</strong> make sure there's a hi-hat in-between each beat as well.
              </p>
              <p class="section-body">
                <strong>Mistake 2: Placing hats on the wrong spacing (every 3 steps, etc.)</strong><br>
                That creates a different rhythmic feel and may sound "off." <strong>Fix:</strong> eighth notes are perfectly even—every 2 steps.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                <strong>Mistake 3: Hi-hats feel annoying or too loud</strong><br>
                That's normal. Hi-hats are bright and can feel harsh. In real production you usually turn them down, filter them, or choose a softer sample. For now, focus on the timing.
              </p>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>

            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>

          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:4px;"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <div id="mpl-seq-next-lesson-wrap" style="margin-left:auto;">
              <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                <span>Next Lesson &rarr;</span>
              </button>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>

    <!-- MODULAR LESSON ENGINE -->

<script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-3.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    <script src="navbar.js"></script>
  </body>
</html>
