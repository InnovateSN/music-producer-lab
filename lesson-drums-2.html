<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson 2 | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero">
          <div class="hero-copy">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
          </div>

          <aside class="hero-visual" aria-hidden="true">
            <div class="hero-visual-header">
              <div class="hero-visual-title">Lesson 2</div>
              <div class="hero-visual-pill">Drum basics</div>
            </div>
            <div class="hero-visual-grid">
              <div class="hero-visual-main">
                <div class="hero-visual-main-title"><span>1-bar loop</span> · 120 BPM</div>
                <div class="hero-visual-waves">
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                </div>
                <div class="hero-visual-metrics">
                  <div class="hero-visual-metric">
                    <span>Structure</span>
                    <strong>Kick + Snare</strong>
                  </div>
                  <div class="hero-visual-metric">
                    <span>Time</span>
                    <strong>10–15 min</strong>
                  </div>
                </div>
              </div>
              <div class="hero-visual-side-card">
                <div class="hero-visual-side-label">Goal</div>
                <div class="hero-visual-pill-list">
                  <div class="hero-visual-pill-tag">Learn the backbeat</div>
                  <div class="hero-visual-pill-tag">Add snare on 2 & 4</div>
                </div>
                <div class="hero-visual-footer">
                  <span>Works in any DAW</span>
                  <span>Ableton · FL · Logic · others</span>
                </div>
              </div>
            </div>
          </aside>
        </section>

        <!-- THEORY CONTENT SECTION -->
        <section class="theory-section" style="margin-top: var(--space-2xl); margin-bottom: var(--space-2xl);">
          <div class="section-eyebrow">Theory</div>
          <h2 class="section-title">The Backbeat: Adding the Snare</h2>
          <p class="section-body" style="margin-bottom: var(--space-xl);">
            In Lesson 1 you created a steady pulse using the kick drum: 4 on the floor (kick on every beat). That gave you a foundation, like a heartbeat. Now you're going to add something that instantly makes that foundation feel like "real music" to most listeners: <strong>the backbeat</strong>.
          </p>

          <!-- Theory Cards Grid -->
          <div style="display: grid; gap: var(--space-lg); margin-bottom: var(--space-xl);">

            <!-- Card: What is a snare -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What is a "snare" (and why it's special)?</h3>
              <p class="section-body">
                A <strong>snare drum</strong> is a drum sound with a sharp attack. In acoustic drums it's a drum with metal wires (the "snares") stretched under it, which gives it that crisp, "snap" sound.
              </p>
              <p class="section-body">
                In electronic music, snares can be sampled, synthesized, layered, or replaced by a clap, but the musical role is often the same: it creates a strong accent in the groove.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                If the kick is the <strong>low thump that moves the body</strong>, the snare is the <strong>sharp hit that organizes the rhythm and gives it attitude</strong>.
              </p>
            </div>

            <!-- Card: What does backbeat mean -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What does "backbeat" mean?</h3>
              <p class="section-body">
                In most modern music that feels like "a beat," the bar is counted:
              </p>
              <p class="section-body" style="font-family: monospace; background: rgba(255,255,255,0.03); padding: var(--space-sm); border-radius: 4px; margin: var(--space-sm) 0; text-align: center;">
                1 – 2 – 3 – 4
              </p>
              <p class="section-body">
                The backbeat is the <strong>accent on 2 and 4</strong>.
              </p>
              <p class="section-body">
                So the simplest "classic groove" is:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li>Kick on 1, 2, 3, 4</li>
                <li>Snare on 2 and 4</li>
              </ul>
              <p class="section-body" style="margin-bottom: 0;">
                This is so common that your brain almost expects it. Add the snare on 2 and 4 and suddenly the loop feels like a track you could rap over, sing over, or dance to.
              </p>
            </div>

            <!-- Card: Visual representation of the backbeat -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(95,77,255,0.08), rgba(138,155,255,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Visual: The Backbeat Pattern</h3>
              <p class="section-body" style="margin-bottom: var(--space-sm);">
                Here's how the kick and snare work together on the four beats:
              </p>
              <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: var(--space-md); border-radius: 8px; line-height: 1.8;">
                <div style="color: #ff8a65; font-weight: bold;">BEAT:    1       2       3       4</div>
                <div style="color: #ff5a3d;">KICK:    ●       ●       ●       ●</div>
                <div style="color: #8a9bff;">SNARE:           ●               ●</div>
                <div style="margin-top: var(--space-sm); color: rgba(255,255,255,0.7);">
                  <div>         ↓       ↓       ↓       ↓</div>
                  <div>       "boom" "snap"  "boom" "snap"</div>
                </div>
              </div>
              <p class="section-body" style="margin-top: var(--space-sm); margin-bottom: 0;">
                The kick provides constant pulse, while the snare adds the "snap" on beats 2 and 4, creating the call-and-response pattern that defines popular music.
              </p>
            </div>

            <!-- Card: Why snare on 2 and 4 -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Why does the snare go on 2 and 4 specifically?</h3>
              <p class="section-body">
                Because it creates a <strong>push–pull feeling</strong>.
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Beat 1</strong> feels like the start, the "landing"</li>
                <li><strong>Beat 2</strong> feels like a reply or response</li>
                <li><strong>Beat 3</strong> feels like a second landing, a restart of energy</li>
                <li><strong>Beat 4</strong> feels like a setup that leads back to beat 1</li>
              </ul>
              <p class="section-body">
                When the snare hits on 2 and 4, you get a natural "answer" to the kick's forward motion. This is why people say the backbeat creates a groove: it makes time feel organized, not just evenly spaced.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                If you clap along to most pop songs, you'll probably clap on 2 and 4 without even thinking.
              </p>
            </div>

            <!-- Card: Connecting to the 16-step grid -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Connecting this to the 16-step grid (no theory required)</h3>
              <p class="section-body">
                Your sequencer shows one bar split into 16 steps. In a 4-beat bar:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li>Each beat is 4 steps</li>
                <li>So the beats land like this:</li>
              </ul>
              <p class="section-body" style="font-family: monospace; background: rgba(255,255,255,0.03); padding: var(--space-sm); border-radius: 4px; margin: var(--space-sm) 0;">
                Beat 1 = step 1<br>
                Beat 2 = step 5<br>
                Beat 3 = step 9<br>
                Beat 4 = step 13
              </p>
              <p class="section-body">
                That means:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li>The kick stays on steps <strong>1, 5, 9, 13</strong></li>
                <li>The snare goes on beats 2 and 4, which are steps <strong>5 and 13</strong></li>
              </ul>
              <p class="section-body" style="margin-bottom: 0;">
                If you place the snare somewhere else, it might still be valid music, but it won't be the classic backbeat we're learning here.
              </p>
            </div>

            <!-- Card: Visual grid representation -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(95,77,255,0.08), rgba(138,155,255,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Visual: 16-Step Grid Pattern</h3>
              <p class="section-body" style="margin-bottom: var(--space-sm);">
                Here's how the pattern looks on the 16-step sequencer grid:
              </p>
              <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: var(--space-md); border-radius: 8px; line-height: 1.8; overflow-x: auto;">
                <div style="color: rgba(255,255,255,0.5);">Steps:  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16</div>
                <div style="color: #ff5a3d; font-weight: bold;">Kick:   ●  -  -  -  ●  -  -  -  ●  -  -  -  ●  -  -  -</div>
                <div style="color: #8a9bff; font-weight: bold;">Snare:  -  -  -  -  ●  -  -  -  -  -  -  -  ●  -  -  -</div>
                <div style="margin-top: var(--space-sm); color: rgba(255,255,255,0.6); border-top: 1px solid rgba(255,255,255,0.1); padding-top: var(--space-sm);">
                  <div>Beats:  |-- 1 --|-- 2 --|-- 3 --|-- 4 --|</div>
                </div>
              </div>
              <p class="section-body" style="margin-top: var(--space-sm); margin-bottom: 0;">
                Notice how kick and snare overlap on beats 2 and 4 (steps 5 and 13). This layering is what creates the powerful "boom-snap" sound of the backbeat.
              </p>
            </div>

            <!-- Card: What to listen for -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What you should listen for (this is the real learning)</h3>
              <p class="section-body">
                After you place the snare correctly and press play, listen like a producer. Ask yourself:
              </p>
              <ol class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Do I feel a "snap" on 2 and 4?</strong><br>
                  That snap is the backbeat. It should feel obvious.</li>
                <li><strong>Does the loop feel more like a "song beat"?</strong><br>
                  Even with only two drum sounds, it should already feel like something you could build a track around.</li>
                <li><strong>Does the snare feel too loud or too quiet?</strong><br>
                  In real production, snare volume changes the vibe dramatically:
                  <ul style="margin-left: var(--space-md); margin-top: var(--space-xs);">
                    <li>Too loud can feel aggressive or "marching"</li>
                    <li>Too quiet can feel weak or lacking energy</li>
                  </ul>
                  (We'll handle mixing later, but start noticing it now.)
                </li>
              </ol>
            </div>

            <!-- Card: Common mistakes -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Common beginner mistakes (and how to fix them)</h3>
              <p class="section-body">
                <strong>Mistake 1: Putting the snare on beat 1.</strong><br>
                That can feel like a "wrong start" because beat 1 is usually owned by the kick. <strong>Fix:</strong> put the snare on 2 and 4.
              </p>
              <p class="section-body">
                <strong>Mistake 2: Putting the snare slightly off the beat.</strong><br>
                If the snare is not exactly on 2 and 4, the groove might feel messy. <strong>Fix:</strong> make sure it's on step 5 and step 13.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                <strong>Mistake 3: Confusing snare and clap.</strong><br>
                Both can work as a backbeat sound. Many house tracks use claps instead of snares. For now, just treat "snare row" as "backbeat sound row."
              </p>
            </div>

            <!-- Card: Why this matters -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Why this matters for your future beats</h3>
              <p class="section-body">
                This kick + snare pattern is the skeleton of countless rhythms. Once you have it, you can start adding:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Hi-hats</strong> to create speed and movement</li>
                <li><strong>Offbeat hats</strong> to create bounce (especially in house)</li>
                <li><strong>Ghost notes</strong> (tiny extra snare hits) for funkier grooves</li>
                <li><strong>Extra kicks</strong> for more complex patterns</li>
                <li><strong>Percussion</strong> for character and style</li>
              </ul>
              <p class="section-body" style="margin-bottom: 0;">
                But if you don't nail the backbeat, everything you add later can feel confusing or random, because the listener has no clear rhythmic "story."
              </p>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>

            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>

          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:4px;"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <div id="mpl-seq-next-lesson-wrap" style="margin-left:auto;">
              <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                <span>Next Lesson &rarr;</span>
              </button>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>

    <!-- MODULAR LESSON ENGINE -->

<script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-2.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    <script src="navbar.js"></script>
  </body>
</html>
