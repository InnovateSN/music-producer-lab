<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson · Music Producer Lab</title>
    <meta name="viewport" content="width=1200, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero" style="display: flex; align-items: center; gap: var(--space-3xl);">
          <div class="hero-copy" style="flex: 1; max-width: none;">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
            <div id="mpl-hero-nav-btns" style="margin-top:1rem;display:flex;gap:0.6rem;flex-wrap:wrap;"></div>
          </div>

          <div class="hero-visual" style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <img src="images/mpl_hero_rightside.png" alt="Music Production" style="width: 100%; max-width: 500px; height: auto; object-fit: contain; filter: drop-shadow(0 0 40px rgba(0, 212, 255, 0.3));">
          </div>
          </div>
        </section>

        <!-- EDUCATIONAL CONTENT -->
        <section style="margin-top: var(--space-3xl); margin-bottom: var(--space-3xl);">
          <div class="card" style="padding: var(--space-2xl); background: var(--bg-card); border: 1px solid var(--border-subtle);">

            <!-- INTRODUCTION -->
            <div class="section-eyebrow" style="margin-bottom: var(--space-md);">What You'll Learn</div>
            <h2 style="font-size: 2rem; margin-bottom: var(--space-lg); color: var(--text-primary);">House & Techno Drums: The 4/4 Foundation</h2>

            <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: var(--space-xl);">
              House and techno are built on the <a href="glossary.html#four-on-the-floor" style="color: var(--accent-cyan); text-decoration: underline;">four-on-the-floor</a> kick pattern—a <strong>driving, relentless pulse</strong> with kick drums on every beat (1, 2, 3, 4). This pattern has powered dance floors worldwide since the 1980s, from Chicago house clubs to Berlin techno warehouses. Combined with <strong>off-beat hi-hats</strong> (on the "&" between beats) and a steady <a href="glossary.html#backbeat" style="color: var(--accent-cyan); text-decoration: underline;">backbeat</a>, this creates the hypnotic, energetic rhythm that defines electronic dance music. In this lesson, you'll program a classic techno beat with four-on-the-floor kick, off-beat hi-hats, clap backbeat, and percussive rimshot accents that add rhythmic texture.
            </p>

            <!-- KEY CONCEPTS GRID -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-2xl);">

              <!-- Concept 1: Four-on-the-Floor -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(255, 90, 61, 0.1), rgba(255, 178, 138, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(255, 90, 61, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/drum.png" alt="Drum" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-orange); margin: 0;">Four-on-the-Floor</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Four-on-the-floor means a <strong>kick on every quarter note</strong>—beats 1, 2, 3, and 4. This creates a steady, driving pulse that's easy to dance to. Unlike funk or hip-hop with syncopated kicks, house/techno keeps the kick <strong>predictable and relentless</strong>, letting other elements create rhythmic interest.
                </p>
              </div>

              <!-- Concept 2: Off-Beat Hi-Hats -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(95, 77, 255, 0.1), rgba(138, 155, 255, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(95, 77, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/clock_anticlockwise.png" alt="Timing" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-purple); margin: 0;">Off-Beat Hi-Hats</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  House and techno hi-hats typically play on the <strong>"&" between beats</strong> (steps 3, 7, 11, 15). This creates the signature "pump" feel when combined with sidechain compression. The off-beat hi-hats contrast with the on-beat kicks, creating <strong>rhythmic movement and forward momentum</strong>.
                </p>
              </div>

              <!-- Concept 3: Minimal Percussion -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(184, 255, 221, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(0, 212, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/mixer.png" alt="Minimal" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-cyan); margin: 0;">Minimal Layering</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Techno embraces <strong>minimalism</strong>—fewer elements, more impact. Instead of complex fills and patterns, techno uses <strong>simple, hypnotic loops</strong> with subtle variations. Rimshots, shakers, and percussion are added sparingly for texture, not complexity. Less is more.
                </p>
              </div>

              <!-- Concept 4: Genre Variations -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(179, 102, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/notamusicale.png" alt="Genre" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-magenta); margin: 0;">Genre Variations</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  <strong>Deep House</strong> (118-124 BPM): soulful, groovy. <strong>Classic House</strong> (120-128 BPM): uplifting, energetic. <strong>Tech House</strong> (124-130 BPM): minimal, hypnotic. <strong>Techno</strong> (125-140 BPM): industrial, dark. All use four-on-the-floor, but tempo and mood vary.
                </p>
              </div>

            </div>

            <!-- VISUAL PATTERN -->
            <div style="padding: var(--space-xl); background: var(--bg-secondary); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Classic Techno Pattern Breakdown</h3>

              <div style="margin-bottom: var(--space-lg);">
                <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-md);">Complete Pattern (125 BPM)</h4>
                <div style="background: rgba(0, 212, 255, 0.05); padding: var(--space-md); border-radius: var(--radius-md); border: 1px solid var(--accent-cyan);">

                  <!-- Kick row (four-on-the-floor) -->
                  <div style="margin-bottom: var(--space-sm);">
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Kick (Four-on-the-Floor)</div>
                    <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                      <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(255,90,61,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(255,90,61,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(255,90,61,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(255,90,61,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                    </div>
                    <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted);">Steps 1, 5, 9, 13 (every quarter note)</div>
                  </div>

                  <!-- Clap row (backbeat) -->
                  <div style="margin-bottom: var(--space-sm);">
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Clap (Backbeat)</div>
                    <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                    </div>
                    <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted);">Steps 5, 13 (beats 2 & 4)</div>
                  </div>

                  <!-- Hi-Hat row (off-beat) -->
                  <div style="margin-bottom: var(--space-sm);">
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Closed Hi-Hat (Off-Beat)</div>
                    <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                    </div>
                    <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted);">Steps 3, 7, 11, 15 (all "&" beats)</div>
                  </div>

                  <!-- Rimshot row (percussive accents) -->
                  <div>
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Rimshot (Accents)</div>
                    <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#54a0ff,#2e86de); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(84,160,255,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#54a0ff,#2e86de); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(84,160,255,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#54a0ff,#2e86de); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(84,160,255,0.5);"></div>
                    </div>
                    <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted);">Steps 7, 9, 16 (rhythmic texture)</div>
                  </div>

                </div>
              </div>

              <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                <strong>Key elements:</strong> The kick (orange glow) drives every beat. The hi-hats land on the "&" between beats, creating the "pump" feel. The clap anchors the backbeat. The rimshots (blue glow) add percussive texture on steps 7, 9, and 16 without cluttering the rhythm.
              </p>

              <p style="color: var(--text-muted); font-size: 0.9rem; font-style: italic;">
                Count it: "KICK & hi KICK & hi KICK & hi KICK & hi" - notice how kick and hi-hat never play together? That's the off-beat pattern creating space.
              </p>
            </div>

            <!-- COMMON MISTAKES -->
            <div style="margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Common Mistakes to Avoid</h3>

              <div style="display: grid; gap: var(--space-md);">

                <!-- Mistake 1 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Hi-Hats on the Beat (Not Off-Beat)
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Beginners often put hi-hats on beats 1-2-3-4 (steps 1, 5, 9, 13) instead of the off-beats. This creates <strong>kick-hihat collisions</strong> and loses the signature house "pump" feel. The pattern sounds cluttered instead of driving.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Place hi-hats on the <strong>"&" between beats</strong> (steps 3, 7, 11, 15). This creates rhythmic contrast with the kick and sets up perfectly for sidechain compression.
                  </p>
                </div>

                <!-- Mistake 2 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Overcomplicating the Pattern
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Some producers add too many percussion layers, fills, and variations. Techno is about <strong>minimalism and hypnotic repetition</strong>—the power comes from simplicity and subtle changes over 8-16 bars, not constant variation.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Keep it <strong>simple and repetitive</strong>. Let the four-on-the-floor kick drive the track. Add percussion sparingly—one or two percussive elements is enough. Save variations for every 8-16 bars.
                  </p>
                </div>

                <!-- Mistake 3 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Wrong Tempo Range
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Beginners sometimes program house at 100 BPM or techno at 150 BPM. Tempo defines genre identity—deep house at 145 BPM sounds rushed and wrong. Each subgenre has an established tempo range that creates the right feel.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Stick to genre ranges. <strong>Deep House: 118-124 BPM</strong>. <strong>Classic House: 120-128 BPM</strong>. <strong>Tech House: 124-130 BPM</strong>. <strong>Techno: 125-140 BPM</strong>. Tempo creates the genre vibe.
                  </p>
                </div>

              </div>
            </div>

            <!-- WHY THIS MATTERS -->
            <div style="padding: var(--space-xl); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-lg);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Why House & Techno Patterns Matter</h3>

              <div style="display: grid; gap: var(--space-md); color: var(--text-secondary); line-height: 1.8;">
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">1.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Foundation of Electronic Dance Music:</strong> Four-on-the-floor is the rhythmic foundation of countless genres—from house to EDM to trance. Mastering this pattern is essential for electronic production.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">2.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Dancefloor Energy:</strong> The relentless kick creates an undeniable physical response. This pattern has powered dance floors for 40+ years because it's scientifically designed to make people move.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">3.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Minimalism as Art:</strong> Techno teaches that <strong>constraint breeds creativity</strong>. Working within the simple four-on-the-floor framework forces you to find interest in sound design, effects, and subtle variations.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">4.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Genre-Defining Sound:</strong> Understanding house and techno patterns gives you access to one of the most commercially successful and culturally influential music movements in history.</p>
                </div>
              </div>
            </div>

            <!-- WHAT'S NEXT -->
            <div style="margin-top: var(--space-xl); padding: var(--space-lg); background: var(--bg-secondary); border-radius: var(--radius-md); border-left: 4px solid var(--accent-cyan);">
              <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-sm);">What's Next?</h4>
              <p style="color: var(--text-secondary); line-height: 1.7; margin: 0;">
                With house and techno foundations mastered, you'll explore <strong>breakbeats</strong> (drum & bass, jungle patterns), <strong>Latin percussion</strong> (congas, bongos, timbales), and <strong>advanced sidechain techniques</strong> (making the kick "pump" against pads and bass). Each expands your rhythmic vocabulary.
              </p>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>
            
            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>
          
          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <img src="images/PLAY.png" alt="Play" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <img src="images/STOP.png" alt="Stop" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all" style="display:none;">
              <img src="images/CLEAR.png" alt="Clear" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <!-- PRESET CONTROLS (hidden by default) -->
            <div id="mpl-preset-controls" style="display:none;gap:0.5rem;margin-left:0.5rem;">
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-save">Save</button>
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-load">Load</button>
            </div>

            <div style="margin-left:auto;display:flex;gap:0.75rem;">
              <div id="mpl-seq-prev-lesson-wrap">
                <button class="btn btn-secondary" id="mpl-prev-lesson">
                  <span>&larr; Previous Lesson</span>
                </button>
              </div>
              <div id="mpl-seq-next-lesson-wrap">
                <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                  <span>Next Lesson &rarr;</span>
                </button>
              </div>
            </div>
          </div>

          <!-- TEMPO/SWING CONTROLS (for sandbox mode) -->
          <div id="mpl-advanced-controls" style="display:none;margin-top:1rem;padding:1rem;background:var(--bg-secondary);border-radius:var(--radius-md);gap:1.5rem;flex-wrap:wrap;align-items:center;">
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-tempo-slider" style="font-size:0.85rem;color:var(--text-muted);">Tempo:</label>
              <input type="range" id="mpl-tempo-slider" min="60" max="180" value="120" style="width:100px;">
              <span id="mpl-tempo-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:50px;">120 BPM</span>
            </div>
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-swing-slider" style="font-size:0.85rem;color:var(--text-muted);">Swing:</label>
              <input type="range" id="mpl-swing-slider" min="0" max="100" value="0" style="width:100px;">
              <span id="mpl-swing-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:40px;">0%</span>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

        <!-- FOOTER -->
        <footer class="footer" id="mpl-footer">
          <div>&copy; <span id="mpl-year"></span> Music Producer Lab</div>
          <div><a class="footer-link" id="mpl-footer-overview-link" href="labs.html">Back to overview</a></div>
        </footer>
      </div>
      
      <!-- LESSON ENGINE SCRIPT -->
      <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>

      <!--
        HOW TO USE THIS TEMPLATE:
        
        1. Create a config file (e.g., configs/lesson-drums-5.config.js)
        2. Copy this template to your lesson file (e.g., lesson-drums-5-new.html)
        3. Update the script import at the bottom to point to your config
        
        Example:

<script type="module">
          import { lessonConfig } from './configs/lesson-drums-5.config.js';
          import { initLessonFromConfig } from './lesson-engine.js';
          initLessonFromConfig(lessonConfig);
        </script>
      -->

      
      <script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-8.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>
    <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>
  <script src="theme-registry.js"></script>
  <script src="theme-manager.js"></script>
    <script src="navbar.js"></script>
  </body>
</html>
