<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson · Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero" style="display: flex; align-items: center; gap: var(--space-3xl);">
          <div class="hero-copy" style="flex: 1; max-width: none;">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
            <div id="mpl-hero-nav-btns" style="margin-top:1rem;display:flex;gap:0.6rem;flex-wrap:wrap;"></div>
          </div>

          <div class="hero-visual" style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <img src="images/mpl_hero_rightside.png" alt="Music Production" style="width: 100%; max-width: 500px; height: auto; object-fit: contain; filter: drop-shadow(0 0 40px rgba(0, 212, 255, 0.3));">
          </div>
          </div>
        </section>

        <!-- EDUCATIONAL CONTENT -->
        <section style="margin-top: var(--space-3xl); margin-bottom: var(--space-3xl);">
          <div class="card" style="padding: var(--space-2xl); background: var(--bg-card); border: 1px solid var(--border-subtle);">

            <!-- INTRODUCTION -->
            <div class="section-eyebrow" style="margin-bottom: var(--space-md);">What You'll Learn</div>
            <h2 style="font-size: 2rem; margin-bottom: var(--space-lg); color: var(--text-primary);">DnB & Breakbeat: The Fastest Groove</h2>

            <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: var(--space-xl);">
              <strong>Drum and bass</strong> (DnB) is the fastest and most energetic form of dance music, running at <strong>174 BPM</strong>—but it feels like <strong>87 BPM</strong> thanks to the <a href="glossary.html#half-time" style="color: var(--accent-cyan); text-decoration: underline;">half-time</a> snare pattern. Born in the UK underground rave scene of the early 1990s, DnB evolved from breakbeat hardcore and jungle, powered by the legendary <strong>Amen break</strong>—a 6-second drum loop that became the most sampled piece of music in history. The genre combines <strong>syncopated kicks</strong>, rolling <a href="glossary.html#hi-hat" style="color: var(--accent-cyan); text-decoration: underline;">hi-hats</a>, and heavy sub-bass to create a relentless, high-energy groove. In this lesson, you'll program the classic DnB two-step pattern, understand why 174 BPM feels so manageable, and explore the breakbeat culture that revolutionized electronic music.
            </p>

            <!-- KEY CONCEPTS GRID -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-2xl);">

              <!-- Concept 1: Two-Step Pattern -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(255, 90, 61, 0.1), rgba(255, 178, 138, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(255, 90, 61, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/drum.png" alt="Two-Step" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-orange); margin: 0;">The Two-Step Groove</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  The DnB two-step puts <strong>snare on beats 2 and 4</strong> (steps 5 and 13) with <strong>syncopated kicks</strong> on steps 1, 7, and 10. This creates a rolling, bouncing feel that's neither <a href="glossary.html#four-on-the-floor" style="color: var(--accent-cyan); text-decoration: underline;">four-on-the-floor</a> nor standard hip-hop. The kicks land off-beat, creating forward momentum and energy without feeling rushed. This is the backbone of liquid DnB and jump-up styles.
                </p>
              </div>

              <!-- Concept 2: 174 BPM Half-Time -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(95, 77, 255, 0.1), rgba(138, 155, 255, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(95, 77, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/clock_anticlockwise.png" alt="Tempo" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-purple); margin: 0;">174 = 87 BPM Feel</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  At 174 BPM, the <strong>snare hits twice per bar</strong> (beats 2 & 4), making it feel like <strong>87 BPM</strong>—half the actual tempo. The hi-hats and kicks run at full speed (174 BPM), but your brain locks onto the snare as the tempo reference. This creates incredible energy without feeling frantic. The half-time snare is what makes DnB danceable despite its blazing <a href="glossary.html#bpm" style="color: var(--accent-cyan); text-decoration: underline;">BPM</a>.
                </p>
              </div>

              <!-- Concept 3: The Amen Break -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(184, 255, 221, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(0, 212, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/mixer.png" alt="Amen" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-cyan); margin: 0;">The Amen Break</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  The <strong>Amen break</strong>—a 6-second drum solo from "Amen Brother" by The Winstons (1969)—is the most sampled loop in history. DnB producers chopped, time-stretched, and rearranged this break to create jungle and DnB. Its syncopated rhythm, ghost notes, and organic feel became the DNA of breakbeat culture. Understanding the Amen break means understanding the roots of DnB.
                </p>
              </div>

              <!-- Concept 4: Breakbeat Culture -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(179, 102, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/planet.png" alt="Culture" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-magenta); margin: 0;">Breakbeat Sampling</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  DnB and jungle were built on <strong>breakbeat sampling</strong>—chopping drum breaks from funk, soul, and jazz records. Producers would time-stretch breaks to 174 BPM, chop them into individual hits, and rearrange them creatively. This sample-based approach gave DnB its organic, funky character that programmed drums couldn't replicate. The Amen, Think, Apache, and Funky Drummer breaks defined the sound.
                </p>
              </div>

            </div>

            <!-- VISUAL PATTERN BREAKDOWN -->
            <div style="padding: var(--space-xl); background: var(--bg-secondary); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Classic DnB Two-Step Pattern</h3>

              <div style="margin-bottom: var(--space-lg);">
                <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-md);">Complete Pattern (174 BPM, feels like 87 BPM)</h4>
                <div style="background: rgba(0, 212, 255, 0.05); padding: var(--space-md); border-radius: var(--radius-md); border: 1px solid var(--accent-cyan);">

                  <!-- Kick row (syncopated) -->
                  <div style="margin-bottom: var(--space-sm);">
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Kick (Syncopated Rolling Pattern)</div>
                    <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                      <div style="background: linear-gradient(135deg,#e17055,#d63031); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(225,112,85,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#e17055,#d63031); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(225,112,85,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#e17055,#d63031); height: 28px; border-radius: 2px; box-shadow: 0 0 8px rgba(225,112,85,0.5);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                    </div>
                    <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted);">Steps 1, 7, 10 - creates rolling, forward momentum</div>
                  </div>

                  <!-- Snare row (half-time) -->
                  <div style="margin-bottom: var(--space-sm);">
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Snare (Half-Time Backbeat)</div>
                    <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#fdcb6e,#f39c12); height: 28px; border-radius: 2px; box-shadow: 0 0 12px rgba(253,203,110,0.7);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#fdcb6e,#f39c12); height: 28px; border-radius: 2px; box-shadow: 0 0 12px rgba(253,203,110,0.7);"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                    </div>
                    <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted);">Steps 5, 13 (beats 2 & 4) - makes 174 BPM feel like 87 BPM</div>
                  </div>

                  <!-- Hi-Hat row -->
                  <div>
                    <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Hi-Hat (Driving 8th Notes)</div>
                    <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                      <div style="background: linear-gradient(135deg,#00cec9,#0984e3); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00cec9,#0984e3); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00cec9,#0984e3); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00cec9,#0984e3); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00cec9,#0984e3); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00cec9,#0984e3); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00cec9,#0984e3); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                      <div style="background: linear-gradient(135deg,#00cec9,#0984e3); height: 28px; border-radius: 2px;"></div>
                      <div style="background: var(--bg-card); height: 28px; border-radius: 2px; opacity: 0.3;"></div>
                    </div>
                    <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted);">Every 8th note (1, 3, 5, 7...) - provides constant energy and pulse</div>
                  </div>

                </div>
              </div>

              <p style="margin-top: var(--space-lg); color: var(--text-secondary); line-height: 1.7; font-size: 0.95rem;">
                This is the classic DnB two-step: syncopated kicks create rolling movement, the half-time snare makes 174 BPM feel manageable, and driving hi-hats provide relentless energy. The kicks on steps 1, 7, and 10 create an off-beat bounce that's neither four-on-the-floor nor boom bap—it's uniquely DnB. Combined with heavy sub-bass (not shown), this pattern powers liquid DnB, jump-up, and countless subgenres.
              </p>
            </div>

            <!-- COMMON MISTAKES -->
            <div style="margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Common Mistakes to Avoid</h3>

              <div style="display: grid; gap: var(--space-lg);">

                <!-- Mistake 1 -->
                <div style="padding: var(--space-lg); background: rgba(255, 90, 61, 0.05); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm);">Using Standard Boom Bap Kicks</h4>
                  <p style="color: var(--text-secondary); line-height: 1.7;">
                    DnB kicks are <strong>different from boom bap</strong>. While boom bap uses steps 1, 8, 9, 11, DnB two-step uses <strong>steps 1, 7, 10</strong>. This creates a rolling, forward-moving feel instead of boom bap's syncopated bounce. Using boom bap kick placement in DnB makes it sound sluggish and wrong. The DnB kick pattern is specifically designed to work with 174 BPM and create that signature rolling groove.
                  </p>
                </div>

                <!-- Mistake 2 -->
                <div style="padding: var(--space-lg); background: rgba(95, 77, 255, 0.05); border-left: 4px solid var(--accent-purple); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-purple); margin-bottom: var(--space-sm);">Putting Snare on Beat 3 (True Half-Time)</h4>
                  <p style="color: var(--text-secondary); line-height: 1.7;">
                    DnB uses <strong>snare on beats 2 & 4</strong> (steps 5, 13), NOT beat 3 like trap/dubstep half-time. This is a critical difference. Beat 3 half-time (step 9 only) makes it feel like <strong>slow trap</strong>. DnB's beats 2 & 4 snare creates the classic breakbeat feel while still halving the perceived tempo. Don't confuse DnB half-time with trap half-time—they're rhythmically different despite both being at high BPM.
                  </p>
                </div>

                <!-- Mistake 3 -->
                <div style="padding: var(--space-lg); background: rgba(0, 212, 255, 0.05); border-left: 4px solid var(--accent-cyan); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-sm);">Ignoring Sub-Bass and Reese</h4>
                  <p style="color: var(--text-secondary); line-height: 1.7;">
                    DnB is <strong>defined by its sub-bass</strong>. Without heavy sub-bass or a Reese bassline (detuned sawtooth), DnB drums feel thin and powerless. The sub-bass typically plays a simple pattern (root note on downbeat, maybe 5th or octave movement) that locks with the kick. Many beginners program perfect DnB drums but forget the bass—and the track has no weight. DnB = drums + bass. Both are equally important.
                  </p>
                </div>

              </div>
            </div>

            <!-- WHY THIS MATTERS -->
            <div style="padding: var(--space-xl); background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(179, 102, 255, 0.1)); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Why This Matters</h3>

              <div style="display: grid; gap: var(--space-md);">
                <div style="display: flex; gap: var(--space-sm); align-items: start;">
                  <div style="color: var(--accent-cyan); font-size: 1.5rem; line-height: 1; margin-top: 2px;">01</div>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin: 0;">
                    <strong>Genre Mastery:</strong> DnB is one of the most technically demanding genres to produce. Mastering 174 BPM programming, half-time snare patterns, and syncopated kicks gives you skills that transfer to neurofunk, liquid DnB, jump-up, and jungle. Understanding DnB means understanding tempo manipulation and rhythmic complexity at the highest level.
                  </p>
                </div>
                <div style="display: flex; gap: var(--space-sm); align-items: start;">
                  <div style="color: var(--accent-cyan); font-size: 1.5rem; line-height: 1; margin-top: 2px;">02</div>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin: 0;">
                    <strong>Historical Significance:</strong> The Amen break and breakbeat culture fundamentally changed music production. Understanding how a 6-second drum loop from 1969 became the foundation of jungle, DnB, hip-hop, and countless genres teaches you about sampling, creativity, and the power of recycling musical material. The Amen break is cultural DNA for electronic music.
                  </p>
                </div>
                <div style="display: flex; gap: var(--space-sm); align-items: start;">
                  <div style="color: var(--accent-cyan); font-size: 1.5rem; line-height: 1; margin-top: 2px;">03</div>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin: 0;">
                    <strong>Tempo Perception:</strong> DnB teaches you that <strong>perceived tempo isn't actual tempo</strong>. 174 BPM feels like 87 BPM because of snare placement. This principle—manipulating how listeners perceive rhythm—applies to all production. You can make music feel faster or slower than it actually is through strategic snare and kick placement. This is advanced rhythmic psychology.
                  </p>
                </div>
                <div style="display: flex; gap: var(--space-sm); align-items: start;">
                  <div style="color: var(--accent-cyan); font-size: 1.5rem; line-height: 1; margin-top: 2px;">04</div>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin: 0;">
                    <strong>Energy Control:</strong> DnB gives you tools to create <strong>maximum energy without chaos</strong>. The half-time snare keeps it danceable, the syncopated kicks create movement, and the driving hi-hats provide pulse. This balance between speed and control is essential for any high-energy electronic music production, from footwork to hardcore.
                  </p>
                </div>
              </div>
            </div>

            <!-- WHAT'S NEXT -->
            <div style="border-top: 1px solid var(--border-subtle); padding-top: var(--space-xl);">
              <h3 style="font-size: 1.25rem; margin-bottom: var(--space-md); color: var(--text-primary);">What's Next?</h3>
              <p style="color: var(--text-secondary); line-height: 1.7;">
                After mastering DnB's two-step pattern and understanding breakbeat culture, you'll move on to <strong>Lesson 12</strong> where you'll explore more advanced drum programming techniques and continue building your rhythmic vocabulary.
              </p>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>
            
            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>
          
          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <img src="images/PLAY.png" alt="Play" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <img src="images/STOP.png" alt="Stop" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all" style="display:none;">
              <img src="images/CLEAR.png" alt="Clear" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <!-- PRESET CONTROLS (hidden by default) -->
            <div id="mpl-preset-controls" style="display:none;gap:0.5rem;margin-left:0.5rem;">
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-save">Save</button>
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-load">Load</button>
            </div>

            <div style="margin-left:auto;display:flex;gap:0.75rem;">
              <div id="mpl-seq-prev-lesson-wrap">
                <button class="btn btn-secondary" id="mpl-prev-lesson">
                  <span>&larr; Previous Lesson</span>
                </button>
              </div>
              <div id="mpl-seq-next-lesson-wrap">
                <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                  <span>Next Lesson &rarr;</span>
                </button>
              </div>
            </div>
          </div>

          <!-- TEMPO/SWING CONTROLS (for sandbox mode) -->
          <div id="mpl-advanced-controls" style="display:none;margin-top:1rem;padding:1rem;background:var(--bg-secondary);border-radius:var(--radius-md);gap:1.5rem;flex-wrap:wrap;align-items:center;">
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-tempo-slider" style="font-size:0.85rem;color:var(--text-muted);">Tempo:</label>
              <input type="range" id="mpl-tempo-slider" min="60" max="180" value="120" style="width:100px;">
              <span id="mpl-tempo-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:50px;">120 BPM</span>
            </div>
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-swing-slider" style="font-size:0.85rem;color:var(--text-muted);">Swing:</label>
              <input type="range" id="mpl-swing-slider" min="0" max="100" value="0" style="width:100px;">
              <span id="mpl-swing-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:40px;">0%</span>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

        <!-- FOOTER -->
        <footer class="footer" id="mpl-footer">
          <div>&copy; <span id="mpl-year"></span> Music Producer Lab</div>
          <div><a class="footer-link" id="mpl-footer-overview-link" href="labs.html">Back to overview</a></div>
        </footer>
      </div>
      
      <!-- LESSON ENGINE SCRIPT -->
      <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>

      <!--
        HOW TO USE THIS TEMPLATE:
        
        1. Create a config file (e.g., configs/lesson-drums-5.config.js)
        2. Copy this template to your lesson file (e.g., lesson-drums-5-new.html)
        3. Update the script import at the bottom to point to your config
        
        Example:

<script type="module">
          import { lessonConfig } from './configs/lesson-drums-5.config.js';
          import { initLessonFromConfig } from './lesson-engine.js';
          initLessonFromConfig(lessonConfig);
        </script>
      -->

      
      <script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-11.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>
    <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>
  <script src="theme-registry.js"></script>
  <script src="theme-manager.js"></script>
    <script src="navbar.js"></script>
  </body>
</html>
