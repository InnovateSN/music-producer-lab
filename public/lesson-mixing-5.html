<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson · Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero" style="display: flex; align-items: center; gap: var(--space-3xl);">
          <div class="hero-copy" style="flex: 1; max-width: none;">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
            <div id="mpl-hero-nav-btns" style="margin-top:1rem;display:flex;gap:0.6rem;flex-wrap:wrap;"></div>
          </div>

          <div class="hero-visual" style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <img src="images/mpl_hero_rightside.png" alt="Music Production" style="width: 100%; max-width: 500px; height: auto; object-fit: contain; filter: drop-shadow(0 0 40px rgba(0, 212, 255, 0.3));">
          </div>
          </div>
        </section>

        <!-- EDUCATIONAL CONTENT -->
        <section style="margin-top: var(--space-3xl); margin-bottom: var(--space-3xl);">
          <div class="card" style="padding: var(--space-2xl); background: var(--bg-card); border: 1px solid var(--border-subtle);">

            <!-- INTRODUCTION -->
            <div class="section-eyebrow" style="margin-bottom: var(--space-md);">What You'll Learn</div>
            <h2 style="font-size: 2rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Delay & Time-Based Effects: Adding Rhythm and Texture to Your Mix</h2>

            <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: var(--space-xl);">
              <strong>Delay</strong> repeats your audio signal after a set time interval, creating echoes that add rhythmic interest, width, and depth. Unlike <a href="glossary.html#reverb" style="color: var(--accent-cyan); text-decoration: underline;">reverb</a>, which simulates a continuous space, <a href="glossary.html#delay" style="color: var(--accent-cyan); text-decoration: underline;">delay</a> produces distinct, repeatable echoes that can lock to your song's <a href="glossary.html#tempo" style="color: var(--accent-cyan); text-decoration: underline;">tempo</a>. From the tight slapback of rockabilly vocals to the cascading ping-pong delays of ambient electronica, delay is a fundamental creative tool in every producer's arsenal. In this lesson, you'll master <strong>tempo-synced delays</strong>, <strong>ping-pong stereo effects</strong>, <strong>slapback timing</strong>, <strong>feedback control</strong>, and the warm character of <strong>tape delay</strong> emulations.
            </p>

            <!-- KEY CONCEPTS GRID -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-2xl);">

              <!-- Concept 1: Tempo-Synced Delay -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(255, 90, 61, 0.1), rgba(255, 178, 138, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(255, 90, 61, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/orologio.png" alt="Sync" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-orange); margin: 0;">Tempo-Synced Delay</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Syncing your delay to your project's <a href="glossary.html#bpm" style="color: var(--accent-cyan); text-decoration: underline;">BPM</a> ensures echoes land on musically meaningful subdivisions. A <strong>1/4 note</strong> delay creates rhythmic echoes on each <a href="glossary.html#beat" style="color: var(--accent-cyan); text-decoration: underline;">beat</a>. A <strong>1/8 note</strong> doubles the rhythm. <strong>Dotted 1/8th</strong> creates the classic U2/Edge pattern that fills gaps between notes. Always start with synced delays before experimenting with free-time settings.
                </p>
              </div>

              <!-- Concept 2: Ping-Pong Delay -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(95, 77, 255, 0.1), rgba(138, 155, 255, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(95, 77, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/speakerwave.png" alt="Ping-Pong" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-purple); margin: 0;">Ping-Pong & Stereo Delay</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  <strong>Ping-pong delay</strong> alternates echoes between left and right channels, creating a wide <a href="glossary.html#stereo" style="color: var(--accent-cyan); text-decoration: underline;">stereo</a> image from a <a href="glossary.html#mono" style="color: var(--accent-cyan); text-decoration: underline;">mono</a> source. <strong>Stereo delay</strong> lets you set independent left/right times—try <strong>1/4 note left, dotted 1/8th right</strong> for complex rhythmic textures. These techniques are essential for filling the stereo field without adding more instruments.
                </p>
              </div>

              <!-- Concept 3: Slapback & Tape Delay -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(184, 255, 221, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(0, 212, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/notamusicale.png" alt="Slapback" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-cyan); margin: 0;">Slapback & Tape Character</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  <strong>Slapback delay</strong> uses a very short time (<strong>60-120 ms</strong>) with a single repeat to add thickness and presence without obvious echoes. It's a classic technique for vocals and guitars. <strong>Tape delay</strong> emulates vintage tape machines where each repeat degrades in quality—losing high <a href="glossary.html#frequency" style="color: var(--accent-cyan); text-decoration: underline;">frequencies</a> and gaining warmth. This natural decay sounds more musical than digital repeats.
                </p>
              </div>

              <!-- Concept 4: Feedback Control -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(179, 102, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/gear.png" alt="Feedback" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-magenta); margin: 0;">Feedback & Repeats</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  <strong>Feedback</strong> controls how many times the delayed signal repeats. At <strong>0%</strong>, you get a single echo. At <strong>30-50%</strong>, you get a natural decay of 3-5 repeats. Above <strong>80%</strong>, echoes build on themselves and can create infinite, self-oscillating textures—or dangerous volume buildup. Use <a href="glossary.html#automation" style="color: var(--accent-cyan); text-decoration: underline;">automation</a> to push feedback high for dramatic moments, then pull it back.
                </p>
              </div>

            </div>

            <!-- VISUAL: DELAY TIMING CHART -->
            <div style="padding: var(--space-xl); background: var(--bg-secondary); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Common Delay Times at 120 BPM</h3>

              <div style="margin-bottom: var(--space-xl);">
                <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-md); font-size: 0.95rem;">
                  <img src="images/check_green.png" alt="Good" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;"> Musically synced delay subdivisions
                </h4>
                <div style="display: flex; align-items: center; gap: var(--space-sm); flex-wrap: wrap; padding: var(--space-md); background: rgba(0, 212, 255, 0.05); border-radius: var(--radius-md); border: 1px solid rgba(0, 212, 255, 0.3);">
                  <div style="text-align: center; padding: var(--space-sm) var(--space-md); background: var(--bg-card); border-radius: var(--radius-sm); min-width: 100px;">
                    <div style="font-size: 0.7rem; color: var(--text-muted);">1/4 Note</div>
                    <div style="font-size: 1.1rem; font-weight: 700; color: var(--accent-cyan);">500 ms</div>
                  </div>
                  <div style="color: var(--text-muted);">|</div>
                  <div style="text-align: center; padding: var(--space-sm) var(--space-md); background: var(--bg-card); border-radius: var(--radius-sm); min-width: 100px;">
                    <div style="font-size: 0.7rem; color: var(--text-muted);">1/8 Note</div>
                    <div style="font-size: 1.1rem; font-weight: 700; color: var(--accent-purple);">250 ms</div>
                  </div>
                  <div style="color: var(--text-muted);">|</div>
                  <div style="text-align: center; padding: var(--space-sm) var(--space-md); background: var(--bg-card); border-radius: var(--radius-sm); min-width: 100px;">
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Dotted 1/8</div>
                    <div style="font-size: 1.1rem; font-weight: 700; color: var(--accent-orange);">375 ms</div>
                  </div>
                  <div style="color: var(--text-muted);">|</div>
                  <div style="text-align: center; padding: var(--space-sm) var(--space-md); background: var(--bg-card); border-radius: var(--radius-sm); min-width: 100px;">
                    <div style="font-size: 0.7rem; color: var(--text-muted);">1/16 Note</div>
                    <div style="font-size: 1.1rem; font-weight: 700; color: var(--accent-magenta);">125 ms</div>
                  </div>
                  <div style="color: var(--text-muted);">|</div>
                  <div style="text-align: center; padding: var(--space-sm) var(--space-md); background: var(--bg-card); border-radius: var(--radius-sm); min-width: 100px;">
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Slapback</div>
                    <div style="font-size: 1.1rem; font-weight: 700; color: #10b981;">80 ms</div>
                  </div>
                </div>
              </div>

              <div>
                <h4 style="color: var(--accent-orange); margin-bottom: var(--space-md); font-size: 0.95rem;">
                  <img src="images/X_gray.png" alt="Bad" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;"> Wrong: Un-synced delay clashes with the groove
                </h4>
                <div style="display: flex; align-items: center; gap: var(--space-sm); flex-wrap: wrap; padding: var(--space-md); background: rgba(255, 90, 61, 0.05); border-radius: var(--radius-md); border: 1px solid rgba(255, 90, 61, 0.3);">
                  <div style="text-align: center; padding: var(--space-sm) var(--space-md); background: var(--bg-card); border-radius: var(--radius-sm); min-width: 100px;">
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Random Time</div>
                    <div style="font-size: 1.1rem; font-weight: 700; color: #ef4444;">347 ms!</div>
                  </div>
                  <div style="color: var(--text-muted);">→</div>
                  <div style="text-align: center; padding: var(--space-sm) var(--space-md); background: var(--bg-card); border-radius: var(--radius-sm); min-width: 100px;">
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Echoes land</div>
                    <div style="font-size: 1.1rem; font-weight: 700; color: #ef4444;">Off-beat!</div>
                  </div>
                  <div style="color: var(--text-muted);">→</div>
                  <div style="text-align: center; padding: var(--space-sm) var(--space-md); background: var(--bg-card); border-radius: var(--radius-sm); min-width: 100px;">
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Result</div>
                    <div style="font-size: 1.1rem; font-weight: 700; color: #ef4444;">Sloppy!</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- COMMON MISTAKES -->
            <div style="margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">
                <img src="images/mplalert.png" alt="Warning" style="width: 1.5rem; height: 1.5rem; vertical-align: middle;"> Common Mistakes
              </h3>

              <div style="padding: var(--space-lg); background: rgba(255, 90, 61, 0.05); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md); margin-bottom: var(--space-md);">
                <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm);">Delay and Reverb Competing</h4>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Using heavy <a href="glossary.html#delay" style="color: var(--accent-cyan); text-decoration: underline;">delay</a> and heavy <a href="glossary.html#reverb" style="color: var(--accent-cyan); text-decoration: underline;">reverb</a> on the same sound creates a washy, undefined mess. Choose one as the <strong>primary spatial effect</strong> and use the other sparingly. If a vocal has a long delay, use a short, subtle reverb—or vice versa.
                </p>
              </div>

              <div style="padding: var(--space-lg); background: rgba(95, 77, 255, 0.05); border-left: 4px solid var(--accent-purple); border-radius: var(--radius-md); margin-bottom: var(--space-md);">
                <h4 style="color: var(--accent-purple); margin-bottom: var(--space-sm);">Too Much Feedback Buildup</h4>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  High feedback settings cause echoes to stack up, eating headroom and creating a wall of noise. Keep feedback below <strong>50%</strong> for most uses. If you want dramatic buildup effects, automate the feedback parameter—crank it up for a moment, then cut it off. Always have a <a href="glossary.html#high-pass-filter" style="color: var(--accent-cyan); text-decoration: underline;">high-pass filter</a> on your delay return to prevent low-end mud accumulation.
                </p>
              </div>

              <div style="padding: var(--space-lg); background: rgba(0, 212, 255, 0.05); border-left: 4px solid var(--accent-cyan); border-radius: var(--radius-md);">
                <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-sm);">Not Filtering Delay Returns</h4>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Raw delay repeats contain the full <a href="glossary.html#frequency" style="color: var(--accent-cyan); text-decoration: underline;">frequency</a> spectrum, competing with your dry signal. Add a <a href="glossary.html#low-pass-filter" style="color: var(--accent-cyan); text-decoration: underline;">low-pass filter</a> (around 3-5 kHz) and a high-pass filter (around 200 Hz) to your delay return. This keeps echoes out of the way of the original sound, mimicking how real echoes lose high and low frequencies over distance.
                </p>
              </div>
            </div>

            <!-- WHY THIS MATTERS -->
            <div style="padding: var(--space-xl); background: linear-gradient(135deg, rgba(0, 212, 255, 0.08), rgba(179, 102, 255, 0.08)); border-radius: var(--radius-lg); border: 1px solid rgba(0, 212, 255, 0.15);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">
                <img src="images/idea.png" alt="Why" style="width: 1.5rem; height: 1.5rem; vertical-align: middle;"> Why This Matters
              </h3>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-md);">
                <div style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                  <img src="images/check_green.png" alt="Benefit" style="width: 1.2rem; height: 1.2rem; margin-top: 4px; flex-shrink: 0;">
                  <p style="color: var(--text-secondary); line-height: 1.6;"><strong>Rhythmic Complexity</strong> — Synced delays add rhythmic layers that make simple parts sound intricate and groovy.</p>
                </div>
                <div style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                  <img src="images/check_green.png" alt="Benefit" style="width: 1.2rem; height: 1.2rem; margin-top: 4px; flex-shrink: 0;">
                  <p style="color: var(--text-secondary); line-height: 1.6;"><strong>Stereo Width</strong> — Ping-pong and stereo delays spread a mono source across the full stereo field without phase issues.</p>
                </div>
                <div style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                  <img src="images/check_green.png" alt="Benefit" style="width: 1.2rem; height: 1.2rem; margin-top: 4px; flex-shrink: 0;">
                  <p style="color: var(--text-secondary); line-height: 1.6;"><strong>Vocal Polish</strong> — Subtle slapback thickens vocals naturally, while longer delays fill gaps between phrases.</p>
                </div>
                <div style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                  <img src="images/check_green.png" alt="Benefit" style="width: 1.2rem; height: 1.2rem; margin-top: 4px; flex-shrink: 0;">
                  <p style="color: var(--text-secondary); line-height: 1.6;"><strong>Creative Effects</strong> — Automating delay parameters creates builds, transitions, and ear-catching moments in your arrangement.</p>
                </div>
              </div>
            </div>

          </div>
        </section>

        <!-- THEORY SECTION (populated by JS from config) -->
        <section id="mpl-theory-section" style="margin-bottom: var(--space-2xl);"></section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>
            
            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER CONTAINER (populated by JS) -->
        <section id="mpl-sequencer-container" style="margin-top: var(--space-2xl);"></section>

        <!-- COMPLETION MESSAGE (populated by JS) -->
        <div id="mpl-completion-message" class="completion-message" style="display:none;"></div>


      <!-- SCRIPT IMPORTS -->
      <script type="module">
        import { lessonConfig } from './configs/lesson-mixing-5.config.js';
        import { initLessonFromConfig } from './lesson-engine.js';
        
        // Initialize lesson with config
        if (window.LESSON_CONFIG) {
          initLessonFromConfig(window.LESSON_CONFIG);
        } else {
          initLessonFromConfig(lessonConfig);
        }
      </script>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>
    <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>
  <script src="theme-registry.js"></script>
  <script src="theme-manager.js"></script>
    <script src="navbar.js"></script>
  </body>
</html>
