<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson 6 · Music Theory Fundamentals · Key Signatures & Circle of Fifths | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Understand key signatures and how the circle of fifths organizes all 12 keys. Learn sharps, flats, and relative major/minor relationships." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>
    <main class="main-content container">
      <section class="hero" id="mpl-hero" aria-label="Lesson hero" style="display: flex; align-items: center; gap: var(--space-3xl);">
        <div class="hero-copy" style="flex: 1; max-width: none;">
          <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
          <h1 class="hero-title" id="mpl-hero-title">
            <span id="mpl-hero-title-main">Lesson</span>
            <span id="mpl-hero-title-highlight"></span>
          </h1>
          <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
        </div>
      </section>

      <!-- EDUCATIONAL CONTENT -->
      <section style="margin-top: var(--space-3xl); margin-bottom: var(--space-3xl);">
        <div class="card" style="padding: var(--space-2xl); background: var(--bg-card); border: 1px solid var(--border-subtle);">

          <!-- INTRODUCTION -->
          <div class="section-eyebrow" style="margin-bottom: var(--space-md);">What You'll Learn</div>
          <h2 style="font-size: 2rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Key Signatures & The Circle of Fifths</h2>

          <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: var(--space-xl);">
            <strong>Key signatures</strong> tell you which notes are consistently sharp or flat throughout a piece — they define the key. The <strong>Circle of Fifths</strong> is a visual diagram that organizes all 12 major and minor keys by their relationships. Moving clockwise adds sharps; counterclockwise adds flats. This is the single most important "map" in music theory — it reveals patterns, helps you navigate modulations, find relative keys, and understand why certain chord progressions sound natural. As a producer, the Circle of Fifths helps you choose keys for your tracks and understand harmonic compatibility between samples.
          </p>

          <!-- KEY CONCEPTS GRID -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-xl); margin-bottom: var(--space-2xl);">

            <div style="padding: var(--space-lg); background: var(--bg-secondary); border-left: 4px solid var(--accent-cyan); border-radius: var(--radius-md);">
              <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                <img src="images/notamusicale.png" alt="Sharps" style="width: 32px; height: 32px;">
                <h3 style="margin: 0; font-size: 1.3rem; color: var(--accent-cyan);">Sharp Keys (Clockwise)</h3>
              </div>
              <p style="margin-bottom: var(--space-sm); color: var(--text-muted); font-weight: 600;">F-C-G-D-A-E-B</p>
              <p style="line-height: 1.7; color: var(--text-secondary);">
                Order of sharps: <strong>F-C-G-D-A-E-B</strong> ("Father Charles Goes Down And Ends Battle"). G major = 1# (F#). D major = 2# (F#, C#). A major = 3# (F#, C#, G#). Each fifth up on the circle adds one more sharp.
              </p>
              <p style="margin-top: var(--space-md); font-size: 0.9rem; color: var(--text-dim);">
                <strong>Why it matters:</strong> Knowing the order of sharps lets you instantly identify any sharp key signature.
              </p>
            </div>

            <div style="padding: var(--space-lg); background: var(--bg-secondary); border-left: 4px solid var(--accent-purple); border-radius: var(--radius-md);">
              <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                <img src="images/idea.png" alt="Flats" style="width: 32px; height: 32px;">
                <h3 style="margin: 0; font-size: 1.3rem; color: var(--accent-purple);">Flat Keys (Counter-clockwise)</h3>
              </div>
              <p style="margin-bottom: var(--space-sm); color: var(--text-muted); font-weight: 600;">B-E-A-D-G-C-F</p>
              <p style="line-height: 1.7; color: var(--text-secondary);">
                Order of flats: <strong>B-E-A-D-G-C-F</strong> (reverse of sharps, or "Battle Ends And Down Goes Charles' Father"). F major = 1b (Bb). Bb major = 2b (Bb, Eb). Each fifth down adds one more flat.
              </p>
              <p style="margin-top: var(--space-md); font-size: 0.9rem; color: var(--text-dim);">
                <strong>Why it matters:</strong> Flat keys dominate jazz, soul, R&B, and hip-hop production. Eb, Ab, and Bb are common producer keys.
              </p>
            </div>

            <div style="padding: var(--space-lg); background: var(--bg-secondary); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
              <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                <img src="images/speaker.png" alt="Navigation" style="width: 32px; height: 32px;">
                <h3 style="margin: 0; font-size: 1.3rem; color: var(--accent-orange);">Circle Navigation</h3>
              </div>
              <p style="margin-bottom: var(--space-sm); color: var(--text-muted); font-weight: 600;">Close vs Distant Keys</p>
              <p style="line-height: 1.7; color: var(--text-secondary);">
                Adjacent keys on the circle share all but one note — they are closely related and easy to modulate between. Keys opposite each other are maximally distant and create dramatic, unexpected key changes. The circle maps the entire harmonic territory.
              </p>
              <p style="margin-top: var(--space-md); font-size: 0.9rem; color: var(--text-dim);">
                <strong>Why it matters:</strong> When choosing keys for mashups, medleys, or transitions, adjacent keys on the circle will sound smooth.
              </p>
            </div>

            <div style="padding: var(--space-lg); background: var(--bg-secondary); border-left: 4px solid var(--accent-green); border-radius: var(--radius-md);">
              <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                <img src="images/fulmine.png" alt="Relative" style="width: 32px; height: 32px;">
                <h3 style="margin: 0; font-size: 1.3rem; color: var(--accent-green);">Relative Major/Minor</h3>
              </div>
              <p style="margin-bottom: var(--space-sm); color: var(--text-muted); font-weight: 600;">Inner Circle</p>
              <p style="line-height: 1.7; color: var(--text-secondary);">
                Each major key's relative minor sits on the inner ring, 3 half steps below the major root. They share the exact same key signature. C major / A minor (no sharps/flats). G major / E minor (1 sharp). Same notes, different emotional center.
              </p>
              <p style="margin-top: var(--space-md); font-size: 0.9rem; color: var(--text-dim);">
                <strong>Why it matters:</strong> Songs constantly shift between relative major and minor for emotional contrast. Same key signature = seamless transition.
              </p>
            </div>
          </div>

          <!-- VISUAL: Circle of Fifths Diagram (CSS) -->
          <div style="padding: var(--space-xl); background: rgba(0, 212, 255, 0.05); border: 2px solid var(--border-glow); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
            <h3 style="margin-bottom: var(--space-lg); color: var(--accent-cyan); display: flex; align-items: center; gap: var(--space-sm);">
              <img src="images/idea.png" alt="Diagram" style="width: 28px; height: 28px;">
              The Circle of Fifths — Key Signature Reference
            </h3>

            <!-- Simplified text-based circle representation -->
            <div style="display: flex; justify-content: center; margin-bottom: var(--space-xl);">
              <div style="position: relative; width: 320px; height: 320px;">
                <!-- C at top -->
                <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); text-align: center;">
                  <div style="background: var(--accent-cyan); color: var(--bg-dark); padding: 4px 12px; border-radius: 12px; font-weight: 700; font-size: 0.9rem;">C / Am</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">no #/b</div>
                </div>
                <!-- G -->
                <div style="position: absolute; top: 20px; right: 10px; text-align: center;">
                  <div style="background: var(--accent-cyan); color: var(--bg-dark); padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">G / Em</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">1#</div>
                </div>
                <!-- D -->
                <div style="position: absolute; top: 80px; right: -10px; text-align: center;">
                  <div style="background: var(--accent-cyan); color: var(--bg-dark); padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">D / Bm</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">2#</div>
                </div>
                <!-- A -->
                <div style="position: absolute; top: 150px; right: -15px; text-align: center;">
                  <div style="background: rgba(0, 212, 255, 0.6); color: var(--bg-dark); padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">A / F#m</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">3#</div>
                </div>
                <!-- E -->
                <div style="position: absolute; top: 220px; right: 0; text-align: center;">
                  <div style="background: rgba(0, 212, 255, 0.5); color: var(--bg-dark); padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">E / C#m</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">4#</div>
                </div>
                <!-- B/Cb -->
                <div style="position: absolute; bottom: 20px; right: 30px; text-align: center;">
                  <div style="background: rgba(0, 212, 255, 0.4); color: var(--bg-dark); padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">B / G#m</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">5#</div>
                </div>
                <!-- F#/Gb -->
                <div style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); text-align: center;">
                  <div style="background: var(--accent-orange); color: var(--bg-dark); padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">F#/Gb</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">6#/6b</div>
                </div>
                <!-- Db -->
                <div style="position: absolute; bottom: 20px; left: 10px; text-align: center;">
                  <div style="background: rgba(95, 77, 255, 0.5); color: white; padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">Db / Bbm</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">5b</div>
                </div>
                <!-- Ab -->
                <div style="position: absolute; top: 220px; left: -10px; text-align: center;">
                  <div style="background: rgba(95, 77, 255, 0.55); color: white; padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">Ab / Fm</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">4b</div>
                </div>
                <!-- Eb -->
                <div style="position: absolute; top: 150px; left: -15px; text-align: center;">
                  <div style="background: rgba(95, 77, 255, 0.6); color: white; padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">Eb / Cm</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">3b</div>
                </div>
                <!-- Bb -->
                <div style="position: absolute; top: 80px; left: -10px; text-align: center;">
                  <div style="background: var(--accent-purple); color: white; padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">Bb / Gm</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">2b</div>
                </div>
                <!-- F -->
                <div style="position: absolute; top: 20px; left: 10px; text-align: center;">
                  <div style="background: var(--accent-purple); color: white; padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.85rem;">F / Dm</div>
                  <div style="color: var(--text-dim); font-size: 0.7rem;">1b</div>
                </div>
              </div>
            </div>

            <div style="display: flex; gap: var(--space-lg); flex-wrap: wrap; justify-content: center; margin-bottom: var(--space-md);">
              <div style="display: flex; align-items: center; gap: var(--space-xs);">
                <div style="width: 16px; height: 16px; background: var(--accent-cyan); border-radius: 4px;"></div>
                <span style="color: var(--text-muted); font-size: 0.85rem;">Sharp keys (clockwise)</span>
              </div>
              <div style="display: flex; align-items: center; gap: var(--space-xs);">
                <div style="width: 16px; height: 16px; background: var(--accent-purple); border-radius: 4px;"></div>
                <span style="color: var(--text-muted); font-size: 0.85rem;">Flat keys (counter-clockwise)</span>
              </div>
            </div>

            <div style="padding: var(--space-lg); background: var(--bg-card); border-radius: var(--radius-md);">
              <h4 style="color: var(--text-primary); margin-bottom: var(--space-md);">Quick Key Identification Tricks</h4>
              <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                <strong>For sharp keys:</strong> The last sharp in the key signature is one half step below the key name. If the last sharp is F#, the key is G major.
              </p>
              <p style="color: var(--text-secondary); line-height: 1.7; margin: 0;">
                <strong>For flat keys:</strong> The second-to-last flat IS the key name. If you see Bb and Eb, the key is Bb major. (Exception: F major has only one flat — Bb.)
              </p>
            </div>
          </div>

          <!-- COMMON MISTAKES -->
          <div style="padding: var(--space-xl); background: rgba(255, 102, 102, 0.05); border: 2px solid rgba(255, 102, 102, 0.3); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
            <h3 style="margin-bottom: var(--space-lg); color: var(--accent-orange); display: flex; align-items: center; gap: var(--space-sm);">
              <img src="images/questionmark.png" alt="Mistakes" style="width: 28px; height: 28px;">
              Common Mistakes with Key Signatures
            </h3>

            <div style="display: grid; gap: var(--space-lg);">
              <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                  <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                  Putting Sharps/Flats in Wrong Order
                </h4>
                <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                  You can't have C# and F-natural in a key signature. Sharps always appear in order: F-C-G-D-A-E-B. If you have 3 sharps, they must be F#, C#, G#. You can't skip or rearrange them.
                </p>
                <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                  Fix: Memorize the order ("Father Charles Goes Down And Ends Battle"). Each new sharp follows this exact sequence.
                </p>
              </div>

              <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                  <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                  Confusing Major and Minor Key Signatures
                </h4>
                <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                  Seeing no sharps or flats doesn't mean the piece is in C major — it could be in A minor (the relative minor). The key signature alone doesn't tell you whether the piece is major or minor. You have to listen to the music and look at which note feels like "home."
                </p>
                <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                  Fix: Look at the first and last chords/notes. The piece usually starts and ends on the tonic chord, revealing whether it's major or minor.
                </p>
              </div>

              <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                  <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                  Ignoring Key When Mixing Samples
                </h4>
                <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                  Layering a sample in E major over a beat in G minor will sound terrible because the notes clash. Key detection tools in your <a href="glossary.html#daw" style="color: var(--accent-orange); text-decoration: underline;">DAW</a> can help, but understanding key relationships lets you make informed decisions about which samples work together.
                </p>
                <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                  Fix: Use the Circle of Fifths. Adjacent keys on the circle are compatible. Relative major/minor pairs always work together.
                </p>
              </div>
            </div>
          </div>

          <!-- WHY THIS MATTERS -->
          <div style="padding: var(--space-xl); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-lg);">
            <h3 style="margin-bottom: var(--space-md); color: var(--text-primary); display: flex; align-items: center; gap: var(--space-sm);">
              <img src="images/fulmine.png" alt="Important" style="width: 28px; height: 28px;">
              Why the Circle of Fifths Is a Producer's Best Friend
            </h3>
            <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: var(--space-md);">
              <li style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                <img src="images/mplscudo_check.png" alt="Check" style="width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px;">
                <span style="line-height: 1.7; color: var(--text-secondary);"><strong>Choose Compatible Keys:</strong> When layering samples, loops, or stems, use adjacent keys on the circle for natural-sounding combinations. Keys far apart will clash.</span>
              </li>
              <li style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                <img src="images/mplscudo_check.png" alt="Check" style="width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px;">
                <span style="line-height: 1.7; color: var(--text-secondary);"><strong>Create Smooth Modulations:</strong> Moving to an adjacent key on the circle (C to G, or C to F) sounds natural and seamless. Moving further creates more dramatic key changes.</span>
              </li>
              <li style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                <img src="images/mplscudo_check.png" alt="Check" style="width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px;">
                <span style="line-height: 1.7; color: var(--text-secondary);"><strong>DJ-Friendly Transitions:</strong> DJs use the Circle (Camelot wheel) to mix harmonically. If you produce in keys that are adjacent on the circle, your tracks will mix better in DJ sets.</span>
              </li>
              <li style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                <img src="images/mplscudo_check.png" alt="Check" style="width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px;">
                <span style="line-height: 1.7; color: var(--text-secondary);"><strong>Understand Song Structure:</strong> Verses and choruses often use the same key, while bridges or drops may modulate to a related key on the circle. This knowledge helps you analyze and recreate professional structures.</span>
              </li>
            </ul>

            <div style="margin-top: var(--space-lg); padding: var(--space-lg); background: var(--bg-card); border-radius: var(--radius-md);">
              <p style="color: var(--accent-purple); font-weight: 600; margin-bottom: var(--space-sm);">What's Next?</p>
              <p style="color: var(--text-secondary); line-height: 1.7;">
                In <strong>Lesson 7: Chord Construction</strong>, you'll learn how to build chords by stacking intervals. You'll master triads (major, minor, diminished, augmented) and seventh chords — the building blocks of every chord progression.
              </p>
            </div>
          </div>

        </div>
      </section>

      <section class="theory-content" id="mpl-theory-section" style="margin-top: var(--space-2xl); margin-bottom: var(--space-2xl);"></section>
      <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);"></section>
      <section class="learning-objectives-section" id="mpl-learning-objectives-section" style="margin-top: var(--space-2xl);"></section>
      <section style="margin-top: var(--space-2xl); margin-bottom: var(--space-2xl);">
        <div style="display: flex; gap: var(--space-md); justify-content: space-between; flex-wrap: wrap;">
          <a href="lesson-theory-5.html" class="btn btn-secondary">&larr; Previous Lesson</a>
          <a href="lesson-theory-7.html" class="btn btn-primary">Next Lesson: Chord Construction &rarr;</a>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>

    <script type="module">
      import { lessonConfig } from './configs/lesson-theory-6.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';
      initLessonFromConfig(lessonConfig);
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
  <script src="theme-registry.js"></script>
  <script src="theme-manager.js"></script>
    <script src="navbar.js"></script>
  </body>
</html>
