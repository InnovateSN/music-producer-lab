<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson 5 | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero">
          <div class="hero-copy">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
          </div>

          <aside class="hero-visual" aria-hidden="true">
            <div class="hero-visual-header">
              <div class="hero-visual-title">Lesson 5</div>
              <div class="hero-visual-pill">Drum basics</div>
            </div>
            <div class="hero-visual-grid">
              <div class="hero-visual-main">
                <div class="hero-visual-main-title"><span>1-bar loop</span> · 120 BPM</div>
                <div class="hero-visual-waves">
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                  <div class="hero-visual-wave"></div>
                </div>
                <div class="hero-visual-metrics">
                  <div class="hero-visual-metric">
                    <span>Structure</span>
                    <strong>Fills & Variations</strong>
                  </div>
                  <div class="hero-visual-metric">
                    <span>Time</span>
                    <strong>10–15 min</strong>
                  </div>
                </div>
              </div>
              <div class="hero-visual-side-card">
                <div class="hero-visual-side-label">Goal</div>
                <div class="hero-visual-pill-list">
                  <div class="hero-visual-pill-tag">Learn drum fills</div>
                  <div class="hero-visual-pill-tag">Add transitions</div>
                </div>
                <div class="hero-visual-footer">
                  <span>Works in any DAW</span>
                  <span>Ableton · FL · Logic · others</span>
                </div>
              </div>
            </div>
          </aside>
        </section>

        <!-- THEORY CONTENT SECTION -->
        <section class="theory-section" style="margin-top: var(--space-2xl); margin-bottom: var(--space-2xl);">
          <div class="section-eyebrow">Theory</div>
          <h2 class="section-title">Drum Fills: Adding Variation and Signaling Transitions</h2>
          <p class="section-body" style="margin-bottom: var(--space-xl);">
            In Lessons 1–4 you built a solid <a href="glossary.html#groove" style="color: var(--accent-cyan); text-decoration: underline;">groove</a>: <a href="glossary.html#kick-drum" style="color: var(--accent-cyan); text-decoration: underline;">Kick</a> on every <a href="glossary.html#beat" style="color: var(--accent-cyan); text-decoration: underline;">beat</a> (the foundation), <a href="glossary.html#snare-drum" style="color: var(--accent-cyan); text-decoration: underline;">Snare</a> on the 2nd and 4th beats (the <a href="glossary.html#backbeat" style="color: var(--accent-cyan); text-decoration: underline;">backbeat</a>), and <a href="glossary.html#hi-hat" style="color: var(--accent-cyan); text-decoration: underline;">Hi-hats</a> creating steady motion with <a href="glossary.html#subdivisions" style="color: var(--accent-cyan); text-decoration: underline;">subdivisions</a>. Now that <a href="glossary.html#loop" style="color: var(--accent-cyan); text-decoration: underline;">loop</a> works, and it could repeat forever. But <strong>real music doesn't just repeat the same pattern endlessly</strong>. Producers add small changes to create interest and signal that something new is about to happen. That's where <strong>drum fills</strong> come in.
          </p>

          <!-- Theory Cards Grid -->
          <div style="display: grid; gap: var(--space-lg); margin-bottom: var(--space-xl);">

            <!-- Card: What is a drum fill -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What is a drum fill?</h3>
              <p class="section-body">
                A <strong>drum fill</strong> is a short break in the regular pattern, usually placed at the end of a phrase or <a href="glossary.html#bar" style="color: var(--accent-cyan); text-decoration: underline;">bar</a>, that creates tension and signals a transition. Think of it like a drummer "filling in" the space before the next section starts.
              </p>
              <p class="section-body">
                In most music you hear, the drums will play a steady pattern for several bars, then right before a new section (like a chorus or breakdown), you'll hear something different—a quick roll, extra hits, or a change in rhythm. That's a fill.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                Fills make the difference between a loop that feels robotic and a loop that feels like it's breathing and evolving. Even a tiny fill at the end of one bar makes the <a href="glossary.html#groove" style="color: var(--accent-cyan); text-decoration: underline;">groove</a> feel more human and more musical.
              </p>
            </div>

            <!-- Card: Why fills matter -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Why fills are essential in production</h3>
              <p class="section-body">
                Without fills, your beat can feel too static. Fills serve multiple purposes:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Signal transitions:</strong> They tell the listener "something is about to change"</li>
                <li><strong>Create anticipation:</strong> The brief break in the pattern builds tension</li>
                <li><strong>Add human feel:</strong> Even programmed drums sound more natural with fills</li>
                <li><strong>Prevent boredom:</strong> Small variations keep the loop interesting</li>
              </ul>
              <p class="section-body" style="margin-bottom: 0;">
                In dance music, a fill at the end of every 4th or 8th bar is extremely common. It's one of those subtle details that separates amateur loops from professional-sounding tracks.
              </p>
            </div>

            <!-- Card: The simplest fill -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(255,90,61,0.08), rgba(255,178,138,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">The simplest fill: breaking the pattern in the 4th beat</h3>
              <p class="section-body">
                The fill in this lesson uses a smart, beginner-friendly approach:
              </p>
              <ol class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Keep the groove solid in beats 1–3</strong> (let the listener lock into the pattern)</li>
                <li><strong>Break the pattern in the 4th beat</strong> (create a moment of surprise)</li>
                <li><strong>Stop the hi-hats before the fill</strong> (make space for the kick/snare to shine)</li>
                <li><strong>Add extra kick and snare hits</strong> (create forward momentum into the loop restart)</li>
              </ol>
              <p class="section-body" style="margin-bottom: 0;">
                This creates a small "pickup" moment that leads your ear back to the 1st beat of the next bar. It's like a mini drum roll that says "here we go again!"
              </p>
            </div>

            <!-- Card: What we're changing -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(255,90,61,0.08), rgba(255,178,138,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What we're changing in this lesson's pattern</h3>
              <p class="section-body">
                Starting from your Lesson 4 groove, we make these specific changes:
              </p>
              <div style="background: rgba(0,0,0,0.3); padding: var(--space-md); border-radius: 8px; margin: var(--space-md) 0;">
                <p class="section-body" style="margin-bottom: var(--space-sm);"><strong style="color: #ff8a65;">Kick pattern:</strong></p>
                <ul class="section-body" style="margin-left: var(--space-md);">
                  <li><strong>Before:</strong> Steps 1, 5, 9, 13 (four on the floor)</li>
                  <li><strong>After:</strong> Steps 1, 5, 9, 13, <strong style="color: #ffcc00;">15</strong> (add extra kick on step 15)</li>
                  <li><strong>Why:</strong> The extra kick creates a double-hit before the loop restarts</li>
                </ul>

                <p class="section-body" style="margin-top: var(--space-md); margin-bottom: var(--space-sm);"><strong style="color: #8a9bff;">Snare pattern:</strong></p>
                <ul class="section-body" style="margin-left: var(--space-md);">
                  <li><strong>Before:</strong> Steps 5, 13 (backbeat on 2nd and 4th beats)</li>
                  <li><strong>After:</strong> Steps 5, 13, <strong style="color: #ffcc00;">16</strong> (add final snare on step 16)</li>
                  <li><strong>Why:</strong> The final snare hit caps off the fill and leads perfectly back to beat 1</li>
                </ul>

                <p class="section-body" style="margin-top: var(--space-md); margin-bottom: var(--space-sm);"><strong style="color: #00d4ff;">Hi-hat pattern:</strong></p>
                <ul class="section-body" style="margin-left: var(--space-md); margin-bottom: 0;">
                  <li><strong>Before:</strong> Steps 1, 3, 5, 7, 8, 9, 11, 13, 15 (eighth notes + 16th note on step 8)</li>
                  <li><strong>After:</strong> Steps 1, 3, 5, 7, 9, 11 <strong style="color: #ffcc00;">(stop at step 11)</strong></li>
                  <li><strong>Why:</strong> Stopping the hi-hats creates silence that makes the kick/snare fill pop</li>
                </ul>
              </div>
              <p class="section-body" style="margin-bottom: 0;">
                Notice how the fill works by <strong>removing</strong> the hi-hats and <strong>adding</strong> kick/snare hits. This contrast is what makes it effective.
              </p>
            </div>

            <!-- Card: Visual of the fill pattern -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0,212,255,0.08), rgba(184,255,221,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Visual: The complete pattern with fill</h3>
              <p class="section-body" style="margin-bottom: var(--space-md);">
                Here's the full pattern showing the fill zone (4th beat):
              </p>

              <div style="background: rgba(0,0,0,0.3); padding: var(--space-md); border-radius: 8px; margin-bottom: var(--space-sm);">
                <div class="pattern-row-visual">
                  <span class="instrument-label" style="color: #ff8a65;">Kick:</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ff5a3d,#ffb28a);">1</span>
                  <span class="step-off">2</span>
                  <span class="step-off">3</span>
                  <span class="step-off">4</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ff5a3d,#ffb28a);">5</span>
                  <span class="step-off">6</span>
                  <span class="step-off">7</span>
                  <span class="step-off">8</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ff5a3d,#ffb28a);">9</span>
                  <span class="step-off">10</span>
                  <span class="step-off">11</span>
                  <span class="step-off">12</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ff5a3d,#ffb28a);">13</span>
                  <span class="step-off">14</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ffcc00,#ffe680); border: 2px solid #ffcc00;">15</span>
                  <span class="step-off">16</span>
                </div>

                <div class="pattern-row-visual">
                  <span class="instrument-label" style="color: #8a9bff;">Snare:</span>
                  <span class="step-off">1</span>
                  <span class="step-off">2</span>
                  <span class="step-off">3</span>
                  <span class="step-off">4</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#5f4dff,#8a9bff);">5</span>
                  <span class="step-off">6</span>
                  <span class="step-off">7</span>
                  <span class="step-off">8</span>
                  <span class="step-off">9</span>
                  <span class="step-off">10</span>
                  <span class="step-off">11</span>
                  <span class="step-off">12</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#5f4dff,#8a9bff);">13</span>
                  <span class="step-off">14</span>
                  <span class="step-off">15</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#ffcc00,#ffe680); border: 2px solid #ffcc00;">16</span>
                </div>

                <div class="pattern-row-visual">
                  <span class="instrument-label" style="color: #00d4ff;">Hi-Hat:</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">1</span>
                  <span class="step-off">2</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">3</span>
                  <span class="step-off">4</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">5</span>
                  <span class="step-off">6</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">7</span>
                  <span class="step-off">8</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">9</span>
                  <span class="step-off">10</span>
                  <span class="step-on" style="background: linear-gradient(135deg,#00d4ff,#b8ffdd);">11</span>
                  <span class="step-off" style="background: rgba(255,90,61,0.1); border: 1px dashed rgba(255,90,61,0.4);">12</span>
                  <span class="step-off" style="background: rgba(255,90,61,0.1); border: 1px dashed rgba(255,90,61,0.4);">13</span>
                  <span class="step-off" style="background: rgba(255,90,61,0.1); border: 1px dashed rgba(255,90,61,0.4);">14</span>
                  <span class="step-off" style="background: rgba(255,90,61,0.1); border: 1px dashed rgba(255,90,61,0.4);">15</span>
                  <span class="step-off" style="background: rgba(255,90,61,0.1); border: 1px dashed rgba(255,90,61,0.4);">16</span>
                </div>

                <div style="margin-top: var(--space-sm); color: rgba(255,255,255,0.6); text-align: center; font-size: 0.9em;">
                  ↑ Gold highlights = fill zone (steps 12-16). Hi-hats stop to create space for the fill.
                </div>
              </div>
            </div>

            <!-- Card: Understanding the fill zone -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Understanding the "fill zone" (steps 12-16)</h3>
              <p class="section-body">
                The 4th beat contains four <a href="glossary.html#sixteenth-notes" style="color: var(--accent-cyan); text-decoration: underline;">sixteenth-note</a> positions: steps 13, 14, 15, and 16.
              </p>
              <p class="section-body">
                In this pattern:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Step 13:</strong> Regular kick (main 4th beat)</li>
                <li><strong>Step 14:</strong> Empty (creates space)</li>
                <li><strong>Step 15:</strong> Extra kick (the fill starts to build)</li>
                <li><strong>Step 16:</strong> Snare hit (caps the fill and leads back to beat 1)</li>
              </ul>
              <p class="section-body">
                Meanwhile, the hi-hats <strong>stop after step 11</strong>, creating silence in the fill zone. This silence is crucial—it makes the kick-snare fill much more noticeable and impactful.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                When you listen to the pattern, you'll hear the steady groove for three beats, then a quick "kick-kick-snare" moment before it loops back. That brief change is enough to make the whole pattern feel more dynamic.
              </p>
            </div>

            <!-- Card: What to listen for -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What you should listen for when you press play</h3>
              <p class="section-body">
                First, program the pattern without the fill (keep the hi-hats going all the way through). Press play and let your ear get used to that steady groove.
              </p>
              <p class="section-body">
                Then add the fill (stop hi-hats at step 11, add kick on 15, add snare on 16) and press play again. Listen for these changes:
              </p>
              <ol class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>A sense of anticipation before the loop restarts</strong><br>
                  The fill creates a "here we go again" feeling.</li>
                <li><strong>The silence in the hi-hats makes the fill stand out</strong><br>
                  Without the constant "tss tss tss," the kick-snare hits feel more powerful.</li>
                <li><strong>The pattern feels less robotic</strong><br>
                  Even a tiny variation makes the loop feel more intentional and musical.</li>
              </ol>
              <p class="section-body" style="margin-bottom: 0;">
                If you don't hear a big difference at first, that's normal. Fills are often subtle. But once you start noticing them, you'll hear them everywhere in professional production.
              </p>
            </div>

            <!-- Card: Common mistakes -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Common mistakes and how to fix them</h3>
              <p class="section-body">
                <strong>Mistake 1: Adding too many hits in the fill.</strong><br>
                More isn't always better. This lesson uses a minimal fill (just 2 extra hits) because it's clean and effective. Overloading the fill can make it sound messy instead of exciting.
              </p>
              <p class="section-body">
                <strong>Mistake 2: Not stopping the hi-hats.</strong><br>
                If you keep the hi-hats going through the fill, the fill gets buried in the groove and loses impact. The silence is part of the effect.
              </p>
              <p class="section-body">
                <strong>Mistake 3: Placing the fill in the wrong spot.</strong><br>
                Fills work best at phrase endings. In a one-bar loop, the 4th beat is the natural place. If you put the fill in the 2nd or 3rd beat, it interrupts the groove instead of enhancing it.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                <strong>Mistake 4: Making the fill too loud.</strong><br>
                In real production, you might lower the volume of fill hits slightly so they don't overpower the groove. For now, focus on placement—volume adjustments come later.
              </p>
            </div>

            <!-- Card: Why this matters -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(95,77,255,0.08), rgba(138,155,255,0.08));">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Why fills are a turning point in your production skills</h3>
              <p class="section-body">
                Learning to add fills is where you start thinking like an arranger, not just a pattern programmer. <strong>Fills teach you that variation is just as important as repetition.</strong>
              </p>
              <p class="section-body">
                Once you understand fills, you can start asking better questions:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li>Where should the fill happen? (Every 4 bars? Every 8 bars?)</li>
                <li>How big should the fill be? (Subtle or dramatic?)</li>
                <li>What should change in the fill? (Just drums? Or other elements too?)</li>
              </ul>
              <p class="section-body" style="margin-bottom: 0;">
                This lesson gives you the simplest possible fill: one bar, minimal changes, clear effect. From here, you can experiment with longer fills, different rhythms, and more complex variations. But the principle stays the same: <strong>break the pattern at the right moment to create anticipation and keep the listener engaged</strong>.
              </p>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>

            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>

          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:4px;"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <div style="margin-left:auto;display:flex;gap:0.75rem;">
              <div id="mpl-seq-prev-lesson-wrap">
                <button class="btn btn-secondary" id="mpl-prev-lesson">
                  <span>&larr; Previous Lesson</span>
                </button>
              </div>
              <div id="mpl-seq-next-lesson-wrap">
                <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                  <span>Next Lesson &rarr;</span>
                </button>
              </div>
            </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>

    <!-- MODULAR LESSON ENGINE -->

<script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-5.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    <script src="navbar.js"></script>
  </body>
</html>
