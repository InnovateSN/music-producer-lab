<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson · Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero" style="display: flex; align-items: center; gap: var(--space-3xl);">
          <div class="hero-copy" style="flex: 1; max-width: none;">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
            <div id="mpl-hero-nav-btns" style="margin-top:1rem;display:flex;gap:0.6rem;flex-wrap:wrap;"></div>
          </div>

          <div class="hero-visual" style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <img src="images/mpl_hero_rightside.png" alt="Music Production" style="width: 100%; max-width: 500px; height: auto; object-fit: contain; filter: drop-shadow(0 0 40px rgba(0, 212, 255, 0.3));">
          </div>
          </div>
        </section>

        <!-- EDUCATIONAL CONTENT -->
        <section style="margin-top: var(--space-3xl); margin-bottom: var(--space-3xl);">
          <div class="card" style="padding: var(--space-2xl); background: var(--bg-card); border: 1px solid var(--border-subtle);">

            <!-- INTRODUCTION -->
            <div class="section-eyebrow" style="margin-bottom: var(--space-md);">What You'll Learn</div>
            <h2 style="font-size: 2rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Drum Fills: Creating Movement & Excitement</h2>

            <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: var(--space-xl);">
              A <a href="glossary.html#fill" style="color: var(--accent-cyan); text-decoration: underline;">drum fill</a> is a short rhythmic phrase that "breaks" the regular pattern to signal a transition or create excitement. Fills are what make drum patterns feel <strong>alive and dynamic</strong> instead of mechanical and repetitive. They typically appear at the end of a musical phrase (often every 4 or 8 bars) to create <strong>tension before the pattern restarts</strong>. In this lesson, you'll learn to create a simple fill at the end of a 1-bar loop by adding extra <a href="glossary.html#kick" style="color: var(--accent-cyan); text-decoration: underline;">kick</a> and <a href="glossary.html#snare" style="color: var(--accent-cyan); text-decoration: underline;">snare</a> hits while removing the <a href="glossary.html#hihat" style="color: var(--accent-cyan); text-decoration: underline;">hi-hats</a> to make space.
            </p>

            <!-- KEY CONCEPTS GRID -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-2xl);">

              <!-- Concept 1: What is a Fill -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(255, 90, 61, 0.1), rgba(255, 178, 138, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(255, 90, 61, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/drum.png" alt="Drum" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-orange); margin: 0;">What is a Fill?</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  A fill is a <strong>rhythmic deviation</strong> from the main groove. Instead of repeating the same pattern, you add extra hits or change the rhythm for 1-2 beats to create movement. Fills <strong>signal transitions</strong>—like saying "something new is coming!" They're most commonly placed at the end of 4 or 8 bars.
                </p>
              </div>

              <!-- Concept 2: Tension & Release -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(95, 77, 255, 0.1), rgba(138, 155, 255, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(95, 77, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/clock_anticlockwise.png" alt="Clock" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-purple); margin: 0;">Tension & Release</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Fills create <strong>musical tension</strong> by breaking the established pattern. This tension makes the listener anticipate what comes next. When the groove restarts after the fill, it creates a satisfying <strong>release</strong>. This tension-and-release cycle is what makes music feel engaging and prevents monotony.
                </p>
              </div>

              <!-- Concept 3: Space & Silence -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(184, 255, 221, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(0, 212, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/speakeroff.png" alt="Silence" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-cyan); margin: 0;">Space & Silence</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Effective fills often require <strong>removing elements</strong> to create space. In this lesson, we stop the hi-hats during the fill so the kick/snare pattern can "breathe" and be heard clearly. Silence is just as important as sound—it makes the fill <strong>pop</strong> and prevents clutter.
                </p>
              </div>

              <!-- Concept 4: Fill Placement -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(179, 102, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/loop.png" alt="Loop" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-magenta); margin: 0;">Fill Placement</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Fills typically appear at <strong>phrase boundaries</strong>—every 4, 8, or 16 bars depending on the song structure. In a 1-bar loop (like this lesson), the fill happens in the last beat (beat 4) so it feels like the loop is "breathing" before restarting. Proper placement makes fills feel natural, not random.
                </p>
              </div>

            </div>

            <!-- VISUAL PATTERN COMPARISON -->
            <div style="padding: var(--space-xl); background: var(--bg-secondary); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Before & After: Adding a Fill</h3>

              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-xl); margin-bottom: var(--space-lg);">

                <!-- BEFORE: No Fill -->
                <div>
                  <h4 style="color: var(--text-muted); margin-bottom: var(--space-md); text-align: center;">❌ Before: Repetitive Loop</h4>
                  <div style="background: rgba(255, 90, 61, 0.05); padding: var(--space-md); border-radius: var(--radius-md); border: 1px solid var(--border-subtle);">

                    <!-- Kick row -->
                    <div style="margin-bottom: var(--space-sm);">
                      <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Kick</div>
                      <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                      </div>
                    </div>

                    <!-- Snare row -->
                    <div style="margin-bottom: var(--space-sm);">
                      <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Snare</div>
                      <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                      </div>
                    </div>

                    <!-- Hi-Hat row -->
                    <div>
                      <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Hi-Hat</div>
                      <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                      </div>
                    </div>

                  </div>
                  <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: var(--space-sm); text-align: center;">Loop repeats mechanically without variation</p>
                </div>

                <!-- AFTER: With Fill -->
                <div>
                  <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-md); text-align: center;">✓ After: Dynamic Fill in Beat 4</h4>
                  <div style="background: rgba(0, 212, 255, 0.05); padding: var(--space-md); border-radius: var(--radius-md); border: 1px solid var(--accent-cyan);">

                    <!-- Kick row with fill -->
                    <div style="margin-bottom: var(--space-sm);">
                      <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Kick</div>
                      <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px; box-shadow: 0 0 12px rgba(255, 90, 61, 0.6);"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#ff5a3d,#ffb28a); height: 24px; border-radius: 2px; box-shadow: 0 0 12px rgba(255, 90, 61, 0.6);"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                      </div>
                    </div>

                    <!-- Snare row with fill -->
                    <div style="margin-bottom: var(--space-sm);">
                      <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Snare</div>
                      <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px; box-shadow: 0 0 12px rgba(95, 77, 255, 0.6);"></div>
                      </div>
                    </div>

                    <!-- Hi-Hat row with space for fill -->
                    <div>
                      <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Hi-Hat</div>
                      <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#00d4ff,#b8ffdd); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3; border: 1px dashed var(--accent-orange);"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3; border: 1px dashed var(--accent-orange);"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3; border: 1px dashed var(--accent-orange);"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3; border: 1px dashed var(--accent-orange);"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3; border: 1px dashed var(--accent-orange);"></div>
                      </div>
                    </div>

                  </div>
                  <p style="font-size: 0.9rem; color: var(--accent-cyan); margin-top: var(--space-sm); text-align: center;">Fill creates tension, hi-hat space makes it shine</p>
                </div>

              </div>

              <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                <strong>Key difference:</strong> The "After" version adds extra kick hits on steps <strong>13 and 15</strong> (highlighted with glow) and a final snare hit on <strong>step 16</strong>. More importantly, the hi-hats <strong>stop at step 11</strong> (dashed boxes show the empty space), creating a "fill zone" in beat 4 where the kick/snare pattern can breathe.
              </p>

              <p style="color: var(--text-muted); font-size: 0.9rem; font-style: italic;">
                Pro tip: Listen to how the silence in the hi-hats makes the fill feel more powerful. Space is just as important as the notes you play.
              </p>
            </div>

            <!-- COMMON MISTAKES -->
            <div style="margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Common Mistakes to Avoid</h3>

              <div style="display: grid; gap: var(--space-md);">

                <!-- Mistake 1 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Overusing Fills (Too Frequent)
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Beginners often add fills every bar or even every 2 beats. This makes the pattern feel <strong>chaotic and exhausting</strong> rather than exciting. Fills lose their impact when overused—they become the norm instead of special moments.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Use fills <strong>sparingly</strong>—typically every 4, 8, or 16 bars. Let the groove establish itself first, then break it at key moments. Less is more.
                  </p>
                </div>

                <!-- Mistake 2 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Filling Too Much Space (Cluttered Fill)
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Some beginners cram too many hits into the fill—adding kicks, snares, and hi-hats all at once. This creates <strong>rhythmic clutter</strong> where the fill loses definition and sounds messy instead of intentional.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Keep fills <strong>simple and focused</strong>. In this lesson, the fill uses only kick and snare—just 3 extra hits total. Simplicity creates clarity and impact.
                  </p>
                </div>

                <!-- Mistake 3 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Not Creating Space for the Fill
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Beginners often add fill hits without removing anything else. When the hi-hats continue playing through the fill, the fill gets buried and sounds weak. The pattern becomes cluttered instead of dynamic.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: <strong>Remove elements to make space</strong> for the fill. In this lesson, stopping the hi-hats in beat 4 creates a "fill zone" where kick/snare hits shine. Silence amplifies the fill.
                  </p>
                </div>

              </div>
            </div>

            <!-- WHY THIS MATTERS -->
            <div style="padding: var(--space-xl); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-lg);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Why Drum Fills Matter</h3>

              <div style="display: grid; gap: var(--space-md); color: var(--text-secondary); line-height: 1.8;">
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">1.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Prevent Monotony:</strong> Fills break up repetitive patterns and keep the listener engaged. Without variation, even great grooves become boring after 30 seconds.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">2.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Signal Transitions:</strong> Fills act as musical "punctuation" that tells the listener when a new section is coming—like going from verse to chorus.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">3.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Add Excitement & Energy:</strong> Well-placed fills create tension and release cycles that make music feel alive and dynamic, not mechanical.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">4.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Express Musical Personality:</strong> Fills are where drummers show creativity. The same groove can have completely different feels depending on the fill choices.</p>
                </div>
              </div>
            </div>

            <!-- WHAT'S NEXT -->
            <div style="margin-top: var(--space-xl); padding: var(--space-lg); background: var(--bg-secondary); border-radius: var(--radius-md); border-left: 4px solid var(--accent-cyan);">
              <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-sm);">What's Next?</h4>
              <p style="color: var(--text-secondary); line-height: 1.7; margin: 0;">
                Now that you understand fills, you'll learn more advanced concepts like <strong>ghost notes</strong> (soft snare hits that add groove), <strong>swing and shuffle</strong> (timing variations), and <strong>velocity dynamics</strong> (volume control for expressive playing). Each lesson builds on your growing drum vocabulary.
              </p>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>
            
            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>
          
          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <img src="images/PLAY.png" alt="Play" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <img src="images/STOP.png" alt="Stop" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all" style="display:none;">
              <img src="images/CLEAR.png" alt="Clear" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <!-- PRESET CONTROLS (hidden by default) -->
            <div id="mpl-preset-controls" style="display:none;gap:0.5rem;margin-left:0.5rem;">
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-save">Save</button>
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-load">Load</button>
            </div>

            <div style="margin-left:auto;display:flex;gap:0.75rem;">
              <div id="mpl-seq-prev-lesson-wrap">
                <button class="btn btn-secondary" id="mpl-prev-lesson">
                  <span>&larr; Previous Lesson</span>
                </button>
              </div>
              <div id="mpl-seq-next-lesson-wrap">
                <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                  <span>Next Lesson &rarr;</span>
                </button>
              </div>
            </div>
          </div>

          <!-- TEMPO/SWING CONTROLS (for sandbox mode) -->
          <div id="mpl-advanced-controls" style="display:none;margin-top:1rem;padding:1rem;background:var(--bg-secondary);border-radius:var(--radius-md);gap:1.5rem;flex-wrap:wrap;align-items:center;">
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-tempo-slider" style="font-size:0.85rem;color:var(--text-muted);">Tempo:</label>
              <input type="range" id="mpl-tempo-slider" min="60" max="180" value="120" style="width:100px;">
              <span id="mpl-tempo-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:50px;">120 BPM</span>
            </div>
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-swing-slider" style="font-size:0.85rem;color:var(--text-muted);">Swing:</label>
              <input type="range" id="mpl-swing-slider" min="0" max="100" value="0" style="width:100px;">
              <span id="mpl-swing-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:40px;">0%</span>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

        <!-- FOOTER -->
        <footer class="footer" id="mpl-footer">
          <div>&copy; <span id="mpl-year"></span> Music Producer Lab</div>
          <div><a class="footer-link" id="mpl-footer-overview-link" href="labs.html">Back to overview</a></div>
        </footer>
      </div>
      
      <!-- LESSON ENGINE SCRIPT -->
      <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>

      <!--
        HOW TO USE THIS TEMPLATE:
        
        1. Create a config file (e.g., configs/lesson-drums-5.config.js)
        2. Copy this template to your lesson file (e.g., lesson-drums-5-new.html)
        3. Update the script import at the bottom to point to your config
        
        Example:

<script type="module">
          import { lessonConfig } from './configs/lesson-drums-5.config.js';
          import { initLessonFromConfig } from './lesson-engine.js';
          initLessonFromConfig(lessonConfig);
        </script>
      -->

      
      <script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-5.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>
    <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>
  <script src="theme-registry.js"></script>
  <script src="theme-manager.js"></script>
    <script src="navbar.js"></script>
  </body>
</html>
