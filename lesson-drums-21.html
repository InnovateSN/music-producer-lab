<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson 21 - Velocity Playground | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Explore velocity control with practical interactive examples." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero">
          <div class="hero-copy">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
          </div>
        </section>

        <!-- INTERACTIVE GUIDE SECTION -->
        <section class="theory-section" style="margin-top: var(--space-2xl); margin-bottom: var(--space-2xl);">
          <div class="section-eyebrow">Interactive Guide</div>
          <h2 class="section-title">How the Velocity Slider Works</h2>

          <!-- Velocity Ranges Visual Guide -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-xl);">

            <!-- Range: Ghost Notes -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0, 240, 255, 0.05), rgba(138, 43, 226, 0.05));">
              <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-sm);">
                <div style="width: 16px; height: 40px; background: linear-gradient(to top, transparent 70%, rgba(0,240,255,0.3)); border-radius: 3px; border: 1px solid rgba(0,240,255,0.3);"></div>
                <h3 style="font-size: var(--font-size-lg); margin: 0; color: var(--accent-cyan);">Ghost Notes</h3>
              </div>
              <div style="font-family: var(--font-mono); font-size: 0.85rem; color: var(--text-muted); margin-bottom: var(--space-xs);">
                Velocity: 0-40
              </div>
              <p class="section-body" style="font-size: 0.9rem; margin: 0;">
                Very soft notes, almost whispered. Add texture without dominating the mix. Perfect between main beats.
              </p>
            </div>

            <!-- Range: Normal -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0, 240, 255, 0.05), rgba(138, 43, 226, 0.05));">
              <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-sm);">
                <div style="width: 16px; height: 40px; background: linear-gradient(to top, transparent 30%, rgba(0,240,255,0.5)); border-radius: 3px; border: 1px solid rgba(0,240,255,0.3);"></div>
                <h3 style="font-size: var(--font-size-lg); margin: 0; color: var(--accent-cyan);">Normal</h3>
              </div>
              <div style="font-family: var(--font-mono); font-size: 0.85rem; color: var(--text-muted); margin-bottom: var(--space-xs);">
                Velocity: 41-80
              </div>
              <p class="section-body" style="font-size: 0.9rem; margin: 0;">
                Standard velocity for most notes. Clearly audible but balanced. Use this for the basic groove.
              </p>
            </div>

            <!-- Range: Accents -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0, 240, 255, 0.05), rgba(138, 43, 226, 0.05));">
              <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-sm);">
                <div style="width: 16px; height: 40px; background: linear-gradient(to top, transparent 10%, rgba(0,240,255,0.7)); border-radius: 3px; border: 1px solid rgba(0,240,255,0.3);"></div>
                <h3 style="font-size: var(--font-size-lg); margin: 0; color: var(--accent-cyan);">Accents</h3>
              </div>
              <div style="font-family: var(--font-mono); font-size: 0.85rem; color: var(--text-muted); margin-bottom: var(--space-xs);">
                Velocity: 81-120
              </div>
              <p class="section-body" style="font-size: 0.9rem; margin: 0;">
                Emphasized notes that define the rhythm. Loud and clear. Ideal for snare on beats 2 and 4 (backbeat).
              </p>
            </div>

            <!-- Range: Maximum -->
            <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0, 240, 255, 0.05), rgba(138, 43, 226, 0.05));">
              <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-sm);">
                <div style="width: 16px; height: 40px; background: linear-gradient(to top, rgba(0,240,255,0.4), rgba(0,240,255,0.9)); border-radius: 3px; border: 1px solid rgba(0,240,255,0.5);"></div>
                <h3 style="font-size: var(--font-size-lg); margin: 0; color: var(--accent-cyan);">Maximum</h3>
              </div>
              <div style="font-family: var(--font-mono); font-size: 0.85rem; color: var(--text-muted); margin-bottom: var(--space-xs);">
                Velocity: 121-127
              </div>
              <p class="section-body" style="font-size: 0.9rem; margin: 0;">
                Maximum volume for maximum impact moments. Use sparingly for drops, fills, and climax moments.
              </p>
            </div>

          </div>

          <!-- How to Use Guide -->
          <div class="exercise-box" style="background: linear-gradient(135deg, rgba(0, 240, 255, 0.08), rgba(138, 43, 226, 0.08)); border: 1px solid rgba(0, 240, 255, 0.3);">
            <h3 style="font-size: var(--font-size-xl); margin-bottom: var(--space-md); color: var(--accent-primary);">
              üéÆ How to Control Velocity
            </h3>
            <div style="display: grid; gap: var(--space-md);">
              <div style="display: flex; gap: var(--space-md); align-items: start;">
                <span style="font-size: 2rem; flex-shrink: 0;">üëÜ</span>
                <div>
                  <strong style="color: var(--accent-cyan);">Click</strong>
                  <p class="section-body" style="margin: var(--space-xs) 0 0 0; font-size: 0.9rem;">
                    Click on a step button to activate/deactivate the note. The note will play at the current velocity (default 100).
                  </p>
                </div>
              </div>
              <div style="display: flex; gap: var(--space-md); align-items: start;">
                <span style="font-size: 2rem; flex-shrink: 0;">‚¨ÜÔ∏è</span>
                <div>
                  <strong style="color: var(--accent-cyan);">Drag Up</strong>
                  <p class="section-body" style="margin: var(--space-xs) 0 0 0; font-size: 0.9rem;">
                    Drag upward to increase velocity (higher volume). The number that appears shows the exact value (0-127).
                  </p>
                </div>
              </div>
              <div style="display: flex; gap: var(--space-md); align-items: start;">
                <span style="font-size: 2rem; flex-shrink: 0;">‚¨áÔ∏è</span>
                <div>
                  <strong style="color: var(--accent-cyan);">Drag Down</strong>
                  <p class="section-body" style="margin: var(--space-xs) 0 0 0; font-size: 0.9rem;">
                    Drag downward to decrease velocity (lower volume). Perfect for creating ghost notes.
                  </p>
                </div>
              </div>
              <div style="display: flex; gap: var(--space-md); align-items: start;">
                <span style="font-size: 2rem; flex-shrink: 0;">üëÅÔ∏è</span>
                <div>
                  <strong style="color: var(--accent-cyan);">Visual Indicators</strong>
                  <p class="section-body" style="margin: var(--space-xs) 0 0 0; font-size: 0.9rem;">
                    The <strong>blue bar</strong> inside the step shows intensity. Higher = louder. The <strong>blue line</strong> at the top is the velocity handle.
                  </p>
                </div>
              </div>
            </div>
          </div>

        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Practice Exercises</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>

            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Example Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Practice Playground</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);">
            <span id="mpl-step-count-label">16</span>-Step Sequencer con Velocity
          </h2>

          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:4px;"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
              <span>Clear</span>
            </button>

            <div id="mpl-seq-next-lesson-wrap" style="margin-left:auto;">
              <a href="labs.html" class="btn btn-primary">
                <span>Back to Labs &rarr;</span>
              </a>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Playground Mode - Experiment freely!</span>
          </div>
        </section>

        <!-- PRACTICAL TIPS SECTION -->
        <section class="theory-section" style="margin-top: var(--space-2xl); margin-bottom: var(--space-2xl);">
          <div class="section-eyebrow">Practical Tips</div>
          <h2 class="section-title">Velocity in Real Music</h2>

          <div style="display: grid; gap: var(--space-lg);">

            <!-- Tip 1 -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">
                ü•Å Why Drummers Use Different Velocities
              </h3>
              <p class="section-body">
                Real drummers don't hit every note with the same force. Each hit varies naturally based on:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Musical emphasis:</strong> Important beats are hit harder (accents)</li>
                <li><strong>Physical movement:</strong> Some hits are "bounces" that are naturally softer</li>
                <li><strong>Texture and expression:</strong> Soft hits add rhythmic detail without overpowering</li>
              </ul>
              <p class="section-body" style="margin-top: var(--space-sm); margin-bottom: 0;">
                When you program drums with uniform velocity (all at 100), the pattern sounds flat and lifeless. Adding velocity variations makes it immediately more human and professional.
              </p>
            </div>

            <!-- Tip 2 -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">
                üéØ Apply Velocity to Your Patterns
              </h3>
              <p class="section-body">
                Here's a simple formula to add dynamics to your grooves:
              </p>
              <ol class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Kick:</strong> Keep constant (90-110) for stability</li>
                <li><strong>Snare backbeat (2 & 4):</strong> Loud (100-120) to define the groove</li>
                <li><strong>Snare ghost notes:</strong> Very soft (25-40) between beats</li>
                <li><strong>Hi-hat downbeats:</strong> Accents (90-110) on main beats</li>
                <li><strong>Hi-hat off-beats:</strong> Softer (50-70) between beats</li>
              </ol>
              <p class="section-body" style="margin-top: var(--space-sm); margin-bottom: 0;">
                <strong>Golden rule:</strong> Create contrast! Strong accents become more powerful when surrounded by soft notes.
              </p>
            </div>

            <!-- Tip 3 -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">
                üí™ Exercises to Master Velocity
              </h3>
              <ol class="section-body" style="margin-left: var(--space-md);">
                <li>Recreate the Kick Demo pattern with all notes at the same velocity ‚Üí Notice how robotic it sounds</li>
                <li>Now vary the velocities like in the example ‚Üí Listen to how it becomes more interesting!</li>
                <li>Experiment with crescendo (gradual increase) and diminuendo (gradual decrease)</li>
                <li>Create a pattern with strong contrast: mix of ghost notes (30) and accents (110)</li>
                <li>Listen to real music and try to identify where you hear ghost notes and accents</li>
              </ol>
            </div>

          </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">¬© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>

    <!-- MODULAR LESSON ENGINE -->

<script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-21.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    <script src="navbar.js"></script>
  </body>
</html>
