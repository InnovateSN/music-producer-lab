<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson · Music Producer Lab</title>
    <meta name="viewport" content="width=1200, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero" style="display: flex; align-items: center; gap: var(--space-3xl);">
          <div class="hero-copy" style="flex: 1; max-width: none;">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
            <div id="mpl-hero-nav-btns" style="margin-top:1rem;display:flex;gap:0.6rem;flex-wrap:wrap;"></div>
          </div>

          <div class="hero-visual" style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <img src="images/mpl_hero_rightside.png" alt="Music Production" style="width: 100%; max-width: 500px; height: auto; object-fit: contain; filter: drop-shadow(0 0 40px rgba(0, 212, 255, 0.3));">
          </div>
        </section>

        <!-- EDUCATIONAL CONTENT -->
        <section style="margin-top: var(--space-3xl); margin-bottom: var(--space-3xl);">
          <div class="card" style="padding: var(--space-2xl); background: var(--bg-card); border: 1px solid var(--border-subtle);">

            <!-- INTRODUCTION -->
            <div class="section-eyebrow" style="margin-bottom: var(--space-md);">What You'll Learn</div>
            <h2 style="font-size: 2rem; margin-bottom: var(--space-lg); color: var(--text-primary);">The "4 on the Floor" Pattern: Foundation of Dance Music</h2>

            <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: var(--space-xl);">
              "4 on the floor" is the single most important <a href="glossary.html#drum-pattern" style="color: var(--accent-cyan); text-decoration: underline;">drum pattern</a> in electronic music.
              It means placing a <a href="glossary.html#kick-drum" style="color: var(--accent-cyan); text-decoration: underline;">kick drum</a> on every <a href="glossary.html#quarter-note" style="color: var(--accent-cyan); text-decoration: underline;">quarter note</a>—beats 1, 2, 3, and 4.
              This creates the steady, hypnotic pulse that drives house, techno, disco, and most modern dance music. Once you master this pattern, you'll understand why it's dominated dancefloors for over 50 years.
            </p>

            <!-- KEY CONCEPTS GRID - 4 on the Floor Specifics -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-xl); margin-bottom: var(--space-2xl);">

              <!-- What is 4 on the Floor -->
              <div style="padding: var(--space-lg); background: var(--bg-secondary); border-left: 4px solid var(--accent-cyan); border-radius: var(--radius-md);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/drum.png" alt="Kick Pattern" style="width: 32px; height: 32px;">
                  <h3 style="margin: 0; font-size: 1.3rem;"><a href="glossary.html#4-on-the-floor" style="color: var(--accent-cyan); text-decoration: none;">4 on the Floor</a></h3>
                </div>
                <p style="margin-bottom: var(--space-sm); color: var(--text-muted); font-weight: 600;">The Foundation Pattern</p>
                <p style="line-height: 1.7; color: var(--text-secondary);">
                  A <a href="glossary.html#kick-drum" style="color: var(--accent-cyan); text-decoration: underline;">kick drum</a> on every <a href="glossary.html#beat" style="color: var(--accent-cyan); text-decoration: underline;">beat</a>: 1-2-3-4.
                  In a 16-step <a href="glossary.html#sequencer" style="color: var(--accent-cyan); text-decoration: underline;">sequencer</a>, that's steps 1, 5, 9, and 13.
                </p>
                <p style="margin-top: var(--space-md); font-size: 0.9rem; color: var(--text-dim);">
                  <strong>Why it matters:</strong> This pattern is the heartbeat of house, techno, disco, and EDM. It's the first pattern every producer must master.
                </p>
              </div>

              <!-- Tempo Range -->
              <div style="padding: var(--space-lg); background: var(--bg-secondary); border-left: 4px solid var(--accent-purple); border-radius: var(--radius-md);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/orologio.png" alt="Tempo" style="width: 32px; height: 32px;">
                  <h3 style="margin: 0; font-size: 1.3rem;">Tempo Sweet Spot</h3>
                </div>
                <p style="margin-bottom: var(--space-sm); color: var(--text-muted); font-weight: 600;">120-130 BPM</p>
                <p style="line-height: 1.7; color: var(--text-secondary);">
                  House music: 120-125 <a href="glossary.html#bpm" style="color: var(--accent-purple); text-decoration: underline;">BPM</a>.
                  Techno: 125-130 BPM. This tempo range aligns with natural human movement and heartbeat rhythms.
                </p>
                <p style="margin-top: var(--space-md); font-size: 0.9rem; color: var(--text-dim);">
                  <strong>Why it matters:</strong> Too slow feels dragging, too fast feels rushed. 120 BPM is the universal sweet spot for dance music.
                </p>
              </div>

              <!-- Historical Origins -->
              <div style="padding: var(--space-lg); background: var(--bg-secondary); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/notamusicale.png" alt="History" style="width: 32px; height: 32px;">
                  <h3 style="margin: 0; font-size: 1.3rem;">Origins: Disco Era</h3>
                </div>
                <p style="margin-bottom: var(--space-sm); color: var(--text-muted); font-weight: 600;">1970s Philadelphia</p>
                <p style="line-height: 1.7; color: var(--text-secondary);">
                  Disco drummers pioneered the steady four-beat pattern to keep dancers moving. Donna Summer's "I Feel Love" (1977) made it electronic.
                </p>
                <p style="margin-top: var(--space-md); font-size: 0.9rem; color: var(--text-dim);">
                  <strong>Why it matters:</strong> This 50-year-old pattern still dominates because it works physiologically—humans naturally sync to steady pulses.
                </p>
              </div>

              <!-- Genre Applications -->
              <div style="padding: var(--space-lg); background: var(--bg-secondary); border-left: 4px solid var(--accent-green); border-radius: var(--radius-md);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/speaker.png" alt="Genres" style="width: 32px; height: 32px;">
                  <h3 style="margin: 0; font-size: 1.3rem;">Cross-Genre Power</h3>
                </div>
                <p style="margin-bottom: var(--space-sm); color: var(--text-muted); font-weight: 600;">Universal Dance Pattern</p>
                <p style="line-height: 1.7; color: var(--text-secondary);">
                  House, techno, trance, disco, pop/EDM, eurodance—all use this same foundation. Only the kick sound and tempo change between genres.
                </p>
                <p style="margin-top: var(--space-md); font-size: 0.9rem; color: var(--text-dim);">
                  <strong>Why it matters:</strong> Learn one pattern, produce any electronic genre. The most versatile pattern in music.
                </p>
              </div>

            </div>

            <!-- VISUAL EXAMPLE: 4 on the Floor Pattern -->
            <div style="padding: var(--space-xl); background: rgba(0, 212, 255, 0.05); border: 2px solid var(--border-glow); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
              <h3 style="margin-bottom: var(--space-lg); color: var(--accent-cyan); display: flex; align-items: center; gap: var(--space-sm);">
                <img src="images/idea.png" alt="Pattern" style="width: 28px; height: 28px;">
                The <a href="glossary.html#4-on-the-floor" style="color: var(--accent-cyan); text-decoration: underline;">4 on the Floor</a> Pattern Visualized
              </h3>

              <div style="display: grid; gap: var(--space-lg);">
                <!-- 16-Step Grid with Kicks Highlighted -->
                <div>
                  <h4 style="color: var(--text-primary); margin-bottom: var(--space-md);">One <a href="glossary.html#bar" style="color: var(--accent-cyan); text-decoration: underline;">Bar</a> = 16 Steps</h4>

                  <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 4px; margin-bottom: var(--space-md);">
                    <!-- Kick on step 1 -->
                    <div style="background: var(--accent-cyan); color: var(--bg-dark); padding: var(--space-xs); text-align: center; font-size: 0.75rem; font-weight: 700; border-radius: 4px; position: relative;">
                      1
                    </div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">2</div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">3</div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">4</div>

                    <!-- Kick on step 5 -->
                    <div style="background: var(--accent-cyan); color: var(--bg-dark); padding: var(--space-xs); text-align: center; font-size: 0.75rem; font-weight: 700; border-radius: 4px;">
                      5
                    </div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">6</div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">7</div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">8</div>

                    <!-- Kick on step 9 -->
                    <div style="background: var(--accent-cyan); color: var(--bg-dark); padding: var(--space-xs); text-align: center; font-size: 0.75rem; font-weight: 700; border-radius: 4px;">
                      9
                    </div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">10</div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">11</div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">12</div>

                    <!-- Kick on step 13 -->
                    <div style="background: var(--accent-cyan); color: var(--bg-dark); padding: var(--space-xs); text-align: center; font-size: 0.75rem; font-weight: 700; border-radius: 4px;">
                      13
                    </div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">14</div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">15</div>
                    <div style="background: var(--bg-tertiary); color: var(--text-muted); padding: var(--space-xs); text-align: center; font-size: 0.75rem; border-radius: 4px;">16</div>
                  </div>

                  <!-- Beat Labels -->
                  <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-xs); margin-bottom: var(--space-lg);">
                    <div style="text-align: center; color: var(--accent-cyan); font-weight: 600; font-size: 0.9rem;">Beat 1</div>
                    <div style="text-align: center; color: var(--accent-cyan); font-weight: 600; font-size: 0.9rem;">Beat 2</div>
                    <div style="text-align: center; color: var(--accent-cyan); font-weight: 600; font-size: 0.9rem;">Beat 3</div>
                    <div style="text-align: center; color: var(--accent-cyan); font-weight: 600; font-size: 0.9rem;">Beat 4</div>
                  </div>
                </div>

                <!-- Count-Along Section -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-radius: var(--radius-md);">
                  <h4 style="color: var(--text-primary); margin-bottom: var(--space-md);">How to Count It</h4>
                  <p style="color: var(--text-secondary); margin-bottom: var(--space-md); line-height: 1.7;">
                    While your pattern plays, count out loud: <strong style="color: var(--accent-cyan);">"ONE-two-three-four, ONE-two-three-four"</strong>
                  </p>
                  <p style="color: var(--text-muted); font-size: 0.9rem;">
                    The <a href="glossary.html#kick-drum" style="color: var(--accent-cyan); text-decoration: underline;">kick</a> should hit exactly when you say <strong>ONE</strong>, then again on <strong>two</strong>, <strong>three</strong>, and <strong>four</strong>.
                    If it doesn't, adjust your pattern until the kicks align with your count.
                  </p>
                </div>
              </div>
            </div>

            <!-- COMMON MISTAKES -->
            <div style="padding: var(--space-xl); background: rgba(255, 102, 102, 0.05); border: 2px solid rgba(255, 102, 102, 0.3); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
              <h3 style="margin-bottom: var(--space-lg); color: var(--accent-orange); display: flex; align-items: center; gap: var(--space-sm);">
                <img src="images/questionmark.png" alt="Mistakes" style="width: 28px; height: 28px;">
                Common Mistakes with 4 on the Floor
              </h3>

              <div style="display: grid; gap: var(--space-lg);">
                <!-- Mistake 1 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Placing Kicks on Wrong Steps
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Beginners often click steps 1, 2, 3, 4 instead of 1, 5, 9, 13. Remember: each <a href="glossary.html#beat" style="color: var(--accent-orange); text-decoration: underline;">beat</a> is 4 steps apart in a 16-step grid.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Count in fours: 1, (2-3-4), 5, (6-7-8), 9, (10-11-12), 13, (14-15-16)
                  </p>
                </div>

                <!-- Mistake 2 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Wrong <a href="glossary.html#tempo" style="color: var(--accent-orange); text-decoration: underline;">Tempo</a> for the Genre
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Making house music at 140 <a href="glossary.html#bpm" style="color: var(--accent-orange); text-decoration: underline;">BPM</a> or techno at 100 BPM—wrong tempo kills the vibe instantly.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: House = 120-125 BPM, Techno = 125-132 BPM. Use reference tracks to verify.
                  </p>
                </div>

                <!-- Mistake 3 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Kick Sample Too Quiet or Too Loud
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    In dance music, the <a href="glossary.html#kick-drum" style="color: var(--accent-orange); text-decoration: underline;">kick</a> should be one of the loudest elements. Too quiet = no impact. Too loud = distortion.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Aim for kicks peaking around -6dB to -10dB on your meter. Mix everything else around the kick.
                  </p>
                </div>
              </div>
            </div>

            <!-- WHY THIS MATTERS -->
            <div style="padding: var(--space-xl); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-lg);">
              <h3 style="margin-bottom: var(--space-md); color: var(--text-primary); display: flex; align-items: center; gap: var(--space-sm);">
                <img src="images/fulmine.png" alt="Important" style="width: 28px; height: 28px;">
                Why Mastering This Pattern Changes Everything
              </h3>
              <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: var(--space-md);">
                <li style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                  <img src="images/mplscudo_check.png" alt="Check" style="width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px;">
                  <span style="line-height: 1.7; color: var(--text-secondary);"><strong>Foundation for All Dance Music:</strong> House, techno, trance, EDM—all start with this pattern. Master it once, use it forever.</span>
                </li>
                <li style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                  <img src="images/mplscudo_check.png" alt="Check" style="width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px;">
                  <span style="line-height: 1.7; color: var(--text-secondary);"><strong>Physical Impact:</strong> Kick drums at 40-80Hz are <em>felt</em>, not just heard. On a club system, this pattern becomes a physical pulse dancers sync to.</span>
                </li>
                <li style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                  <img src="images/mplscudo_check.png" alt="Check" style="width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px;">
                  <span style="line-height: 1.7; color: var(--text-secondary);"><strong>Building Block for Complexity:</strong> Every hi-hat, snare, and percussion element you add later will be built around this steady kick pattern.</span>
                </li>
                <li style="display: flex; align-items: flex-start; gap: var(--space-sm);">
                  <img src="images/mplscudo_check.png" alt="Check" style="width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px;">
                  <span style="line-height: 1.7; color: var(--text-secondary);"><strong>Industry Standard:</strong> Professional producers still use this 50-year-old pattern in 2025. It's timeless because it works physiologically.</span>
                </li>
              </ul>

              <div style="margin-top: var(--space-lg); padding: var(--space-lg); background: var(--bg-card); border-radius: var(--radius-md);">
                <p style="color: var(--accent-purple); font-weight: 600; margin-bottom: var(--space-sm);">What's Next?</p>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Once you complete this exercise, you'll move on to <strong>Lesson 2: Adding Hi-Hats</strong>, where you'll learn to layer offbeat patterns on top of your 4-on-the-floor foundation.
                  By Lesson 6, you'll be creating full professional <a href="glossary.html#drum-pattern" style="color: var(--accent-purple); text-decoration: underline;">drum arrangements</a>.
                </p>
              </div>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>
            
            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>
          
          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <img src="images/PLAY.png" alt="Play" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <img src="images/STOP.png" alt="Stop" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all" style="display:none;">
              <img src="images/CLEAR.png" alt="Clear" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <!-- PRESET CONTROLS (hidden by default) -->
            <div id="mpl-preset-controls" style="display:none;gap:0.5rem;margin-left:0.5rem;">
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-save">Save</button>
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-load">Load</button>
            </div>

            <div style="margin-left:auto;display:flex;gap:0.75rem;">
              <div id="mpl-seq-prev-lesson-wrap">
                <button class="btn btn-secondary" id="mpl-prev-lesson">
                  <span>&larr; Previous Lesson</span>
                </button>
              </div>
              <div id="mpl-seq-next-lesson-wrap">
                <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                  <span>Next Lesson &rarr;</span>
                </button>
              </div>
            </div>
          </div>

          <!-- TEMPO/SWING CONTROLS (for sandbox mode) -->
          <div id="mpl-advanced-controls" style="display:none;margin-top:1rem;padding:1rem;background:var(--bg-secondary);border-radius:var(--radius-md);gap:1.5rem;flex-wrap:wrap;align-items:center;">
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-tempo-slider" style="font-size:0.85rem;color:var(--text-muted);">Tempo:</label>
              <input type="range" id="mpl-tempo-slider" min="60" max="180" value="120" style="width:100px;">
              <span id="mpl-tempo-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:50px;">120 BPM</span>
            </div>
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-swing-slider" style="font-size:0.85rem;color:var(--text-muted);">Swing:</label>
              <input type="range" id="mpl-swing-slider" min="0" max="100" value="0" style="width:100px;">
              <span id="mpl-swing-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:40px;">0%</span>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

        <!-- FOOTER -->
        <footer class="footer" id="mpl-footer">
          <div>&copy; <span id="mpl-year"></span> Music Producer Lab</div>
          <div><a class="footer-link" id="mpl-footer-overview-link" href="labs.html">Back to overview</a></div>
        </footer>
      </div>
      
      <!-- LESSON ENGINE SCRIPT -->
      <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>

      <!--
        HOW TO USE THIS TEMPLATE:
        
        1. Create a config file (e.g., configs/lesson-drums-5.config.js)
        2. Copy this template to your lesson file (e.g., lesson-drums-5-new.html)
        3. Update the script import at the bottom to point to your config
        
        Example:

<script type="module">
          import { lessonConfig } from './configs/lesson-drums-5.config.js';
          import { initLessonFromConfig } from './lesson-engine.js';
          initLessonFromConfig(lessonConfig);
        </script>
      -->

      
      <script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-1.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>
    <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>
  <script src="theme-registry.js"></script>
  <script src="theme-manager.js"></script>
    <script src="navbar.js"></script>
  </body>
</html>
