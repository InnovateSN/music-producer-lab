<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Vocal Processing Lab | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg" />
    <link rel="alternate icon" type="image/svg+xml" href="mpl-favicon-alt.svg" />
    <link rel="stylesheet" href="base.css" />
    <link rel="stylesheet" href="explanation.css" />
  </head>
  <body>
    <div class="page">
      <div class="page-inner">
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <header class="mpl-nav">
          <div class="mpl-nav-logo">
            <a href="index.html" aria-label="Music Producer Lab Home">
              <img src="mpl-logo-full.svg" alt="Music Producer Lab" class="mpl-nav-logo-img" />
            </a>
          </div>
          <div class="mpl-nav-actions">
            <button class="btn btn-outline" type="button" onclick="window.location.href='explanation.html'">
              <span>Back to overview</span>
            </button>
          </div>
          <!-- Mobile hamburger menu -->
          <button 
            class="mpl-hamburger" 
            id="mpl-hamburger"
            aria-label="Toggle navigation menu"
            aria-expanded="false"
            aria-controls="mpl-mobile-nav"
          >
            <span class="mpl-hamburger-line"></span>
            <span class="mpl-hamburger-line"></span>
            <span class="mpl-hamburger-line"></span>
          </button>
        </header>
        
        <!-- Mobile navigation overlay -->
        <nav class="mpl-mobile-nav" id="mpl-mobile-nav" aria-label="Mobile navigation">
          <a href="index.html" class="btn btn-outline"><span>Home</span></a>
          <a href="explanation.html" class="btn btn-outline"><span>All lessons</span></a>
        </nav>

        <main id="main-content">

        <section class="hero" id="lesson-hero" aria-label="Vocal Processing Lab"></section>

        <section class="sections-grid" id="lesson-overview" aria-label="Lesson overview"></section>

        <section class="sections-grid" id="lesson-steps" aria-label="Lesson steps"></section>

        <section class="sections-grid" id="lesson-outcomes" aria-label="Lesson outcomes"></section>

        <section class="sections-grid" id="lesson-navigation" aria-label="Lesson navigation"></section>

        </main>
        <footer class="footer">
          <div>&copy; <span id="mpl-year"></span> Music Producer Lab Â· Vocal Processing Lab</div>
          <div><a class="footer-link" href="explanation.html">Back to overview</a></div>
        </footer>
      </div>
    </div>

    <script type="module">
      import { renderLessonPage } from './lesson-template.js';
      renderLessonPage('vocals');

      // Mobile hamburger menu toggle
      const hamburger = document.getElementById('mpl-hamburger');
      const mobileNav = document.getElementById('mpl-mobile-nav');
      
      if (hamburger && mobileNav) {
        hamburger.addEventListener('click', () => {
          const isExpanded = hamburger.getAttribute('aria-expanded') === 'true';
          hamburger.setAttribute('aria-expanded', !isExpanded);
          mobileNav.classList.toggle('is-open');
          document.body.style.overflow = isExpanded ? '' : 'hidden';
        });
        
        mobileNav.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', () => {
            hamburger.setAttribute('aria-expanded', 'false');
            mobileNav.classList.remove('is-open');
            document.body.style.overflow = '';
          });
        });
        
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && mobileNav.classList.contains('is-open')) {
            hamburger.setAttribute('aria-expanded', 'false');
            mobileNav.classList.remove('is-open');
            document.body.style.overflow = '';
            hamburger.focus();
          }
        });
      }
    </script>
  </body>
</html>
