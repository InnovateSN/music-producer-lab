<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson · Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero" style="display: flex; align-items: center; gap: var(--space-3xl);">
          <div class="hero-copy" style="flex: 1; max-width: none;">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
            <div id="mpl-hero-nav-btns" style="margin-top:1rem;display:flex;gap:0.6rem;flex-wrap:wrap;"></div>
          </div>

          <div class="hero-visual" style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <img src="images/mpl_hero_rightside.png" alt="Music Production" style="width: 100%; max-width: 500px; height: auto; object-fit: contain; filter: drop-shadow(0 0 40px rgba(0, 212, 255, 0.3));">
          </div>
          </div>
        </section>

        <!-- EDUCATIONAL CONTENT -->
        <section style="margin-top: var(--space-3xl); margin-bottom: var(--space-3xl);">
          <div class="card" style="padding: var(--space-2xl); background: var(--bg-card); border: 1px solid var(--border-subtle);">

            <!-- INTRODUCTION -->
            <div class="section-eyebrow" style="margin-bottom: var(--space-md);">What You'll Learn</div>
            <h2 style="font-size: 2rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Ghost Notes & Dynamics: The Secret to Human Groove</h2>

            <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: var(--space-xl);">
              The difference between a <strong>mechanical drum pattern</strong> and a <strong>groove that feels alive</strong> comes down to one word: <a href="glossary.html#dynamics" style="color: var(--accent-cyan); text-decoration: underline;">dynamics</a>. <a href="glossary.html#ghost-notes" style="color: var(--accent-cyan); text-decoration: underline;">Ghost notes</a> are extremely soft drum hits (typically <a href="glossary.html#velocity" style="color: var(--accent-cyan); text-decoration: underline;">velocity</a> 15-40) placed between the main beats. They add <strong>texture, groove, and rhythmic complexity</strong> without overpowering the pattern. Combined with <a href="glossary.html#accents" style="color: var(--accent-cyan); text-decoration: underline;">accents</a> (loud hits at velocity 100+), ghost notes create the <strong>dynamic range</strong> that makes programmed drums sound like a real drummer playing with feel and expression. In this lesson, you'll transform a basic backbeat into a professional groove using velocity control.
            </p>

            <!-- KEY CONCEPTS GRID -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-2xl);">

              <!-- Concept 1: What Are Ghost Notes -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(255, 90, 61, 0.1), rgba(255, 178, 138, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(255, 90, 61, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/speakeroff.png" alt="Quiet" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-orange); margin: 0;">What Are Ghost Notes?</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  Ghost notes are <strong>very soft hits</strong> (velocity 15-40) that you "feel" more than you "hear." They fill in the rhythmic space between main beats, adding texture and movement without drawing attention. Think of them as the "connective tissue" that makes a groove flow naturally instead of feeling choppy.
                </p>
              </div>

              <!-- Concept 2: Velocity Control -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(95, 77, 255, 0.1), rgba(138, 155, 255, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(95, 77, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/speakerwave.png" alt="Volume" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-purple); margin: 0;">Velocity Control</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  <a href="glossary.html#velocity" style="color: var(--accent-cyan); text-decoration: underline;">Velocity</a> is how hard a note is "hit" (0-127 scale). <strong>Low velocity</strong> (15-40) = ghost notes. <strong>Medium velocity</strong> (60-85) = normal hits. <strong>High velocity</strong> (100-127) = accents. Real drummers constantly vary velocity—matching this creates human feel.
                </p>
              </div>

              <!-- Concept 3: Dynamic Range -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(184, 255, 221, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(0, 212, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/stats.png" alt="Range" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-cyan); margin: 0;">Dynamic Range</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  <a href="glossary.html#dynamic-range" style="color: var(--accent-cyan); text-decoration: underline;">Dynamic range</a> is the difference between your <strong>softest and loudest notes</strong>. A pattern with all notes at velocity 100 sounds robotic. A pattern with ghost notes at 30 and accents at 110 has an 80-point range—that's what creates <strong>expression and life</strong>.
                </p>
              </div>

              <!-- Concept 4: Humanization -->
              <div style="padding: var(--space-lg); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-md); border: 1px solid rgba(179, 102, 255, 0.2);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                  <img src="images/love.png" alt="Human" style="width: 2rem; height: 2rem;">
                  <h3 style="font-size: 1.25rem; color: var(--accent-magenta); margin: 0;">Humanization</h3>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.7;">
                  <a href="glossary.html#humanization" style="color: var(--accent-cyan); text-decoration: underline;">Humanization</a> is making programmed drums sound less mechanical and more like a real performance. Ghost notes + velocity variation + slight timing imperfections = human feel. This is what separates amateur programming from professional production.
                </p>
              </div>

            </div>

            <!-- VELOCITY COMPARISON VISUAL -->
            <div style="padding: var(--space-xl); background: var(--bg-secondary); border-radius: var(--radius-lg); margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Before & After: Adding Ghost Notes</h3>

              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-xl); margin-bottom: var(--space-lg);">

                <!-- BEFORE: All Same Velocity -->
                <div>
                  <h4 style="color: var(--text-muted); margin-bottom: var(--space-md); text-align: center;">❌ Before: All Notes Same Volume</h4>
                  <div style="background: rgba(255, 90, 61, 0.05); padding: var(--space-md); border-radius: var(--radius-md); border: 1px solid var(--border-subtle);">

                    <!-- Snare row without dynamics -->
                    <div style="margin-bottom: var(--space-md);">
                      <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Snare (all velocity 100)</div>
                      <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                      </div>
                      <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted); text-align: center;">
                        Steps 5, 7, 10, 13 - all same loudness
                      </div>
                    </div>

                    <!-- Velocity bars - all same -->
                    <div style="margin-top: var(--space-md);">
                      <div style="font-size: 0.7rem; color: var(--text-muted); margin-bottom: 4px;">Velocity visualization:</div>
                      <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-sm);">
                        <div style="text-align: center;">
                          <div style="height: 60px; display: flex; align-items: flex-end;">
                            <div style="width: 100%; height: 60px; background: linear-gradient(to top, #5f4dff, #8a9bff); border-radius: 2px;"></div>
                          </div>
                          <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">100</div>
                        </div>
                        <div style="text-align: center;">
                          <div style="height: 60px; display: flex; align-items: flex-end;">
                            <div style="width: 100%; height: 60px; background: linear-gradient(to top, #5f4dff, #8a9bff); border-radius: 2px;"></div>
                          </div>
                          <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">100</div>
                        </div>
                        <div style="text-align: center;">
                          <div style="height: 60px; display: flex; align-items: flex-end;">
                            <div style="width: 100%; height: 60px; background: linear-gradient(to top, #5f4dff, #8a9bff); border-radius: 2px;"></div>
                          </div>
                          <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">100</div>
                        </div>
                        <div style="text-align: center;">
                          <div style="height: 60px; display: flex; align-items: flex-end;">
                            <div style="width: 100%; height: 60px; background: linear-gradient(to top, #5f4dff, #8a9bff); border-radius: 2px;"></div>
                          </div>
                          <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">100</div>
                        </div>
                      </div>
                    </div>

                  </div>
                  <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: var(--space-sm); text-align: center;">No dynamic range—sounds robotic</p>
                </div>

                <!-- AFTER: With Ghost Notes -->
                <div>
                  <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-md); text-align: center;">✓ After: Accents + Ghost Notes</h4>
                  <div style="background: rgba(0, 212, 255, 0.05); padding: var(--space-md); border-radius: var(--radius-md); border: 1px solid var(--accent-cyan);">

                    <!-- Snare row with dynamics -->
                    <div style="margin-bottom: var(--space-md);">
                      <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px;">Snare (varied velocity)</div>
                      <div style="display: grid; grid-template-columns: repeat(16, 1fr); gap: 2px;">
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px; box-shadow: 0 0 12px rgba(95, 77, 255, 0.8);"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,rgba(95,77,255,0.4),rgba(138,155,255,0.4)); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,rgba(95,77,255,0.4),rgba(138,155,255,0.4)); height: 24px; border-radius: 2px;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: linear-gradient(135deg,#5f4dff,#8a9bff); height: 24px; border-radius: 2px; box-shadow: 0 0 12px rgba(95, 77, 255, 0.8);"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                        <div style="background: var(--bg-card); height: 24px; border-radius: 2px; opacity: 0.3;"></div>
                      </div>
                      <div style="margin-top: 4px; font-size: 0.7rem; color: var(--text-muted); text-align: center;">
                        Steps 5, 13 (LOUD) + 7, 10 (ghost - soft)
                      </div>
                    </div>

                    <!-- Velocity bars - varied -->
                    <div style="margin-top: var(--space-md);">
                      <div style="font-size: 0.7rem; color: var(--text-muted); margin-bottom: 4px;">Velocity visualization:</div>
                      <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-sm);">
                        <div style="text-align: center;">
                          <div style="height: 60px; display: flex; align-items: flex-end;">
                            <div style="width: 100%; height: 60px; background: linear-gradient(to top, #5f4dff, #8a9bff); border-radius: 2px; box-shadow: 0 0 8px rgba(95,77,255,0.6);"></div>
                          </div>
                          <div style="font-size: 0.65rem; color: var(--accent-cyan); margin-top: 2px; font-weight: bold;">110</div>
                        </div>
                        <div style="text-align: center;">
                          <div style="height: 60px; display: flex; align-items: flex-end;">
                            <div style="width: 100%; height: 18px; background: linear-gradient(to top, rgba(95,77,255,0.4), rgba(138,155,255,0.4)); border-radius: 2px;"></div>
                          </div>
                          <div style="font-size: 0.65rem; color: var(--accent-orange); margin-top: 2px; font-weight: bold;">30</div>
                        </div>
                        <div style="text-align: center;">
                          <div style="height: 60px; display: flex; align-items: flex-end;">
                            <div style="width: 100%; height: 18px; background: linear-gradient(to top, rgba(95,77,255,0.4), rgba(138,155,255,0.4)); border-radius: 2px;"></div>
                          </div>
                          <div style="font-size: 0.65rem; color: var(--accent-orange); margin-top: 2px; font-weight: bold;">30</div>
                        </div>
                        <div style="text-align: center;">
                          <div style="height: 60px; display: flex; align-items: flex-end;">
                            <div style="width: 100%; height: 60px; background: linear-gradient(to top, #5f4dff, #8a9bff); border-radius: 2px; box-shadow: 0 0 8px rgba(95,77,255,0.6);"></div>
                          </div>
                          <div style="font-size: 0.65rem; color: var(--accent-cyan); margin-top: 2px; font-weight: bold;">110</div>
                        </div>
                      </div>
                    </div>

                  </div>
                  <p style="font-size: 0.9rem; color: var(--accent-cyan); margin-top: var(--space-sm); text-align: center;">80-point dynamic range creates human feel</p>
                </div>

              </div>

              <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                <strong>Key difference:</strong> The "After" version has <strong>accents</strong> on beats 2 & 4 (steps 5, 13) at velocity 110 with glow, and <strong>ghost notes</strong> on steps 7 and 10 at velocity 30 (shown faded). This 80-point dynamic range (30 to 110) is what makes the groove feel alive and human instead of robotic.
              </p>

              <p style="color: var(--text-muted); font-size: 0.9rem; font-style: italic;">
                Listen carefully: Ghost notes should be felt in the groove, not consciously heard. If you can clearly hear every ghost note, they're too loud.
              </p>
            </div>

            <!-- COMMON MISTAKES -->
            <div style="margin-bottom: var(--space-2xl);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Common Mistakes to Avoid</h3>

              <div style="display: grid; gap: var(--space-md);">

                <!-- Mistake 1 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Ghost Notes Too Loud
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    The most common mistake is setting ghost notes at velocity 60-80, making them clearly audible hits rather than subtle texture. At this volume, they compete with the main backbeat and create clutter instead of groove.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Keep ghost notes at <strong>velocity 15-40</strong> (typically 25-35). They should be barely audible—you feel their presence more than you hear individual hits.
                  </p>
                </div>

                <!-- Mistake 2 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    All Notes Same Velocity (No Dynamics)
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Many beginners program drums with every hit at velocity 100 (or 127). This creates a <strong>machine-gun effect</strong>—perfectly even, robotic, lifeless. No real drummer plays every hit at exactly the same volume.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Create <strong>dynamic contrast</strong>. Accents (100-127) on important beats, normal hits (70-90) for supporting rhythm, ghost notes (15-40) for texture. Aim for at least 60-80 points of dynamic range.
                  </p>
                </div>

                <!-- Mistake 3 -->
                <div style="padding: var(--space-lg); background: var(--bg-card); border-left: 4px solid var(--accent-orange); border-radius: var(--radius-md);">
                  <h4 style="color: var(--accent-orange); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-xs);">
                    <img src="images/X_gray.png" alt="Error" style="width: 1.2rem; height: 1.2rem; vertical-align: middle;">
                    Too Many Ghost Notes (Overcrowding)
                  </h4>
                  <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: var(--space-sm);">
                    Some producers add ghost notes on every available space. This creates rhythmic clutter where the groove loses definition and the ghost notes stop being special—they become background noise.
                  </p>
                  <p style="color: var(--accent-orange); font-weight: 600; font-size: 0.9rem;">
                    ✓ Fix: Use ghost notes <strong>strategically</strong>. In most grooves, 1-3 ghost notes per bar is enough. Place them where they enhance the rhythm, not everywhere they could fit.
                  </p>
                </div>

              </div>
            </div>

            <!-- WHY THIS MATTERS -->
            <div style="padding: var(--space-xl); background: linear-gradient(135deg, rgba(179, 102, 255, 0.1), rgba(255, 102, 178, 0.1)); border-radius: var(--radius-lg);">
              <h3 style="font-size: 1.5rem; margin-bottom: var(--space-lg); color: var(--text-primary);">Why Ghost Notes & Dynamics Matter</h3>

              <div style="display: grid; gap: var(--space-md); color: var(--text-secondary); line-height: 1.8;">
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">1.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Humanization:</strong> Velocity variation is what makes programmed drums sound like a real performance. It's the difference between a drum machine and a drummer with feel.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">2.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Groove Enhancement:</strong> Ghost notes add rhythmic complexity and "glue" that makes grooves flow naturally. They're what make you bob your head without knowing why.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">3.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Professional Sound:</strong> Amateur productions have flat dynamics. Professional productions have 80+ points of dynamic range. Mastering velocity control is a hallmark of advanced production.</p>
                </div>
                <div style="display: flex; gap: var(--space-sm);">
                  <span style="color: var(--accent-cyan); font-weight: bold; font-size: 1.25rem;">4.</span>
                  <p style="margin: 0;"><strong style="color: var(--text-primary);">Genre Essentials:</strong> Funk, jazz, R&B, and hip-hop all rely heavily on ghost notes. Without them, these genres lose their signature feel and pocket.</p>
                </div>
              </div>
            </div>

            <!-- WHAT'S NEXT -->
            <div style="margin-top: var(--space-xl); padding: var(--space-lg); background: var(--bg-secondary); border-radius: var(--radius-md); border-left: 4px solid var(--accent-cyan);">
              <h4 style="color: var(--accent-cyan); margin-bottom: var(--space-sm);">What's Next?</h4>
              <p style="color: var(--text-secondary); line-height: 1.7; margin: 0;">
                With ghost notes and dynamics mastered, you'll explore <strong>swing and shuffle</strong> (timing variations that create groove pockets), <strong>polyrhythms</strong> (layering multiple rhythms), and <strong>advanced drum sound design</strong> (layering samples, parallel compression, transient shaping). Each technique builds on your foundation of rhythmic expression.
              </p>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>
            
            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>
          
          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <img src="images/PLAY.png" alt="Play" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <img src="images/STOP.png" alt="Stop" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all" style="display:none;">
              <img src="images/CLEAR.png" alt="Clear" style="width: 16px; height: 16px; margin-right: 4px; filter: brightness(1.2);">
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <!-- PRESET CONTROLS (hidden by default) -->
            <div id="mpl-preset-controls" style="display:none;gap:0.5rem;margin-left:0.5rem;">
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-save">Save</button>
              <button type="button" class="btn btn-outline btn-sm" id="mpl-preset-load">Load</button>
            </div>

            <div style="margin-left:auto;display:flex;gap:0.75rem;">
              <div id="mpl-seq-prev-lesson-wrap">
                <button class="btn btn-secondary" id="mpl-prev-lesson">
                  <span>&larr; Previous Lesson</span>
                </button>
              </div>
              <div id="mpl-seq-next-lesson-wrap">
                <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                  <span>Next Lesson &rarr;</span>
                </button>
              </div>
            </div>
          </div>

          <!-- TEMPO/SWING CONTROLS (for sandbox mode) -->
          <div id="mpl-advanced-controls" style="display:none;margin-top:1rem;padding:1rem;background:var(--bg-secondary);border-radius:var(--radius-md);gap:1.5rem;flex-wrap:wrap;align-items:center;">
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-tempo-slider" style="font-size:0.85rem;color:var(--text-muted);">Tempo:</label>
              <input type="range" id="mpl-tempo-slider" min="60" max="180" value="120" style="width:100px;">
              <span id="mpl-tempo-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:50px;">120 BPM</span>
            </div>
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <label for="mpl-swing-slider" style="font-size:0.85rem;color:var(--text-muted);">Swing:</label>
              <input type="range" id="mpl-swing-slider" min="0" max="100" value="0" style="width:100px;">
              <span id="mpl-swing-value" style="font-family:var(--font-mono);font-size:0.85rem;min-width:40px;">0%</span>
            </div>
          </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

        <!-- FOOTER -->
        <footer class="footer" id="mpl-footer">
          <div>&copy; <span id="mpl-year"></span> Music Producer Lab</div>
          <div><a class="footer-link" id="mpl-footer-overview-link" href="labs.html">Back to overview</a></div>
        </footer>
      </div>
      
      <!-- LESSON ENGINE SCRIPT -->
      <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>

      <!--
        HOW TO USE THIS TEMPLATE:
        
        1. Create a config file (e.g., configs/lesson-drums-5.config.js)
        2. Copy this template to your lesson file (e.g., lesson-drums-5-new.html)
        3. Update the script import at the bottom to point to your config
        
        Example:

<script type="module">
          import { lessonConfig } from './configs/lesson-drums-5.config.js';
          import { initLessonFromConfig } from './lesson-engine.js';
          initLessonFromConfig(lessonConfig);
        </script>
      -->

      
      <script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-7.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>
    <script>document.getElementById("mpl-year").textContent = new Date().getFullYear();</script>
  <script src="theme-registry.js"></script>
  <script src="theme-manager.js"></script>
    <script src="navbar.js"></script>
  </body>
</html>
