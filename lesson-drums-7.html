<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title id="mpl-page-title">Lesson 7 | Music Producer Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" id="mpl-meta-description" content="Interactive music production lesson from Music Producer Lab." />
    <meta name="theme-color" content="#030508">
    <link rel="icon" type="image/svg+xml" href="mpl-favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <main class="main-content container">

        <!-- HERO SECTION (populated by JS) -->
        <section class="hero" id="mpl-hero" aria-label="Lesson hero">
          <div class="hero-copy">
            <div class="hero-copy-eyebrow" id="mpl-hero-eyebrow">Loading...</div>
            <h1 class="hero-title" id="mpl-hero-title">
              <span id="mpl-hero-title-main">Lesson</span>
              <span id="mpl-hero-title-highlight"></span>
            </h1>
            <p class="hero-subtitle" id="mpl-hero-subtitle"></p>
          </div>

          <!-- Hero visual section -->
        </section>

        <!-- THEORY CONTENT SECTION -->
        <section class="theory-section" style="margin-top: var(--space-2xl); margin-bottom: var(--space-2xl);">
          <div class="section-eyebrow">Theory</div>
          <h2 class="section-title">Ghost Notes & Dynamics: From Robotic to Human</h2>
          <p class="section-body" style="margin-bottom: var(--space-xl);">
            In Lessons 1-6, you built solid <a href="glossary.html#groove" style="color: var(--accent-cyan); text-decoration: underline;">grooves</a> with <a href="glossary.html#kick-drum" style="color: var(--accent-cyan); text-decoration: underline;">kicks</a>, <a href="glossary.html#snare-drum" style="color: var(--accent-cyan); text-decoration: underline;">snares</a>, and <a href="glossary.html#hi-hat" style="color: var(--accent-cyan); text-decoration: underline;">hi-hats</a>. But they probably sounded "programmed" or "robotic." That's because real drummers don't hit every note with the same force. They use <strong><a href="glossary.html#dynamics" style="color: var(--accent-cyan); text-decoration: underline;">dynamics</a></strong> (variations in loudness) and <strong><a href="glossary.html#ghost-notes" style="color: var(--accent-cyan); text-decoration: underline;">ghost notes</a></strong> (very soft hits) to create expression, texture, and human feel.
          </p>

          <!-- Theory Cards Grid -->
          <div style="display: grid; gap: var(--space-lg); margin-bottom: var(--space-xl);">

            <!-- Card: What are ghost notes -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">What are Ghost Notes?</h3>
              <p class="section-body">
                <strong>Ghost notes</strong> are very soft drum hits‚Äîtypically <a href="glossary.html#snare-drum" style="color: var(--accent-cyan); text-decoration: underline;">snare</a> hits‚Äîplaced between the main <a href="glossary.html#beat" style="color: var(--accent-cyan); text-decoration: underline;">beats</a>. They're called "ghost" notes because they should be <em>felt</em> more than heard. They add subtle texture and make the <a href="glossary.html#groove" style="color: var(--accent-cyan); text-decoration: underline;">groove</a> feel more natural and less mechanical.
              </p>
              <p class="section-body">
                In electronic music production, ghost notes are programmed by using very low <a href="glossary.html#velocity" style="color: var(--accent-cyan); text-decoration: underline;">velocity</a> values (typically 15-40 out of 127). This makes the note trigger at a much softer volume than the main hits.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                Ghost notes are essential in funk, hip-hop, and live drum programming. They fill the space between strong hits and create a "breathing" quality in your patterns.
              </p>
            </div>

            <!-- Card: What is velocity -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Understanding Velocity</h3>
              <p class="section-body">
                <strong><a href="glossary.html#velocity" style="color: var(--accent-cyan); text-decoration: underline;">Velocity</a></strong> controls how hard a note is played. It's measured on a scale from 0 to 127:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>15-40:</strong> Ghost notes (barely audible, felt more than heard)</li>
                <li><strong>40-70:</strong> Soft/medium hits</li>
                <li><strong>70-100:</strong> Normal playing strength</li>
                <li><strong>100-127:</strong> <a href="glossary.html#accent" style="color: var(--accent-cyan); text-decoration: underline;">Accents</a> (emphasized, loud hits)</li>
              </ul>
              <p class="section-body" style="margin-top: var(--space-sm); margin-bottom: 0;">
                By varying velocity, you create <strong>dynamic range</strong>‚Äîthe difference between the softest and loudest notes. This is what separates robotic patterns from musical, expressive grooves.
              </p>
            </div>

            <!-- Card: Why dynamics matter -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">Why Dynamics Transform Your Grooves</h3>
              <p class="section-body">
                Real drummers naturally play with dynamics. Every hit has slightly different force based on:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Musical emphasis:</strong> Important beats get hit harder (accents)</li>
                <li><strong>Physical motion:</strong> Some hits are "bounce" or "rebound" hits that are naturally softer</li>
                <li><strong>Texture and expression:</strong> Soft hits add rhythmic detail without overwhelming the pattern</li>
              </ul>
              <p class="section-body" style="margin-top: var(--space-sm);">
                When you program drums with uniform velocity (every hit at 100), the pattern sounds flat and lifeless. Adding ghost notes and velocity variation instantly makes it sound more human, professional, and musical.
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                <strong>The goal:</strong> Create contrast. Loud accents become more powerful when surrounded by softer notes. Ghost notes become meaningful when they contrast with strong backbeats.
              </p>
            </div>

            <!-- Card: Applying ghost notes in practice -->
            <div class="exercise-box">
              <h3 style="font-size: var(--font-size-lg); margin-bottom: var(--space-sm); color: var(--accent-primary);">How to Use Ghost Notes</h3>
              <p class="section-body">
                The most common application of ghost notes is on the <a href="glossary.html#snare-drum" style="color: var(--accent-cyan); text-decoration: underline;">snare</a> drum:
              </p>
              <ul class="section-body" style="margin-left: var(--space-md); margin-top: var(--space-sm);">
                <li><strong>Main snare hits:</strong> Beats 2 and 4 (the <a href="glossary.html#backbeat" style="color: var(--accent-cyan); text-decoration: underline;">backbeat</a>) at high velocity (100-127)</li>
                <li><strong>Ghost notes:</strong> Off-beats and <a href="glossary.html#subdivisions" style="color: var(--accent-cyan); text-decoration: underline;">subdivisions</a> at very low velocity (15-40)</li>
              </ul>
              <p class="section-body" style="margin-top: var(--space-sm);">
                In this lesson, you'll place loud snare hits on steps 5 and 13 (beats 2 & 4), and soft ghost notes on steps 7 and 10 (strategic off-beat positions that add texture without cluttering the groove).
              </p>
              <p class="section-body" style="margin-bottom: 0;">
                <strong>Pro tip:</strong> Don't overdo ghost notes. A few well-placed soft hits are more effective than filling every gap. Subtlety is key.
              </p>
            </div>

          </div>
        </section>

        <!-- EXERCISE INSTRUCTIONS (populated by JS) -->
        <section class="exercise-instructions" id="mpl-exercise-section" style="margin-top: var(--space-2xl);">
          <div class="exercise-box">
            <div class="section-eyebrow">Exercise</div>
            <h2 class="section-title" id="mpl-exercise-title">Loading exercise...</h2>
            <p class="section-body" id="mpl-exercise-description"></p>

            <div class="exercise-steps" id="mpl-exercise-steps-wrap">
              <h3>What to do:</h3>
              <ol class="exercise-checklist" id="mpl-exercise-steps"></ol>
            </div>

            <div class="exercise-tip" id="mpl-exercise-tip" style="display:none;">
              <strong>Tip:</strong> <span id="mpl-exercise-tip-text"></span>
            </div>

            <!-- PATTERN HINT (populated by JS) -->
            <div class="pattern-hint" id="mpl-pattern-hint" style="display:none;">
              <div class="pattern-hint-label">Target Pattern:</div>
              <div id="mpl-pattern-hint-grid"></div>
              <div class="pattern-note" id="mpl-pattern-hint-note"></div>
            </div>
          </div>
        </section>

        <!-- TOOLS GUIDE BANNER -->
        <div class="exercise-box" style="margin-top: var(--space-2xl); background: linear-gradient(135deg, rgba(0, 240, 255, 0.08) 0%, rgba(95, 77, 255, 0.08) 100%); border: 1px solid rgba(0, 240, 255, 0.2);">
          <div style="display: flex; align-items: center; gap: var(--space-md);">
            <span style="font-size: 2rem;">üéõÔ∏è</span>
            <div style="flex: 1;">
              <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: var(--space-xs); color: var(--accent-cyan);">
                New to Velocity Controls?
              </h3>
              <p style="margin: 0; color: var(--text-muted);">
                This lesson introduces velocity sliders and advanced sequencer features.
                <a href="learn-tools.html" style="color: var(--accent-primary); text-decoration: underline; font-weight: 600;">Check out our Tools Guide ‚Üí</a>
                for a complete walkthrough of all sequencer controls.
              </p>
            </div>
          </div>
        </div>

        <!-- SEQUENCER SECTION -->
        <section class="sequencer-section" id="mpl-sequencer-section" style="margin-top: var(--space-xl);">
          <div class="section-eyebrow" style="margin-bottom: var(--space-sm);">Interactive Sequencer</div>
          <h2 class="section-title" style="margin-bottom: var(--space-lg);"><span id="mpl-step-count-label">16</span>-Step Grid</h2>

          <div class="sequencer" id="mpl-sequencer-collection">
            <!-- Sequencer will be created by JS -->
          </div>

          <!-- CONTROLS -->
          <div class="sequencer-controls" style="display:flex;gap:0.75rem;margin-top:1.5rem;flex-wrap:wrap;align-items:center;">
            <button type="button" class="btn btn-outline" id="mpl-seq-play-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              <span>Play</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-stop-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right:4px;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
              <span>Stop</span>
            </button>
            <button type="button" class="btn btn-outline" id="mpl-seq-clear-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:4px;"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
              <span>Clear</span>
            </button>
            <button type="button" class="btn btn-primary" id="mpl-seq-check-all">
              <span>Check Exercise</span>
            </button>

            <div style="margin-left:auto;display:flex;gap:0.75rem;">
              <div id="mpl-seq-prev-lesson-wrap">
                <button class="btn btn-secondary" id="mpl-prev-lesson">
                  <span>&larr; Previous Lesson</span>
                </button>
              </div>
              <div id="mpl-seq-next-lesson-wrap">
                <button class="btn btn-primary" id="mpl-next-lesson" disabled title="Complete exercise to unlock">
                  <span>Next Lesson &rarr;</span>
                </button>
              </div>
            </div>

          <div class="sequencer-status" id="mpl-seq-status" aria-live="polite" style="margin-top:1rem;">
            <span>Complete the exercise to unlock the next lesson.</span>
          </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="copyright">¬© <span id="mpl-year">2025</span> Music Producer Lab</p>
        <nav class="footer-nav">
          <a href="labs.html">Labs</a>
          <a href="index.html">Home</a>
        </nav>
      </div>
    </footer>

    <!-- MODULAR LESSON ENGINE -->

<script type="module">
      // Import lesson config and engine
      import { lessonConfig } from './configs/lesson-drums-7.config.js';
      import { initLessonFromConfig } from './lesson-engine.js';

      // Initialize lesson from config
      initLessonFromConfig(lessonConfig);

      // Set year in footer
      document.getElementById("mpl-year").textContent = new Date().getFullYear();
    </script>
    <script src="navbar.js"></script>
  </body>
</html>
